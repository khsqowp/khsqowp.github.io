
--- 
title: "ğŸ“ AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ê°•ì˜ ë…¸íŠ¸ (6ì¼ì°¨)"
date: 2025-12-10
categories:
  - AWS-Cloud
tags:
  - AWS-Cloud
  - SK_Rookies
---

# ğŸ“ AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ê°•ì˜ ë…¸íŠ¸ (6ì¼ì°¨)

## ğŸ“… ê°•ì˜ ì •ë³´
- **ë‚ ì§œ**: 2025ë…„ 12ì›” 10ì¼
- **ì£¼ì œ**: AWS ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤, ë¡œê·¸ ê´€ë¦¬, ë³´ì•ˆ ì„œë¹„ìŠ¤
- **ê°•ì˜ ì°¨ìˆ˜**: 6ì¼ì°¨
- **í•™ìŠµ ëª©í‘œ**:
  - AWS ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ (DynamoDB, Redshift, DMS ë“±) ì´í•´ ë° ì‹¤ìŠµ
  - AWS ë¡œê·¸ ìˆ˜ì§‘ ë° ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ í•™ìŠµ
  - AWS ë³´ì•ˆ ì„œë¹„ìŠ¤ (Shield, WAF, Config, GuardDuty ë“±) ì´í•´
  - WAFë¥¼ ì´ìš©í•œ ì›¹ ì„œë¹„ìŠ¤ ë³´í˜¸ ì‹¤ìŠµ

---

## ğŸ”„ 5ì¼ì°¨ í•™ìŠµ ë³µìŠµ

### ğŸ“¦ íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤

#### 1ï¸âƒ£ Amazon EFS (Elastic File System)

**ê°œë…:**
- **NFS í”„ë¡œí† ì½œ** ê¸°ë°˜ì˜ ê³µìœ  ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤
- **Linux ì„œë²„ ì „ìš©** íŒŒì¼ ì‹œìŠ¤í…œ

**ì£¼ìš” íŠ¹ì§•:**
- ì—¬ëŸ¬ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ **ë™ì‹œì— ì ‘ê·¼** ê°€ëŠ¥
- ìë™ ìŠ¤ì¼€ì¼ë§: íŒŒì¼ ì¶”ê°€/ì‚­ì œ ì‹œ ìš©ëŸ‰ ìë™ ì¡°ì •
- ê°€ìš©ì„±: ì—¬ëŸ¬ ê°€ìš© ì˜ì—­(AZ)ì— ë°ì´í„° ìë™ ë³µì œ
- ì„±ëŠ¥ ëª¨ë“œ:
  - **General Purpose**: ì¼ë°˜ì ì¸ ì›Œí¬ë¡œë“œ (ê¸°ë³¸)
  - **Max I/O**: ë†’ì€ ì²˜ë¦¬ëŸ‰ì´ í•„ìš”í•œ ê²½ìš°

**ì‚¬ìš© ì‚¬ë¡€:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EFS       â”‚ â† NFS í”„ë¡œí† ì½œ
â”‚ (ê³µìœ  ìŠ¤í† ë¦¬ì§€)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
   â”‚       â”‚       â”‚       â”‚
â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”
â”‚EC2-1â”‚ â”‚EC2-2â”‚ â”‚EC2-3â”‚ â”‚EC2-4â”‚
â”‚Linuxâ”‚ â”‚Linuxâ”‚ â”‚Linuxâ”‚ â”‚Linuxâ”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
```

ğŸ’¡ **ì¤‘ìš”!** EFSëŠ” Linux ì„œë²„ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, Windows ì„œë²„ì—ì„œëŠ” FSxë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

---

#### 2ï¸âƒ£ Amazon FSx for Windows File Server

**ê°œë…:**
- **SMB í”„ë¡œí† ì½œ** ê¸°ë°˜ì˜ ê³µìœ  ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤
- **Windows ì„œë²„ ì „ìš©** íŒŒì¼ ì‹œìŠ¤í…œ

**ì£¼ìš” íŠ¹ì§•:**
- Windows ë„¤ì´í‹°ë¸Œ íŒŒì¼ ì‹œìŠ¤í…œ (NTFS) ì§€ì›
- Active Directory (AD) í†µí•©
- SMB í”„ë¡œí† ì½œì„ í†µí•œ íŒŒì¼ ê³µìœ 
- Windows ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì™„ë²½ í˜¸í™˜

**ë¹„êµí‘œ: EFS vs FSx**

| êµ¬ë¶„ | EFS | FSx for Windows |
|:---:|:---:|:---:|
| **í”„ë¡œí† ì½œ** | NFS | SMB |
| **ì§€ì› OS** | Linux | Windows |
| **íŒŒì¼ ì‹œìŠ¤í…œ** | Linux íŒŒì¼ ì‹œìŠ¤í…œ | NTFS |
| **AD í†µí•©** | ë¶ˆê°€ | ê°€ëŠ¥ |
| **ì‚¬ìš© ì‚¬ë¡€** | ì›¹ ì„œë²„, ë¹…ë°ì´í„° | Windows ì•±, í™ˆ ë””ë ‰í† ë¦¬ |

---

### ğŸŒ‰ í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤

#### 3ï¸âƒ£ AWS Storage Gateway

**ê°œë…:**
- ì˜¨í”„ë ˆë¯¸ìŠ¤ì™€ AWS ìŠ¤í† ë¦¬ì§€ë¥¼ **ì—°ê²°**í•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤í† ë¦¬ì§€ ì†”ë£¨ì…˜
- ì˜¨í”„ë ˆë¯¸ìŠ¤ ë°ì´í„°ë¥¼ AWS í´ë¼ìš°ë“œë¡œ í™•ì¥

**Storage Gateway ìœ í˜•:**

##### â“ S3 File Gateway

```mermaid
graph LR
    A[ì˜¨í”„ë ˆë¯¸ìŠ¤ ì„œë²„] -->|NFS| B[S3 File Gateway]
    B -->|HTTPS| C[Amazon S3]

    style A fill:#ff9999
    style B fill:#99ccff
    style C fill:#99ff99
```

- **í”„ë¡œí† ì½œ**: NFS/SMB
- **ëŒ€ìƒ**: Amazon S3
- **ìš©ë„**: íŒŒì¼ ê¸°ë°˜ ë°ì´í„°ë¥¼ S3ì— ì €ì¥
- **íŠ¹ì§•**: ìì£¼ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ëŠ” ë¡œì»¬ ìºì‹œì— ì €ì¥

##### â“‘ FSx File Gateway

- **í”„ë¡œí† ì½œ**: SMB
- **ëŒ€ìƒ**: FSx for Windows File Server
- **ìš©ë„**: Windows íŒŒì¼ ì„œë²„ í™•ì¥
- **íŠ¹ì§•**: Active Directory í†µí•©

##### â“’ Volume Gateway

```mermaid
sequenceDiagram
    participant O as ì˜¨í”„ë ˆë¯¸ìŠ¤ ì„œë²„
    participant V as Volume Gateway
    participant S3 as Amazon S3
    participant EBS as Amazon EBS

    O->>V: iSCSI ì—°ê²°
    V->>S3: ìŠ¤ëƒ…ìƒ· ë°±ì—…
    S3->>EBS: ë³µì› ê°€ëŠ¥
```

- **í”„ë¡œí† ì½œ**: iSCSI
- **ëŒ€ìƒ**: Amazon S3
- **ìš©ë„**: ë¸”ë¡ ìŠ¤í† ë¦¬ì§€ ë°±ì—…
- **íŠ¹ì§•**:
  - **Cached Mode**: ìì£¼ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë§Œ ë¡œì»¬ ìºì‹œ
  - **Stored Mode**: ì „ì²´ ë°ì´í„°ë¥¼ ë¡œì»¬ì— ì €ì¥, S3ì— ë¹„ë™ê¸° ë°±ì—…

**ë°±ì—… ë³µì› í”„ë¡œì„¸ìŠ¤:**
1. Volume Gatewayë¥¼ í†µí•´ **EBS ë³¼ë¥¨ ìŠ¤ëƒ…ìƒ·**ì„ S3ì— ì €ì¥
2. ìŠ¤ëƒ…ìƒ·ì„ **AWS Backup** ì„œë¹„ìŠ¤ë¡œ ì¶”ê°€ ë°±ì—… ê°€ëŠ¥
3. í•„ìš” ì‹œ ìŠ¤ëƒ…ìƒ·ì—ì„œ **EBS ë³¼ë¥¨ìœ¼ë¡œ ë³µì›**

##### â““ Tape Gateway

- **í”„ë¡œí† ì½œ**: iSCSI VTL (Virtual Tape Library)
- **ëŒ€ìƒ**: Amazon S3 / S3 Glacier
- **ìš©ë„**: í…Œì´í”„ ë°±ì—… ì†”ë£¨ì…˜ì„ í´ë¼ìš°ë“œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
- **íŠ¹ì§•**: ê¸°ì¡´ í…Œì´í”„ ë°±ì—… ì†Œí”„íŠ¸ì›¨ì–´ì™€ í˜¸í™˜

ğŸ“Œ **ë…¸íŠ¸**: Volume Gatewayì˜ ìŠ¤ëƒ…ìƒ·ì€ EBS ë³¼ë¥¨ í˜•ì‹ì´ë¯€ë¡œ, EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•˜ì—¬ ë°ì´í„°ë¥¼ ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#### 4ï¸âƒ£ AWS Transfer Family

**ê°œë…:**
- **FTP/FTPS/SFTP** í”„ë¡œí† ì½œì„ ì§€ì›í•˜ëŠ” ì™„ì „ ê´€ë¦¬í˜• íŒŒì¼ ì „ì†¡ ì„œë¹„ìŠ¤
- ê¸°ì¡´ FTP í´ë¼ì´ì–¸íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ì„œ AWS ìŠ¤í† ë¦¬ì§€ì— ì ‘ê·¼

**ì§€ì› í”„ë¡œí† ì½œ:**
- **FTP**: File Transfer Protocol (ì•”í˜¸í™” ì—†ìŒ)
- **FTPS**: FTP over SSL/TLS (ì•”í˜¸í™”)
- **SFTP**: SSH File Transfer Protocol (SSH ê¸°ë°˜ ì•”í˜¸í™”)

**ëŒ€ìƒ ìŠ¤í† ë¦¬ì§€:**
- Amazon S3
- Amazon EFS

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì˜¨í”„ë ˆë¯¸ìŠ¤     â”‚
â”‚ FTP í´ë¼ì´ì–¸íŠ¸ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ SFTP
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transfer       â”‚
â”‚ Family         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”
â”‚ S3  â”‚   â”‚ EFS â”‚
â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜
```

---

#### 5ï¸âƒ£ AWS DataSync

**ê°œë…:**
- ì˜¨í”„ë ˆë¯¸ìŠ¤ì™€ AWS ê°„ **ë°ì´í„° ë™ê¸°í™”** ì„œë¹„ìŠ¤
- ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ë¹ ë¥´ê³  ì•ˆì „í•˜ê²Œ ì „ì†¡

**ì£¼ìš” íŠ¹ì§•:**
- **ìë™ ì•”í˜¸í™”**: ì „ì†¡ ì¤‘ ë°ì´í„° ì•”í˜¸í™” (TLS)
- **ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦**: ì „ì†¡ í›„ ìë™ ê²€ì¦
- **ëŒ€ì—­í­ ì œì–´**: ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ì¡°ì ˆ ê°€ëŠ¥
- **ì¼ì • ì˜ˆì•½**: ì •ê¸°ì ì¸ ë™ê¸°í™” ì‘ì—… ì˜ˆì•½

**ë™ê¸°í™” ë°©í–¥:**
- **ì˜¨í”„ë ˆë¯¸ìŠ¤ â†’ AWS**
- **AWS â†’ ì˜¨í”„ë ˆë¯¸ìŠ¤**
- **AWS â†’ AWS** (ë¦¬ì „ ê°„, ê³„ì • ê°„)
- **íƒ€ì‚¬ í´ë¼ìš°ë“œ â†’ AWS**

**DataSync Agent êµ¬ì„±:**
```mermaid
graph TB
    A[ì˜¨í”„ë ˆë¯¸ìŠ¤ NAS/íŒŒì¼ì„œë²„] -->|ë°ì´í„° ì½ê¸°| B[DataSync Agent]
    B -->|TLS ì•”í˜¸í™”| C[AWS DataSync ì„œë¹„ìŠ¤]
    C -->|ë°ì´í„° ì“°ê¸°| D[S3/EFS/FSx]

    style A fill:#ff9999
    style B fill:#ffcc99
    style C fill:#99ccff
    style D fill:#99ff99
```

**ë°ì´í„° ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤:**
1. **DataSync Agent** ì„¤ì¹˜ (ì˜¨í”„ë ˆë¯¸ìŠ¤ ë˜ëŠ” EC2)
2. **ì†ŒìŠ¤ ìœ„ì¹˜** ì„¤ì • (NFS, SMB, HDFS, S3 ë“±)
3. **ëŒ€ìƒ ìœ„ì¹˜** ì„¤ì • (S3, EFS, FSx)
4. **ì „ì†¡ ì˜µì…˜** ì„¤ì • (ëŒ€ì—­í­, í•„í„°, ê²€ì¦)
5. **ì‘ì—… ì‹¤í–‰** (ìˆ˜ë™ ë˜ëŠ” ì¼ì •)

ğŸ’¡ **ì¤‘ìš”!** DataSyncëŠ” ì „ì†¡ ì¤‘ TLS ì•”í˜¸í™”ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ, ë„¤íŠ¸ì›Œí¬ ì†ë„ì™€ ì•ˆì •ì„±ì´ ë³´ì¥ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

---

#### 6ï¸âƒ£ AWS Snow Family

**ê°œë…:**
- **ì˜¤í”„ë¼ì¸** ë°ì´í„° ì „ì†¡ ì„œë¹„ìŠ¤
- ë¬¼ë¦¬ì  ì¥ë¹„ë¥¼ ì´ìš©í•œ ëŒ€ìš©ëŸ‰ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜

**ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?**
- ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ì´ ì œí•œì ì¸ ê²½ìš°
- ë°ì´í„° ì–‘ì´ ë§¤ìš° ë§ì€ ê²½ìš° (ìˆ˜ì‹­ TB ~ PB)
- ì „ì†¡ ì‹œê°„ì´ ë¶€ì¡±í•œ ê²½ìš°
- ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì´ ë†’ì€ ê²½ìš°

**Snow Family ë””ë°”ì´ìŠ¤:**

| ë””ë°”ì´ìŠ¤ | ìš©ëŸ‰ | ì‚¬ìš© ì‚¬ë¡€ | êµ­ë‚´ ì§€ì› |
|:---:|:---:|:---:|:---:|
| **Snowcone** | 8 TB | ì—£ì§€ ì»´í“¨íŒ…, ì†Œê·œëª¨ ë°ì´í„° | âŒ |
| **Snowball Edge** | 80 TB (Storage) / 42 TB (Compute) | ëŒ€ê·œëª¨ ë°ì´í„° ì „ì†¡, ì—£ì§€ ì»´í“¨íŒ… | âœ… |
| **Snowmobile** | 100 PB | ë°ì´í„°ì„¼í„° ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜ | âŒ |

**Snowball ì‚¬ìš© í”„ë¡œì„¸ìŠ¤:**

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant A as AWS
    participant S as Snowball ë””ë°”ì´ìŠ¤
    participant S3 as Amazon S3

    U->>A: 1. Snowball ì£¼ë¬¸
    A->>U: 2. Snowball ë°°ì†¡
    U->>S: 3. ë°ì´í„° ë³µì‚¬
    U->>A: 4. Snowball ë°˜ì†¡
    A->>S3: 5. ë°ì´í„° ì—…ë¡œë“œ
    A->>S: 6. ë°ì´í„° ì™„ì „ ì‚­ì œ
    A->>U: 7. ì™„ë£Œ í†µì§€
```

**Snowball ì‚¬ìš© ë‹¨ê³„:**
1. **ì£¼ë¬¸**: AWS ì½˜ì†”ì—ì„œ Snowball ì£¼ë¬¸
2. **ë°°ì†¡**: ë¬¼ë¦¬ì  ì¥ë¹„ê°€ ì˜¨í”„ë ˆë¯¸ìŠ¤ë¡œ ë°°ì†¡ë¨
3. **ë°ì´í„° ë³µì‚¬**: ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ Snowballì— ë°ì´í„° ë³µì‚¬
4. **ë°˜ì†¡**: AWSë¡œ Snowball ë°˜ì†¡
5. **ì—…ë¡œë“œ**: AWSê°€ S3ë¡œ ë°ì´í„° ì—…ë¡œë“œ
6. **ì‚­ì œ**: Snowballì˜ ë°ì´í„°ë¥¼ **ë³µì› ë¶ˆê°€ëŠ¥í•˜ê²Œ ì™„ì „ ì‚­ì œ**
7. **ì™„ë£Œ**: ì‘ì—… ì™„ë£Œ í†µì§€

âš ï¸ **ì£¼ì˜**: Snowballì˜ ë°ì´í„°ëŠ” S3 ì—…ë¡œë“œ í›„ **NIST í‘œì¤€ì— ë”°ë¼ ì™„ì „íˆ ì‚­ì œ**ë˜ì–´ ë³µì›í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ğŸ“Œ **ë…¸íŠ¸**: êµ­ë‚´ì—ì„œëŠ” **Snowball Edge Storage Optimized** íƒ€ì…ë§Œ ì§€ì›ë©ë‹ˆë‹¤.

---

### ğŸŒ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ ë³µìŠµ

#### 1ï¸âƒ£ Amazon Route 53

**ê°œë…:**
- AWSì˜ **DNS (Domain Name System)** ì„œë¹„ìŠ¤
- **ì—£ì§€ ë¡œì¼€ì´ì…˜**ì—ì„œ ì‹¤í–‰ë˜ì–´ ì „ ì„¸ê³„ì ìœ¼ë¡œ ë‚®ì€ ì§€ì—° ì‹œê°„ ì œê³µ

**ì£¼ìš” ê¸°ëŠ¥:**
- **ë„ë©”ì¸ ë“±ë¡**: ë„ë©”ì¸ ì´ë¦„ êµ¬ë§¤ ë° ê´€ë¦¬
- **DNS ë¼ìš°íŒ…**: ë„ë©”ì¸ ì´ë¦„ì„ IP ì£¼ì†Œë¡œ ë³€í™˜
- **í—¬ìŠ¤ ì²´í¬**: ì—”ë“œí¬ì¸íŠ¸ ìƒíƒœ ëª¨ë‹ˆí„°ë§
- **íŠ¸ë˜í”½ ê´€ë¦¬**: ë‹¤ì–‘í•œ ë¼ìš°íŒ… ì •ì±…

**Route 53 ë¼ìš°íŒ… ì •ì±…:**

##### â“ ë‹¨ìˆœ ë¼ìš°íŒ… (Simple Routing)

- **ìš©ë„**: ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ DNS ì¿¼ë¦¬ ì‘ë‹µ
- **íŠ¹ì§•**: í•˜ë‚˜ì˜ ë„ë©”ì¸ì— í•˜ë‚˜ì˜ IP ì£¼ì†Œ ë§¤í•‘

```
example.com â†’ 192.0.2.1
```

##### â“‘ ê°€ì¤‘ì¹˜ ë¼ìš°íŒ… (Weighted Routing)

- **ìš©ë„**: íŠ¸ë˜í”½ì„ ì—¬ëŸ¬ ë¦¬ì†ŒìŠ¤ì— ë¶„ì‚°
- **íŠ¹ì§•**: ê° ë¦¬ì†ŒìŠ¤ì— ê°€ì¤‘ì¹˜(Weight) ë¶€ì—¬

**ì˜ˆì‹œ:**
```
example.com:
  - 192.0.2.1 (ê°€ì¤‘ì¹˜: 70%)
  - 192.0.2.2 (ê°€ì¤‘ì¹˜: 30%)
```

**ì‚¬ìš© ì‚¬ë¡€:**
- A/B í…ŒìŠ¤íŒ…
- ë¸”ë£¨/ê·¸ë¦° ë°°í¬
- ì ì§„ì  íŠ¸ë˜í”½ ì „í™˜

##### â“’ ì§€ì—° ì‹œê°„ ë¼ìš°íŒ… (Latency Routing)

- **ìš©ë„**: ê°€ì¥ ë‚®ì€ ì§€ì—° ì‹œê°„ì„ ì œê³µí•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¡œ ë¼ìš°íŒ…
- **íŠ¹ì§•**: Route 53ì´ ê° ë¦¬ì „ì˜ ì§€ì—° ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ìœ ì§€

**ì‘ë™ ë°©ì‹:**
```mermaid
graph TB
    U1[í•œêµ­ ì‚¬ìš©ì] -->|ì§€ì—° ì‹œê°„ í™•ì¸| R53[Route 53]
    U2[ë¯¸êµ­ ì‚¬ìš©ì] -->|ì§€ì—° ì‹œê°„ í™•ì¸| R53

    R53 -->|ìµœì†Œ ì§€ì—°| A1[Seoul Region<br/>10ms]
    R53 -->|ìµœì†Œ ì§€ì—°| A2[US East Region<br/>15ms]

    style U1 fill:#ff9999
    style U2 fill:#ff9999
    style R53 fill:#99ccff
    style A1 fill:#99ff99
    style A2 fill:#99ff99
```

##### â““ ì§€ë¦¬ì  ìœ„ì¹˜ ë¼ìš°íŒ… (Geolocation Routing)

- **ìš©ë„**: **ì‚¬ìš©ìì˜ ì§€ë¦¬ì  ìœ„ì¹˜** ê¸°ë°˜ ë¼ìš°íŒ…
- **íŠ¹ì§•**: ëŒ€ë¥™, êµ­ê°€, ì£¼/ë„ ë‹¨ìœ„ë¡œ ì •ì±… ì„¤ì •

**ì˜ˆì‹œ:**
```
í•œêµ­ ì‚¬ìš©ì â†’ Seoul Region (ap-northeast-2)
ë¯¸êµ­ ì‚¬ìš©ì â†’ US East Region (us-east-1)
ìœ ëŸ½ ì‚¬ìš©ì â†’ EU West Region (eu-west-1)
ê¸°íƒ€ ì§€ì—­ â†’ Default (us-west-2)
```

##### â“” ì§€ë¦¬ ê·¼ì ‘ ë¼ìš°íŒ… (Geoproximity Routing)

- **ìš©ë„**: **ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜** ê¸°ë°˜ ë¼ìš°íŒ…
- **íŠ¹ì§•**: **Bias** ê°’ìœ¼ë¡œ íŠ¸ë˜í”½ ë²”ìœ„ ì¡°ì •

**Bias ê°’:**
- **ì–‘ìˆ˜(+)**: í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¡œ ë” ë§ì€ íŠ¸ë˜í”½ ìœ ë„ (ë²”ìœ„ í™•ì¥)
- **ìŒìˆ˜(-)**: í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¡œ ë” ì ì€ íŠ¸ë˜í”½ ìœ ë„ (ë²”ìœ„ ì¶•ì†Œ)

**ì§€ë¦¬ì  ìœ„ì¹˜ vs ì§€ë¦¬ ê·¼ì ‘ ë¹„êµ:**

| êµ¬ë¶„ | ì§€ë¦¬ì  ìœ„ì¹˜ | ì§€ë¦¬ ê·¼ì ‘ |
|:---:|:---:|:---:|
| **ê¸°ì¤€** | ì‚¬ìš©ì ìœ„ì¹˜ | ë¦¬ì†ŒìŠ¤ ìœ„ì¹˜ |
| **ë²”ìœ„ ì¡°ì •** | ë¶ˆê°€ | Bias ê°’ìœ¼ë¡œ ê°€ëŠ¥ |
| **ì„¸ë°€ë„** | êµ­ê°€/ëŒ€ë¥™ ë‹¨ìœ„ | ì¢Œí‘œ ê¸°ë°˜ |

##### â“• ë‹¤ì¤‘ê°’ ì‘ë‹µ ë¼ìš°íŒ… (Multivalue Answer Routing)

- **ìš©ë„**: ì—¬ëŸ¬ IP ì£¼ì†Œë¥¼ ëª¨ë‘ ë°˜í™˜
- **íŠ¹ì§•**: í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•  IP ì„ íƒ

**ì‘ë‹µ ì˜ˆì‹œ:**
```
example.com:
  - 192.0.2.1
  - 192.0.2.2
  - 192.0.2.3
  - 192.0.2.4
```

- í´ë¼ì´ì–¸íŠ¸ DNS ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì´ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒ
- í—¬ìŠ¤ ì²´í¬ ì‹¤íŒ¨ ì‹œ í•´ë‹¹ IP ì œì™¸

##### â“– ì¥ì•  ì¡°ì¹˜ ë¼ìš°íŒ… (Failover Routing)

- **ìš©ë„**: Active/Passive êµ¬ì„±
- **íŠ¹ì§•**: Primary ì¥ì•  ì‹œ Secondaryë¡œ ìë™ ì „í™˜

```mermaid
stateDiagram-v2
    [*] --> Primary: ì •ìƒ ìƒíƒœ
    Primary --> Secondary: í—¬ìŠ¤ ì²´í¬ ì‹¤íŒ¨
    Secondary --> Primary: Primary ë³µêµ¬

    note right of Primary
        Active ë¦¬ì†ŒìŠ¤
        ëª¨ë“  íŠ¸ë˜í”½ ì²˜ë¦¬
    end note

    note right of Secondary
        Standby ë¦¬ì†ŒìŠ¤
        ì¥ì•  ì‹œì—ë§Œ ì‚¬ìš©
    end note
```

**í—¬ìŠ¤ ì²´í¬:**
- Route 53ì´ ì—”ë“œí¬ì¸íŠ¸ ìƒíƒœë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸
- 3íšŒ ì—°ì† ì‹¤íŒ¨ ì‹œ ë¹„ì •ìƒìœ¼ë¡œ íŒë‹¨
- Secondaryë¡œ íŠ¸ë˜í”½ ìë™ ì „í™˜

---

#### 2ï¸âƒ£ Amazon CloudFront

**ê°œë…:**
- AWSì˜ **CDN (Content Delivery Network)** ì„œë¹„ìŠ¤
- **ì—£ì§€ ë¡œì¼€ì´ì…˜**ì— ì½˜í…ì¸ ë¥¼ ìºì‹±í•˜ì—¬ ë¹ ë¥¸ ì „ì†¡

**ì£¼ìš” ê¸°ëŠ¥:**
- **ì½˜í…ì¸  ìºì‹±**: ì •ì /ë™ì  ì½˜í…ì¸ ë¥¼ ì—£ì§€ ë¡œì¼€ì´ì…˜ì— ìºì‹œ
- **ì§€ì—° ì‹œê°„ ê°ì†Œ**: ì‚¬ìš©ìì™€ ê°€ê¹Œìš´ ì—£ì§€ì—ì„œ ì½˜í…ì¸  ì œê³µ
- **ì˜¤ë¦¬ì§„ ì„œë²„ ë¶€í•˜ ê°ì†Œ**: ìºì‹œ íˆíŠ¸ìœ¨ í–¥ìƒìœ¼ë¡œ ì˜¤ë¦¬ì§„ ìš”ì²­ ê°ì†Œ

**CloudFront ì•„í‚¤í…ì²˜:**

```mermaid
graph TB
    U1[í•œêµ­ ì‚¬ìš©ì] -->|ìš”ì²­| E1[Seoul Edge Location]
    U2[ì¼ë³¸ ì‚¬ìš©ì] -->|ìš”ì²­| E2[Tokyo Edge Location]
    U3[ë¯¸êµ­ ì‚¬ìš©ì] -->|ìš”ì²­| E3[US Edge Location]

    E1 -->|ìºì‹œ ë¯¸ìŠ¤| O[Origin Server<br/>S3 or EC2]
    E2 -->|ìºì‹œ ë¯¸ìŠ¤| O
    E3 -->|ìºì‹œ ë¯¸ìŠ¤| O

    style U1 fill:#ff9999
    style U2 fill:#ff9999
    style U3 fill:#ff9999
    style E1 fill:#99ccff
    style E2 fill:#99ccff
    style E3 fill:#99ccff
    style O fill:#99ff99
```

**ë³´ì•ˆ ê¸°ëŠ¥:**
- **TLS/SSL ì•”í˜¸í™”**: HTTPS í†µì‹  ì§€ì›
- **Signed URL/Signed Cookie**: ì½˜í…ì¸  ì ‘ê·¼ ì œì–´
- **AWS Shield Standard**: ìë™ DDoS ë°©ì–´ (ë¬´ë£Œ)
- **Geo-Restriction**: êµ­ê°€ ê¸°ë°˜ ì ‘ê·¼ ì œì–´

---

#### 3ï¸âƒ£ Amazon API Gateway

**ê°œë…:**
- APIë¥¼ ìƒì„±, ê²Œì‹œ, ìœ ì§€ ê´€ë¦¬í•˜ëŠ” **ì™„ì „ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤**
- **API Proxy** ì—­í•  ìˆ˜í–‰

**ì§€ì› API ìœ í˜•:**
- **REST API**: RESTful ì•„í‚¤í…ì²˜
- **HTTP API**: ì €ë ´í•˜ê³  ë¹ ë¥¸ HTTP ê¸°ë°˜ API
- **WebSocket API**: ì–‘ë°©í–¥ ì‹¤ì‹œê°„ í†µì‹ 

**API Gateway ì•„í‚¤í…ì²˜:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â”€â–¶â”‚ API Gateway  â”‚â”€â”€â”€â”€â–¶â”‚   Backend    â”‚
â”‚          â”‚     â”‚   (Proxy)    â”‚     â”‚  (Lambda,    â”‚
â”‚          â”‚â—€â”€â”€â”€â”€â”‚              â”‚â—€â”€â”€â”€â”€â”‚   EC2, etc)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ìš” ê¸°ëŠ¥:**
- **ì¸ì¦/ê¶Œí•œ**: IAM, Cognito, Lambda Authorizer
- **ë³´ì•ˆ**: WAF í†µí•©, API Key ê´€ë¦¬
- **Rate Limiting**: ìš”ì²­ ì†ë„ ì œí•œ
- **ìºì‹±**: ì‘ë‹µ ìºì‹±ìœ¼ë¡œ ë°±ì—”ë“œ ë¶€í•˜ ê°ì†Œ
- **ëª¨ë‹ˆí„°ë§**: CloudWatch í†µí•©

**Rate Limiting ì‚¬ìš© ì‚¬ë¡€:**

**1. DDoS ë°©ì–´:**
```
í‰ìƒì‹œ API í˜¸ì¶œ: ì´ˆë‹¹ 100ê±´
ì„ê³„ê°’ ì„¤ì •: ì´ˆë‹¹ 500ê±´
â†’ 500ê±´ ì´ˆê³¼ ì‹œ ìë™ ì°¨ë‹¨
```

**2. API ì‚¬ìš©ëŸ‰ ì œì–´ (ê³¼ê¸ˆ):**
```
íŒŒíŠ¸ë„ˆ A: ì›” 10,000ê±´ ë¬´ë£Œ
íŒŒíŠ¸ë„ˆ B: ì›” 100,000ê±´ ìœ ë£Œ
â†’ ì´ˆê³¼ ì‹œ ì¶”ê°€ ìš”ê¸ˆ ë˜ëŠ” ì°¨ë‹¨
```

---

#### 4ï¸âƒ£ AWS Global Accelerator

**ê°œë…:**
- **AWS ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬**ë¥¼ í™œìš©í•œ íŠ¸ë˜í”½ ê°€ì† ì„œë¹„ìŠ¤
- ì‚¬ìš©ì â†’ ì—£ì§€ ë¡œì¼€ì´ì…˜ â†’ AWS ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ â†’ ëª©ì ì§€

**ì‘ë™ ì›ë¦¬:**

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì (í•œêµ­)
    participant E as ì—£ì§€ ë¡œì¼€ì´ì…˜ (Seoul)
    participant N as AWS ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬
    participant D as ëª©ì ì§€ (US East)

    U->>E: â‘  í¼ë¸”ë¦­ ì¸í„°ë„·
    Note over U,E: ì§§ì€ êµ¬ê°„

    E->>N: â‘¡ Anycast IP ë¼ìš°íŒ…
    N->>D: â‘¢ AWS ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬
    Note over N,D: ìµœì í™”ëœ ê²½ë¡œ

    D->>N: â‘£ ì‘ë‹µ
    N->>E: â‘¤ AWS ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬
    E->>U: â‘¥ í¼ë¸”ë¦­ ì¸í„°ë„·
```

**ì£¼ìš” íŠ¹ì§•:**
- **Anycast IP**: ì „ ì„¸ê³„ ì—£ì§€ ë¡œì¼€ì´ì…˜ì—ì„œ ë™ì¼í•œ IP ì‚¬ìš©
- **ê³ ì • IP**: 2ê°œì˜ ì •ì  IP ì£¼ì†Œ ì œê³µ
- **í—¬ìŠ¤ ì²´í¬**: ì—”ë“œí¬ì¸íŠ¸ ìë™ ì¥ì•  ì¡°ì¹˜
- **íŠ¸ë˜í”½ ë‹¤ì´ì–¼**: ì—”ë“œí¬ì¸íŠ¸ë³„ íŠ¸ë˜í”½ ë¹„ìœ¨ ì¡°ì •

**Global Accelerator vs CloudFront:**

| êµ¬ë¶„ | Global Accelerator | CloudFront |
|:---:|:---:|:---:|
| **ìš©ë„** | TCP/UDP íŠ¸ë˜í”½ ê°€ì† | HTTP/HTTPS ì½˜í…ì¸  ì „ì†¡ |
| **ìºì‹±** | âŒ | âœ… |
| **ê³ ì • IP** | âœ… (Anycast) | âŒ |
| **í”„ë¡œí† ì½œ** | TCP, UDP | HTTP, HTTPS |
| **ì‚¬ìš© ì‚¬ë¡€** | ê²Œì„, IoT, VoIP | ì›¹ì‚¬ì´íŠ¸, API |

---

### ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ê¸°ì´ˆ ê°œë… ë³µìŠµ

#### 1ï¸âƒ£ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ (RDS)

**íŠ¹ì§•:**
- **í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ**: ì •ì˜ëœ êµ¬ì¡°
- **ACID ì†ì„±**: íŠ¸ëœì­ì…˜ ë³´ì¥
- **SQL ì–¸ì–´**: í‘œì¤€í™”ëœ ì¿¼ë¦¬ ì–¸ì–´
- **ì •ê·œí™”**: ë°ì´í„° ì¤‘ë³µ ìµœì†Œí™”

**AWS RDS ì§€ì› ì—”ì§„:**
- **ìƒìš©**: Oracle, Microsoft SQL Server, IBM Db2
- **ì˜¤í”ˆì†ŒìŠ¤**: MySQL, MariaDB, PostgreSQL
- **AWS ìì²´**: Amazon Aurora

---

#### 2ï¸âƒ£ Amazon Aurora

**íŠ¹ì§•:**
- **AWS ë„¤ì´í‹°ë¸Œ**: AWS í™˜ê²½ ìµœì í™”
- **MySQL/PostgreSQL í˜¸í™˜**: ë§ˆì´ê·¸ë ˆì´ì…˜ ìš©ì´
- **ê³ ê°€ìš©ì„±**: 3ê°œ AZì— 6ê°œ ë°ì´í„° ì‚¬ë³¸
- **ë¹ ë¥¸ ë³µì œ**: í´ëŸ¬ìŠ¤í„° ë³¼ë¥¨ ê³µìœ 

**Aurora í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Aurora Cluster Volume           â”‚
â”‚   (3 AZ Ã— 2 Copies = 6 Copies)    â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
    â”‚        â”‚        â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”
â”‚Primaryâ”‚ â”‚Readerâ”‚ â”‚Readerâ”‚  â”‚Readerâ”‚
â”‚ (R/W) â”‚ â”‚ (R)  â”‚ â”‚ (R)  â”‚  â”‚ (R)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
```

**RDS vs Aurora ë¹„êµ:**

| í•­ëª© | RDS | Aurora |
|:---:|:---:|:---:|
| **ì½ê¸° ë³µì œë³¸** | ìµœëŒ€ 5ê°œ | ìµœëŒ€ 15ê°œ |
| **ì¥ì•  ì¡°ì¹˜** | ìˆ˜ë™ ìŠ¹ê²© | ìë™ ìŠ¹ê²© |
| **ìŠ¤í† ë¦¬ì§€** | EBS ë³¼ë¥¨ | í´ëŸ¬ìŠ¤í„° ë³¼ë¥¨ |
| **ë³µì œ ì†ë„** | ëŠë¦¼ | ë¹ ë¦„ (ë³¼ë¥¨ ê³µìœ ) |

---

## âœ… í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

5ì¼ì°¨ ë³µìŠµ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”:

- [ ] EFSì™€ FSxì˜ ì°¨ì´ì ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] Storage Gatewayì˜ 3ê°€ì§€ ìœ í˜•ì„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤
- [ ] DataSyncì™€ Snow Familyì˜ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ì´í•´í•œë‹¤
- [ ] Route 53ì˜ 7ê°€ì§€ ë¼ìš°íŒ… ì •ì±…ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] CloudFrontì˜ ìºì‹± ì›ë¦¬ë¥¼ ì´í•´í•œë‹¤
- [ ] API Gatewayì˜ Rate Limiting ê¸°ëŠ¥ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] Global Acceleratorì˜ Anycast IP ê°œë…ì„ ì´í•´í•œë‹¤
- [ ] RDSì™€ Auroraì˜ ì°¨ì´ì ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤

---

## ğŸ“‹ í•µì‹¬ ìš”ì•½

### ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤
- **EFS**: Linuxìš© NFS ê³µìœ  ìŠ¤í† ë¦¬ì§€
- **FSx**: Windowsìš© SMB ê³µìœ  ìŠ¤í† ë¦¬ì§€
- **Storage Gateway**: í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤í† ë¦¬ì§€ (S3 File, FSx File, Volume, Tape)
- **Transfer Family**: FTP/FTPS/SFTP ì„œë¹„ìŠ¤
- **DataSync**: ì˜¨í”„ë ˆë¯¸ìŠ¤-AWS ë°ì´í„° ë™ê¸°í™”
- **Snow Family**: ì˜¤í”„ë¼ì¸ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì „ì†¡

### ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤
- **Route 53**: DNS ì„œë¹„ìŠ¤ (7ê°€ì§€ ë¼ìš°íŒ… ì •ì±…)
- **CloudFront**: CDN ìºì‹± ì„œë¹„ìŠ¤
- **API Gateway**: API ê´€ë¦¬ ë° Rate Limiting
- **Global Accelerator**: AWS ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ íŠ¸ë˜í”½ ê°€ì†

### ë°ì´í„°ë² ì´ìŠ¤ ê¸°ì´ˆ
- **RDS**: ê´€ê³„í˜• DB (ìµœëŒ€ 5ê°œ ì½ê¸° ë³µì œë³¸)
- **Aurora**: AWS ë„¤ì´í‹°ë¸Œ DB (ìµœëŒ€ 15ê°œ ì½ê¸° ë³µì œë³¸, ìë™ ì¥ì•  ì¡°ì¹˜)

---

**ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ”** AWS ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë¥¼ ë” ê¹Šì´ ìˆê²Œ í•™ìŠµí•˜ê³ , DynamoDB ì‹¤ìŠµì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤! ğŸš€
# ğŸ“Š AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ - Day 6 (Section 2)

## ğŸ“š ì„¹ì…˜ 2: AWS ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ìƒì„¸

---

### ğŸ¯ í•™ìŠµ ëª©í‘œ
ì´ ì„¹ì…˜ì—ì„œëŠ” AWSê°€ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë“¤ì„ ì‹¬ì¸µì ìœ¼ë¡œ í•™ìŠµí•©ë‹ˆë‹¤.

**í•µì‹¬ í•™ìŠµ ë‚´ìš©:**
- DynamoDB NoSQL ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒì„¸ ê°œë… ë° ì‹¤ìŠµ
- Redshift ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ì„œë¹„ìŠ¤
- Database Migration Service (DMS)ë¥¼ í™œìš©í•œ DB ë§ˆì´ê·¸ë ˆì´ì…˜
- ê¸°íƒ€ íŠ¹ìˆ˜ ëª©ì  ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë“¤

---

## 1ï¸âƒ£ Amazon DynamoDB ìƒì„¸

### ğŸ“‹ DynamoDB ê°œë… ë³µìŠµ

**ê¸°ë³¸ ê°œë…:**
- **NoSQL ë°ì´í„°ë² ì´ìŠ¤**: Key-Value í˜•ì‹ì˜ ë°ì´í„° ì €ì¥
- **ì™„ì „ ê´€ë¦¬í˜• (Fully Managed)**: ì„œë²„ë¦¬ìŠ¤ DB ì„œë¹„ìŠ¤
- **ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶ˆí•„ìš”**: í…Œì´ë¸”ê³¼ ê¸°ë³¸í‚¤ë§Œ ìƒì„±í•˜ë©´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥

**ë°ì´í„° êµ¬ì¡°:**
```
ì†ì„± (Attribute) = Key-Value ìŒ
  â†“
ì•„ì´í…œ (Item) = ì†ì„±ë“¤ì˜ ëª¨ìŒ (RDBì˜ Rowì— í•´ë‹¹)
  â†“
í…Œì´ë¸” (Table)
```

**ì˜ˆì‹œ:**
```json
{
  "id": "4",           // ì†ì„± 1
  "name": "í™ê¸¸ë™",     // ì†ì„± 2
  "address": "ì„œìš¸",   // ì†ì„± 3
  "age": "30"          // ì†ì„± 4
}
```
- ì´ëŸ¬í•œ ì†ì„±ë“¤ì´ ëª¨ì—¬ì„œ í•˜ë‚˜ì˜ **ì•„ì´í…œ(Item)**ì´ ë¨
- ê´€ê³„í˜• DBì˜ **Row** ê°œë…ê³¼ ìœ ì‚¬

---

### ğŸ”‘ DynamoDB í‚¤(Key) ê°œë…

#### 1ï¸âƒ£ ê¸°ë³¸í‚¤(Primary Key) êµ¬ì¡°

**íŒŒí‹°ì…˜ í‚¤(Partition Key):**
- **í•„ìˆ˜ ìš”ì†Œ** - ë°˜ë“œì‹œ ìˆì–´ì•¼ í•¨
- **ì €ì¥ ìœ„ì¹˜ ê²°ì •**: ë°ì´í„°ê°€ ì–´ëŠ íŒŒí‹°ì…˜ì— ì €ì¥ë ì§€ ê²°ì •
- **ê¸°ë³¸ ì¸ë±ìŠ¤**: ê²€ìƒ‰ ì‹œ ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ ì¸ë±ìŠ¤

**ì •ë ¬ í‚¤(Sort Key):**
- **ì„ íƒ ìš”ì†Œ** - í•„ìš” ì‹œ ì¶”ê°€
- **ìˆœì„œ ê²°ì •**: ê°™ì€ íŒŒí‹°ì…˜ í‚¤ë¥¼ ê°€ì§„ ì•„ì´í…œë“¤ì˜ ì €ì¥ ìˆœì„œ ê²°ì •
- **ë³µí•© ì‹ë³„**: íŒŒí‹°ì…˜ í‚¤ë§Œìœ¼ë¡œ ì•„ì´í…œ ì‹ë³„ì´ ì–´ë ¤ìš¸ ë•Œ ì¶”ê°€

```mermaid
graph TB
    subgraph "ê¸°ë³¸í‚¤ êµ¬ì„± ë°©ì‹"
        A[ê¸°ë³¸í‚¤ Primary Key]
        B[ë°©ì‹1: íŒŒí‹°ì…˜ í‚¤ë§Œ]
        C[ë°©ì‹2: íŒŒí‹°ì…˜ í‚¤ + ì •ë ¬ í‚¤]

        A --> B
        A --> C
    end

    subgraph "ë°ì´í„° ì €ì¥ ì˜ˆì‹œ"
        D[íŒŒí‹°ì…˜1<br/>PK=User001]
        E[íŒŒí‹°ì…˜2<br/>PK=User002]
        F[íŒŒí‹°ì…˜3<br/>PK=User003]

        D --> G[SK=2024-01-01]
        D --> H[SK=2024-01-02]
        D --> I[SK=2024-01-03]
    end
```

**ì•„ì´í…œ ì‹ë³„ ë°©ë²•:**
```
Case 1: íŒŒí‹°ì…˜ í‚¤ë§Œ ì‚¬ìš©
- PK: UserID = "user001"
- ì´ê²ƒë§Œìœ¼ë¡œ ì•„ì´í…œ ì‹ë³„ ê°€ëŠ¥

Case 2: íŒŒí‹°ì…˜ í‚¤ + ì •ë ¬ í‚¤ ì‚¬ìš©
- PK: UserID = "user001"
- SK: OrderDate = "2024-01-15"
- ê°™ì€ ì‚¬ìš©ìì˜ ì—¬ëŸ¬ ì£¼ë¬¸ì„ ë‚ ì§œë³„ë¡œ êµ¬ë¶„
```

---

### âš¡ ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„± (Schema Flexibility)

**DynamoDBì˜ í•µì‹¬ ì¥ì :**

**1. ë™ì  ì†ì„± ì¶”ê°€/ì‚­ì œ:**
```
ì•„ì´í…œ 1:
{
  "id": "1",
  "name": "ë…¸íŠ¸ë¶",
  "price": "1000000",
  "cpu": "i7",        // ì „ìì œí’ˆ ì „ìš© ì†ì„±
  "ram": "16GB"       // ì „ìì œí’ˆ ì „ìš© ì†ì„±
}

ì•„ì´í…œ 2:
{
  "id": "2",
  "name": "ì‚¬ê³¼",
  "price": "5000",
  "expiry_date": "2024-12-20",  // ì‹í’ˆ ì „ìš© ì†ì„±
  "origin": "êµ­ì‚°"               // ì‹í’ˆ ì „ìš© ì†ì„±
}
```
- ê° ì•„ì´í…œë§ˆë‹¤ **ì„œë¡œ ë‹¤ë¥¸ ì†ì„±**ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì¤‘ **í•„ìš”í•  ë•Œ ì†ì„± ì¶”ê°€/ì‚­ì œ** ê°€ëŠ¥

**2. ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€ - ì‡¼í•‘ëª° ì œí’ˆ ì¸ë²¤í† ë¦¬:**

```mermaid
graph LR
    A[ì‡¼í•‘ëª° ì œí’ˆ ê´€ë¦¬] --> B[ì „ìì œí’ˆ]
    A --> C[ì‹ë£Œí’ˆ]
    A --> D[ì˜ë¥˜]
    A --> E[ë„ì„œ]

    B --> B1[CPU, RAM, ì €ì¥ê³µê°„<br/>í™”ë©´í¬ê¸°, ë°°í„°ë¦¬]
    C --> C1[ìœ í†µê¸°í•œ, ì›ì‚°ì§€<br/>ë³´ê´€ë°©ë²•, ì˜ì–‘ì„±ë¶„]
    D --> D1[ì‚¬ì´ì¦ˆ, ìƒ‰ìƒ<br/>ì†Œì¬, ì„¸íƒë°©ë²•]
    E --> E1[ì €ì, ì¶œíŒì‚¬<br/>ISBN, í˜ì´ì§€ìˆ˜]
```

**ê´€ê³„í˜• DB vs DynamoDB ë¹„êµ:**

| íŠ¹ì„± | ê´€ê³„í˜• DB (RDS) | DynamoDB |
|------|----------------|----------|
| **ìŠ¤í‚¤ë§ˆ ì •ì˜** | ì‚¬ì „ì— ëª¨ë“  ì»¬ëŸ¼ ì •ì˜ í•„ìˆ˜ | ê¸°ë³¸í‚¤ ì™¸ ììœ ë¡œìš´ ì†ì„± ì¶”ê°€ |
| **ì†ì„± ë³€ê²½** | ALTER TABLE í•„ìš”, ë¹„ìš© í¼ | ì–¸ì œë“  ì¶”ê°€/ì‚­ì œ ê°€ëŠ¥ |
| **ì œí’ˆë³„ ë‹¤ë¥¸ ì†ì„±** | NULL ê°’ ë§ì•„ì§, ë¹„íš¨ìœ¨ì  | í•„ìš”í•œ ì†ì„±ë§Œ ì €ì¥, íš¨ìœ¨ì  |
| **ìœ ì—°ì„±** | ë‚®ìŒ | ë†’ìŒ |
| **ì í•©í•œ ì‚¬ìš© ì‚¬ë¡€** | ì •í˜•í™”ëœ ë°ì´í„° | ë¹„ì •í˜•/ë‹¤ì–‘í•œ ì†ì„±ì˜ ë°ì´í„° |

**ì˜ˆì‹œ: ì‡¼í•‘ëª°ì—ì„œì˜ ì¥ì :**
```javascript
// ê°™ì€ "ì œí’ˆ" í…Œì´ë¸”ì— ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ ì œí’ˆ ì €ì¥ ê°€ëŠ¥

// ë…¸íŠ¸ë¶ ì œí’ˆ
{
  "productId": "ELEC-001",
  "category": "ì „ìì œí’ˆ",
  "name": "ì‚¼ì„± ë…¸íŠ¸ë¶",
  "price": 1500000,
  "cpu": "Intel i7",
  "ram": "16GB",
  "storage": "512GB SSD"
}

// ì‚¬ê³¼ ì œí’ˆ
{
  "productId": "FOOD-001",
  "category": "ì‹ë£Œí’ˆ",
  "name": "í™ì˜¥ ì‚¬ê³¼",
  "price": 5000,
  "expiryDate": "2024-12-31",
  "origin": "ì¶©ì£¼",
  "weight": "1kg"
}

// í‹°ì…”ì¸  ì œí’ˆ
{
  "productId": "CLOT-001",
  "category": "ì˜ë¥˜",
  "name": "ë©´ í‹°ì…”ì¸ ",
  "price": 29000,
  "size": ["S", "M", "L", "XL"],
  "color": ["white", "black", "navy"],
  "material": "100% ë©´"
}
```
â†’ **ê° ì œí’ˆ ì¹´í…Œê³ ë¦¬ë§ˆë‹¤ í•„ìš”í•œ ì†ì„±ë§Œ ì €ì¥!**

---

### ğŸ“Š DynamoDB ì„±ëŠ¥ ê°œë… - RCU & WCU

#### ğŸ’¡ ì„±ëŠ¥ ê¸°ì¤€ì˜ í•„ìš”ì„±

**RDS vs DynamoDB ì°¨ì´:**

**RDS (ì¸ìŠ¤í„´ìŠ¤ ê¸°ë°˜):**
```
DB ìƒì„± ì‹œ:
"ì–´ë–¤ ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
- db.t3.medium (2 vCPU, 4GB RAM)
- db.m5.large (2 vCPU, 8GB RAM)
- db.r5.2xlarge (8 vCPU, 64GB RAM)
â†’ ì¸ìŠ¤í„´ìŠ¤ ìŠ¤í™ìœ¼ë¡œ ì„±ëŠ¥ ê²°ì •
```

**DynamoDB (ì„œë²„ë¦¬ìŠ¤):**
```
DB ìƒì„± ì‹œ:
- ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ ì„ íƒ ì—†ìŒ
- ì„œë²„ ìŠ¤í™ ì •ì˜ ë¶ˆí•„ìš”
â†’ ëŒ€ì‹  RCU/WCUë¡œ ì„±ëŠ¥ ì •ì˜!
```

**ì™œ RCU/WCUê°€ í•„ìš”í•œê°€?**
```mermaid
graph TD
    A[DynamoDBëŠ” ì„œë²„ë¦¬ìŠ¤] --> B[ì¸ìŠ¤í„´ìŠ¤ ìŠ¤í™ ê°œë… ì—†ìŒ]
    B --> C[ì„±ëŠ¥ì„ ì–´ë–»ê²Œ ì •ì˜í• ê¹Œ?]
    C --> D[RCU/WCU ê°œë… ë„ì…!]
    D --> E[ì½ê¸°/ì“°ê¸° ì²˜ë¦¬ëŸ‰ìœ¼ë¡œ ì„±ëŠ¥ ì¸¡ì •]
```

---

#### ğŸ“– RCU (Read Capacity Unit) ìƒì„¸

**ì •ì˜:**
```
1 RCU = ì´ˆë‹¹ ìµœëŒ€ 4KB í¬ê¸°ì˜ í•­ëª© 1ê°œë¥¼ ì½ì„ ìˆ˜ ìˆëŠ” ì²˜ë¦¬ ëŠ¥ë ¥

ì˜ˆì‹œ:
- 5 RCUë¥¼ ì„¤ì •í–ˆë‹¤ë©´?
  â†’ ì´ˆë‹¹ 4KB í•­ëª© 5ê°œë¥¼ ì½ì„ ìˆ˜ ìˆìŒ
  â†’ ë˜ëŠ” ì´ˆë‹¹ 20KB ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆìŒ
```

**RCU ê³„ì‚° ì˜ˆì‹œ:**

**ì˜ˆì‹œ 1: ë‹¨ì¼ í•­ëª© ì½ê¸°**
```
ìƒí™©: 3KB í¬ê¸°ì˜ ì•„ì´í…œì„ ì´ˆë‹¹ 10ë²ˆ ì½ì–´ì•¼ í•¨

ê³„ì‚°:
- 1ê°œ ì•„ì´í…œ = 3KB â†’ 1 RCU í•„ìš” (4KB ì´í•˜)
- ì´ˆë‹¹ 10ê°œ â†’ 10 RCU í•„ìš”

í•„ìš”í•œ RCU = 10 RCU
```

**ì˜ˆì‹œ 2: í° í•­ëª© ì½ê¸°**
```
ìƒí™©: 10KB í¬ê¸°ì˜ ì•„ì´í…œì„ ì´ˆë‹¹ 5ë²ˆ ì½ì–´ì•¼ í•¨

ê³„ì‚°:
- 1ê°œ ì•„ì´í…œ = 10KB
  â†’ 10KB Ã· 4KB = 2.5 â†’ ì˜¬ë¦¼ â†’ 3 RCU í•„ìš”
- ì´ˆë‹¹ 5ê°œ â†’ 3 RCU Ã— 5 = 15 RCU í•„ìš”

í•„ìš”í•œ RCU = 15 RCU
```

**ì˜ˆì‹œ 3: ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜**
```
ì „ììƒê±°ë˜ ì‚¬ì´íŠ¸ì˜ ìƒí’ˆ ì¡°íšŒ:
- ìƒí’ˆ ì •ë³´ í¬ê¸°: 2KB
- ì˜ˆìƒ ì´ˆë‹¹ ì¡°íšŒ ìˆ˜: 100ê±´
- í•„ìš” RCU = 1 RCU Ã— 100 = 100 RCU

í”¼í¬ ì‹œê°„ëŒ€ ëŒ€ë¹„:
- í”¼í¬ ì‹œ ì´ˆë‹¹ ì¡°íšŒ ìˆ˜: 500ê±´
- í•„ìš” RCU = 1 RCU Ã— 500 = 500 RCU
```

---

#### âœï¸ WCU (Write Capacity Unit) ìƒì„¸

**ì •ì˜:**
```
1 WCU = ì´ˆë‹¹ ìµœëŒ€ 1KB í¬ê¸°ì˜ í•­ëª© 1ê°œë¥¼ ì“¸ ìˆ˜ ìˆëŠ” ì²˜ë¦¬ ëŠ¥ë ¥

ì˜ˆì‹œ:
- 10 WCUë¥¼ ì„¤ì •í–ˆë‹¤ë©´?
  â†’ ì´ˆë‹¹ 1KB í•­ëª© 10ê°œë¥¼ ì“¸ ìˆ˜ ìˆìŒ
  â†’ ë˜ëŠ” ì´ˆë‹¹ 10KB ë°ì´í„°ë¥¼ ì“¸ ìˆ˜ ìˆìŒ
```

**WCU ê³„ì‚° ì˜ˆì‹œ:**

**ì˜ˆì‹œ 1: ì‘ì€ í•­ëª© ì“°ê¸°**
```
ìƒí™©: 0.5KB í¬ê¸°ì˜ ì•„ì´í…œì„ ì´ˆë‹¹ 20ë²ˆ ì¨ì•¼ í•¨

ê³„ì‚°:
- 1ê°œ ì•„ì´í…œ = 0.5KB â†’ 1 WCU í•„ìš” (1KB ì´í•˜)
- ì´ˆë‹¹ 20ê°œ â†’ 20 WCU í•„ìš”

í•„ìš”í•œ WCU = 20 WCU
```

**ì˜ˆì‹œ 2: í° í•­ëª© ì“°ê¸°**
```
ìƒí™©: 3.5KB í¬ê¸°ì˜ ì•„ì´í…œì„ ì´ˆë‹¹ 10ë²ˆ ì¨ì•¼ í•¨

ê³„ì‚°:
- 1ê°œ ì•„ì´í…œ = 3.5KB
  â†’ 3.5KB Ã· 1KB = 3.5 â†’ ì˜¬ë¦¼ â†’ 4 WCU í•„ìš”
- ì´ˆë‹¹ 10ê°œ â†’ 4 WCU Ã— 10 = 40 WCU í•„ìš”

í•„ìš”í•œ WCU = 40 WCU
```

**ì˜ˆì‹œ 3: ì‹¤ì‹œê°„ ë¡œê·¸ ì €ì¥**
```
IoT ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘:
- ì„¼ì„œ ë°ì´í„° í¬ê¸°: 0.5KB
- ì„¼ì„œ ê°œìˆ˜: 1,000ê°œ
- ë°ì´í„° ì „ì†¡ ì£¼ê¸°: 10ì´ˆë‹¹ 1íšŒ
- ì´ˆë‹¹ ì“°ê¸° = 1,000 Ã· 10 = 100ê±´
- í•„ìš” WCU = 1 WCU Ã— 100 = 100 WCU
```

---

#### ğŸ”§ ìš©ëŸ‰ ê´€ë¦¬ ëª¨ë“œ (Capacity Mode)

**DynamoDBëŠ” 2ê°€ì§€ ìš©ëŸ‰ ê´€ë¦¬ ë°©ì‹ ì œê³µ:**

```mermaid
graph TD
    A[DynamoDB ìš©ëŸ‰ ê´€ë¦¬] --> B[Provisioned Mode<br/>í”„ë¡œë¹„ì €ë‹ ëª¨ë“œ]
    A --> C[On-Demand Mode<br/>ì˜¨ë””ë§¨ë“œ ëª¨ë“œ]

    B --> B1[RCU/WCU ë¯¸ë¦¬ ì˜ˆì•½]
    B --> B2[Auto Scaling ì„¤ì • ê°€ëŠ¥]
    B --> B3[ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì›Œí¬ë¡œë“œ]

    C --> C1[RCU/WCU ìë™ ì¡°ì •]
    C --> C2[ì‚¬ìš©í•œ ë§Œí¼ ë¹„ìš© ì§€ë¶ˆ]
    C --> C3[ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì›Œí¬ë¡œë“œ]
```

---

##### 1ï¸âƒ£ Provisioned Mode (í”„ë¡œë¹„ì €ë‹ ëª¨ë“œ)

**ê°œë…:**
- RCU/WCUë¥¼ **ì‚¬ì „ì— ì„¤ì •**
- ì„¤ì •í•œ ìš©ëŸ‰ë§Œí¼ **ì˜ˆì•½í•˜ì—¬ ì‚¬ìš©**

**ì¥ì :**
```
âœ… ë¹„ìš© ì˜ˆì¸¡ ê°€ëŠ¥
âœ… Reserved Capacityë¡œ ì¶”ê°€ í• ì¸
âœ… ì•ˆì •ì ì¸ ì„±ëŠ¥ ë³´ì¥
```

**ë‹¨ì :**
```
âŒ ì‚¬ìš©ëŸ‰ì´ ì„¤ì •ê°’ë³´ë‹¤ ì ìœ¼ë©´ ë¹„ìš© ë‚­ë¹„
âŒ íŠ¸ë˜í”½ ê¸‰ì¦ ì‹œ ëŒ€ì‘ ì–´ë ¤ì›€ (Throttling ë°œìƒ)
```

**Auto Scaling ì„¤ì •:**
```
ì„¤ì • ì˜ˆì‹œ:
- ìµœì†Œ RCU: 5
- ìµœëŒ€ RCU: 50
- ëª©í‘œ ì‚¬ìš©ë¥ : 70%

ë™ì‘:
1. í‰ì†Œ 5 RCU ì‚¬ìš©
2. íŠ¸ë˜í”½ ì¦ê°€ â†’ ì‚¬ìš©ë¥  70% ì´ˆê³¼
3. ìë™ìœ¼ë¡œ RCU ì¦ê°€ (ì˜ˆ: 5 â†’ 10 â†’ 20)
4. íŠ¸ë˜í”½ ê°ì†Œ â†’ ë‹¤ì‹œ 5 RCUë¡œ ì¶•ì†Œ
```

**ì„¤ì • í™”ë©´ ì˜ˆì‹œ:**
```
[ DynamoDB Table Settings ]

Capacity Mode: â¦¿ Provisioned  â—‹ On-demand

Read capacity:
  Auto scaling: [âœ“] Enabled
  Minimum capacity units: [5]
  Maximum capacity units: [50]
  Target utilization: [70] %

Write capacity:
  Auto scaling: [âœ“] Enabled
  Minimum capacity units: [2]
  Maximum capacity units: [25]
  Target utilization: [70] %
```

**ë¹„ìš© ê³„ì‚° ì˜ˆì‹œ:**
```
ì„¤ì •:
- Provisioned RCU: 100
- Provisioned WCU: 50
- ë¦¬ì „: Seoul (ap-northeast-2)

ì›”ê°„ ë¹„ìš©:
- RCU: 100 Ã— $0.00013 Ã— 730ì‹œê°„ = $9.49
- WCU: 50 Ã— $0.00065 Ã— 730ì‹œê°„ = $23.73
- ì´ ë¹„ìš©: $33.22/ì›”

ì‹¤ì œ ì‚¬ìš©ëŸ‰ì´ 50%ë¼ë„ ë™ì¼ ë¹„ìš© ë°œìƒ!
```

---

##### 2ï¸âƒ£ On-Demand Mode (ì˜¨ë””ë§¨ë“œ ëª¨ë“œ)

**ê°œë…:**
- RCU/WCUë¥¼ **ì‚¬ì „ì— ì˜ˆì•½í•˜ì§€ ì•ŠìŒ**
- **ì‚¬ìš©í•œ ë§Œí¼ë§Œ** ë¹„ìš© ì§€ë¶ˆ

**ì¥ì :**
```
âœ… ì‚¬ìš©í•œ ë§Œí¼ë§Œ ì§€ë¶ˆ (ë¹„ìš© íš¨ìœ¨)
âœ… ìš©ëŸ‰ ê³„íš ë¶ˆí•„ìš”
âœ… ê¸‰ê²©í•œ íŠ¸ë˜í”½ ë³€í™” ìë™ ëŒ€ì‘
âœ… Throttling ê±±ì • ì—†ìŒ
```

**ë‹¨ì :**
```
âŒ ìš”ì²­ë‹¹ ë¹„ìš©ì´ Provisionedë³´ë‹¤ ë†’ìŒ
âŒ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì›Œí¬ë¡œë“œì—ì„œëŠ” ë¹„íš¨ìœ¨ì 
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**
```
ì í•©í•œ ê²½ìš°:
âœ“ ì‹ ê·œ ì• í”Œë¦¬ì¼€ì´ì…˜ (íŠ¸ë˜í”½ ì˜ˆì¸¡ ì–´ë ¤ì›€)
âœ“ íŠ¸ë˜í”½ íŒ¨í„´ì´ ë¶ˆê·œì¹™í•¨
âœ“ ê°„í—ì ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ëŠ” í…Œì´ë¸”
âœ“ ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½

ë¶€ì í•©í•œ ê²½ìš°:
âœ— íŠ¸ë˜í”½ì´ ì¼ì •í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥
âœ— ëŒ€ê·œëª¨ ì„œë¹„ìŠ¤ (ë¹„ìš©ì´ ë†’ì•„ì§)
âœ— ë¹„ìš© ìµœì í™”ê°€ ì¤‘ìš”í•œ ê²½ìš°
```

**ë¹„ìš© ê³„ì‚° ì˜ˆì‹œ:**
```
ì‹¤ì œ ì‚¬ìš©ëŸ‰:
- Read requests: 10,000,000 ê±´/ì›”
- Write requests: 5,000,000 ê±´/ì›”

ì›”ê°„ ë¹„ìš©:
- Read: 10M Ã— $0.25 / ë°±ë§Œê±´ = $2.50
- Write: 5M Ã— $1.25 / ë°±ë§Œê±´ = $6.25
- ì´ ë¹„ìš©: $8.75/ì›”

â†’ ì‚¬ìš©ëŸ‰ì´ ì ìœ¼ë©´ Provisionedë³´ë‹¤ ì €ë ´!
```

---

##### ğŸ“Š ëª¨ë“œ ë¹„êµí‘œ

| ë¹„êµ í•­ëª© | Provisioned Mode | On-Demand Mode |
|----------|-----------------|----------------|
| **ìš©ëŸ‰ ì„¤ì •** | RCU/WCU ì‚¬ì „ ì„¤ì • í•„ìˆ˜ | ìë™ ì¡°ì • |
| **ë¹„ìš© êµ¬ì¡°** | ì‹œê°„ë‹¹ ê³ ì • ë¹„ìš© | ìš”ì²­ë‹¹ ë¹„ìš© |
| **Auto Scaling** | ì„¤ì • ê°€ëŠ¥ | ìë™ ì œê³µ |
| **íŠ¸ë˜í”½ ê¸‰ì¦** | Throttling ê°€ëŠ¥ì„± | ìë™ ëŒ€ì‘ |
| **ë¹„ìš© íš¨ìœ¨ì„±** | ì¼ì •í•œ íŠ¸ë˜í”½ ì‹œ ìœ ë¦¬ | ë¶ˆê·œì¹™ íŠ¸ë˜í”½ ì‹œ ìœ ë¦¬ |
| **ìš©ëŸ‰ ê³„íš** | í•„ìš” | ë¶ˆí•„ìš” |
| **ì í•©í•œ ê²½ìš°** | ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì›Œí¬ë¡œë“œ | ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì›Œí¬ë¡œë“œ |

---

#### ğŸ’° ë¹„ìš© ìµœì í™” ì „ëµ

**ì „ëµ 1: ì›Œí¬ë¡œë“œ ë¶„ì„**
```mermaid
graph LR
    A[íŠ¸ë˜í”½ íŒ¨í„´ ë¶„ì„] --> B{íŒ¨í„´ íŒŒì•…?}
    B -->|ì˜ˆì¸¡ ê°€ëŠ¥| C[Provisioned Mode<br/>+ Auto Scaling]
    B -->|ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥| D[On-Demand Mode]
    B -->|í˜¼í•©| E[í…Œì´ë¸” ë¶„ë¦¬<br/>ê°ê° ë‹¤ë¥¸ ëª¨ë“œ ì ìš©]
```

**ì „ëµ 2: í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼**
```
ë©”ì¸ í…Œì´ë¸” (ì•ˆì •ì  íŠ¸ë˜í”½):
â†’ Provisioned Mode + Auto Scaling

ì„ì‹œ/ì´ë²¤íŠ¸ í…Œì´ë¸” (ë¶ˆê·œì¹™ íŠ¸ë˜í”½):
â†’ On-Demand Mode

ì˜ˆì‹œ:
- ì‚¬ìš©ì ì •ë³´ í…Œì´ë¸”: Provisioned (ì¼ì •í•œ ì ‘ê·¼)
- ì´ë²¤íŠ¸ ì°¸ì—¬ í…Œì´ë¸”: On-Demand (ì´ë²¤íŠ¸ ê¸°ê°„ë§Œ ì‚¬ìš©)
```

**ì „ëµ 3: Reserved Capacity í™œìš©**
```
ì¥ê¸° ì‚¬ìš© ê³„íšì´ ìˆë‹¤ë©´:
- 1ë…„/3ë…„ Reserved Capacity êµ¬ë§¤
- Provisioned Mode ë¹„ìš© ìµœëŒ€ 76% ì ˆê°
- ìµœì†Œ ì‚¬ìš©ëŸ‰ì€ Reservedë¡œ, ì´ˆê³¼ë¶„ì€ On-Demand
```

---

### ğŸ”’ DynamoDB ë³´ì•ˆ ë° ê°€ìš©ì„±

#### 1ï¸âƒ£ ë°ì´í„° ì¤‘ë³µ ì €ì¥

**ìë™ ë³µì œ:**
```mermaid
graph TB
    subgraph "Region: Seoul"
        A[DynamoDB Table]
        B[AZ-A Copy 1]
        C[AZ-B Copy 2]
        D[AZ-C Copy 3]

        A --> B
        A --> C
        A --> D
    end

    E[ì“°ê¸° ìš”ì²­] --> A
    A --> F[3ê°œ AZì—<br/>ìë™ ë³µì œ]
```

**íŠ¹ì§•:**
- **3ê°œì˜ ê°€ìš© ì˜ì—­**ì— ë°ì´í„° ìë™ ì¤‘ë³µ ì €ì¥
- **ë™ê¸°ì‹ ë³µì œ**: 3ê°œ ëª¨ë‘ ì“°ê¸° ì™„ë£Œ í›„ ì‘ë‹µ
- **ìë™ ë³µêµ¬**: AZ ì¥ì•  ì‹œ ë‹¤ë¥¸ AZì—ì„œ ìë™ ì„œë¹„ìŠ¤ ì œê³µ

---

#### 2ï¸âƒ£ ë°±ì—… ë° ë³µì›

**ìë™ ë°±ì—… (Automatic Backup):**
```
ì„¤ì •:
- Point-in-Time Recovery (PITR) í™œì„±í™”
- ìµœëŒ€ 35ì¼ ë³´ê´€
- ì§€ì†ì  ë°±ì—… (Continuous Backup)

ë³µì›:
- ì´ˆ ë‹¨ìœ„ ì‹œì  ë³µì› ê°€ëŠ¥
- ì˜ˆ: "2024-12-10 14:30:25" ì‹œì ìœ¼ë¡œ ë³µì›
```

**ìˆ˜ë™ ë°±ì—… (On-Demand Backup):**
```
íŠ¹ì§•:
- ì–¸ì œë“  ìˆ˜ë™ ë°±ì—… ìƒì„±
- ë°±ì—… ë³´ê´€ ê¸°ê°„ ë¬´ì œí•œ
- ì›ë³¸ í…Œì´ë¸” ì‚­ì œí•´ë„ ë°±ì—… ìœ ì§€
- ë‹¤ë¥¸ ë¦¬ì „ìœ¼ë¡œ ë³µì‚¬ ê°€ëŠ¥

ì‚¬ìš© ì‚¬ë¡€:
- ëŒ€ê·œëª¨ ë³€ê²½ ì‘ì—… ì „ ë°±ì—…
- ê·œì • ì¤€ìˆ˜ë¥¼ ìœ„í•œ ì¥ê¸° ë³´ê´€
- ì¬í•´ ë³µêµ¬(DR) ì¤€ë¹„
```

---

#### 3ï¸âƒ£ ì•”í˜¸í™”

**ì €ì¥ ì‹œ ì•”í˜¸í™” (Encryption at Rest):**
```
ìë™ ì œê³µ:
âœ“ AWS KMS ì‚¬ìš©í•œ ì•”í˜¸í™”
âœ“ í…Œì´ë¸” ë°ì´í„°
âœ“ ë¡œì»¬ ë³´ì¡° ì¸ë±ìŠ¤
âœ“ ê¸€ë¡œë²Œ ë³´ì¡° ì¸ë±ìŠ¤
âœ“ ìŠ¤íŠ¸ë¦¼ ë°ì´í„°
âœ“ ë°±ì—…

í‚¤ ì˜µì…˜:
1. AWS ì†Œìœ  í‚¤ (ê¸°ë³¸, ë¬´ë£Œ)
2. AWS ê´€ë¦¬í˜• í‚¤
3. ê³ ê° ê´€ë¦¬í˜• í‚¤ (CMK)
```

**ì „ì†¡ ì¤‘ ì•”í˜¸í™” (Encryption in Transit):**
```
âœ“ HTTPS/TLS í†µì‹  ê°•ì œ
âœ“ SDK ìë™ ì²˜ë¦¬
âœ“ API í˜¸ì¶œ ëª¨ë‘ ì•”í˜¸í™”
```

---

### ğŸ§ª DynamoDB ì‹¤ìŠµ - í…Œì´ë¸” ìƒì„± ë° ë°ì´í„° ê´€ë¦¬

#### ì‹¤ìŠµ ëª©í‘œ
- DynamoDB í…Œì´ë¸” ìƒì„±
- ë°ì´í„° ì¶”ê°€ (Create)
- ë°ì´í„° ì¡°íšŒ (Read)
- ë°ì´í„° ê²€ìƒ‰ (Scan & Query)
- ë°ì´í„° ì‚­ì œ (Delete)

---

#### Step 1: í…Œì´ë¸” ìƒì„±

**1. DynamoDB ì½˜ì†” ì ‘ì†:**
```
1. AWS Management Console ë¡œê·¸ì¸
2. ê²€ìƒ‰ì°½ì— "dynamodb" ë˜ëŠ” "dy" ì…ë ¥
3. "DynamoDB" ì„œë¹„ìŠ¤ í´ë¦­
```

**2. í…Œì´ë¸” ìƒì„±:**
```
[ Create table ]

Table details:
  Table name: [T12345-user-info]

Partition key:
  Key name: [id]
  Type: â¦¿ String  â—‹ Number  â—‹ Binary

Sort key: (ì„ íƒì‚¬í•­)
  â–¡ Add sort key

Settings:
  â¦¿ Default settings (On-demand)
  â—‹ Customize settings

[ Create table ]
```

**í…Œì´ë¸” ìƒì„± ì™„ë£Œ:**
```
âœ“ í…Œì´ë¸” ìƒì„± ì‹œê°„: ì•½ 5~10ì´ˆ
âœ“ ìƒíƒœ: Active
âœ“ ARN: arn:aws:dynamodb:ap-northeast-2:123456789012:table/T12345-user-info
```

---

#### Step 2: ë°ì´í„° ì¶”ê°€ (Create Item)

**1. Actions ë©”ë‰´ì—ì„œ ì•„ì´í…œ ìƒì„±:**
```
í…Œì´ë¸” ì„ íƒ â†’ [Actions] â†’ [Create item]
```

**2. ì•„ì´í…œ 1 ìƒì„±:**
```json
{
  "id": {
    "S": "user001"
  },
  "name": {
    "S": "í™ê¸¸ë™"
  },
  "age": {
    "S": "30"
  },
  "address": {
    "S": "ì„œìš¸"
  }
}
```

**í™”ë©´ ì…ë ¥ ë°©ë²•:**
```
[ Create item ]

Attribute name    Type      Value
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (PK)          String    [user001]

[+ Add new attribute] â†’ String
name             String    [í™ê¸¸ë™]

[+ Add new attribute] â†’ String
age              String    [30]

[+ Add new attribute] â†’ String
address          String    [ì„œìš¸]

[Create item]
```

**3. ì—¬ëŸ¬ ì•„ì´í…œ ì¶”ê°€ (ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„± í…ŒìŠ¤íŠ¸):**

**ì•„ì´í…œ 2 - ë‹¤ë¥¸ ì†ì„± êµ¬ì¡°:**
```json
{
  "id": "user002",
  "name": "ê¹€ì² ìˆ˜",
  "email": "kim@example.com",
  "phone": "010-1234-5678"
}
```
â†’ age, address ì†ì„± ì—†ìŒ, email, phone ì†ì„± ì¶”ê°€!

**ì•„ì´í…œ 3 - ë˜ ë‹¤ë¥¸ êµ¬ì¡°:**
```json
{
  "id": "user003",
  "name": "ì´ì˜í¬",
  "age": "25",
  "city": "ë¶€ì‚°",
  "hobby": "ë…ì„œ"
}
```
â†’ ê° ì•„ì´í…œë§ˆë‹¤ **ì„œë¡œ ë‹¤ë¥¸ ì†ì„±**ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ!

---

#### Step 3: ë°ì´í„° ì¡°íšŒ (Explore Items)

**1. Explore Items ë©”ë‰´ë¡œ ì´ë™:**
```
ì¢Œì¸¡ ë©”ë‰´: [Tables] â†’ í…Œì´ë¸” ì„ íƒ â†’ [Explore items]
```

**2. Scan ì‹¤í–‰ (ì „ì²´ ë°ì´í„° ì¡°íšŒ):**
```
[ Scan or query items ]

Scan/Query: â¦¿ Scan  â—‹ Query

Table: [T12345-user-info]

Attributes to project: â¦¿ All attributes

[Run]
```

**ê²°ê³¼ ì˜ˆì‹œ:**
```
Items returned: 3
Capacity units consumed: 0.5 RCU

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id       â”‚ name     â”‚ age      â”‚ address     â”‚ email    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user001  â”‚ í™ê¸¸ë™   â”‚ 30       â”‚ ì„œìš¸        â”‚ -        â”‚
â”‚ user002  â”‚ ê¹€ì² ìˆ˜   â”‚ -        â”‚ -           â”‚ kim@...  â”‚
â”‚ user003  â”‚ ì´ì˜í¬   â”‚ 25       â”‚ -           â”‚ -        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Scanì˜ íŠ¹ì§•:**
```
ì¥ì :
âœ“ í…Œì´ë¸” ì „ì²´ ë°ì´í„° ì¡°íšŒ
âœ“ í•„í„° ì—†ì´ ëª¨ë“  ì•„ì´í…œ ë°˜í™˜

ë‹¨ì :
âœ— ë°ì´í„°ê°€ ë§ìœ¼ë©´ ëŠë¦¼
âœ— ë§ì€ RCU ì†Œë¹„
âœ— ë¹„ìš©ì´ ë†’ì•„ì§ˆ ìˆ˜ ìˆìŒ

ê¶Œì¥ ì‚¬ìš©:
- ì†Œê·œëª¨ í…Œì´ë¸”
- ê´€ë¦¬ ëª©ì ì˜ ì „ì²´ ì¡°íšŒ
- ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½
```

---

#### Step 4: Query ì‹¤í–‰ (ì¡°ê±´ ê²€ìƒ‰)

**1. Query ì„¤ì •:**
```
[ Scan or query items ]

Scan/Query: â—‹ Scan  â¦¿ Query

Table: [T12345-user-info]

Partition key:
  id = [user001]

[Run]
```

**ê²°ê³¼:**
```
Items returned: 1
Capacity units consumed: 0.5 RCU

{
  "id": "user001",
  "name": "í™ê¸¸ë™",
  "age": "30",
  "address": "ì„œìš¸"
}
```

**Queryì˜ íŠ¹ì§•:**
```
ì¥ì :
âœ“ íŒŒí‹°ì…˜ í‚¤ë¡œ ë¹ ë¥¸ ê²€ìƒ‰
âœ“ ì ì€ RCU ì†Œë¹„
âœ“ íš¨ìœ¨ì ì¸ ë¹„ìš©

ë‹¨ì :
âœ— íŒŒí‹°ì…˜ í‚¤ í•„ìˆ˜
âœ— ì „ì²´ ê²€ìƒ‰ ë¶ˆê°€

ê¶Œì¥ ì‚¬ìš©:
- íŠ¹ì • ì•„ì´í…œ ì¡°íšŒ
- í”„ë¡œë•ì…˜ í™˜ê²½
- ë¹„ìš© ìµœì í™” í•„ìš” ì‹œ
```

**Scan vs Query ë¹„êµ:**

| ë¹„êµ í•­ëª© | Scan | Query |
|----------|------|-------|
| **ê²€ìƒ‰ ë²”ìœ„** | í…Œì´ë¸” ì „ì²´ | íŠ¹ì • íŒŒí‹°ì…˜ |
| **ì†ë„** | ëŠë¦¼ (ë°ì´í„°ì–‘ì— ë¹„ë¡€) | ë¹ ë¦„ (ì¸ë±ìŠ¤ ì‚¬ìš©) |
| **RCU ì†Œë¹„** | ë§ìŒ | ì ìŒ |
| **ì‚¬ìš© ì‚¬ë¡€** | ì „ì²´ ë°ì´í„° ë¶„ì„ | íŠ¹ì • ë ˆì½”ë“œ ì¡°íšŒ |
| **í”„ë¡œë•ì…˜ ê¶Œì¥** | âœ— | âœ“ |

---

#### Step 5: ë°ì´í„° ì‚­ì œ

**1. ì•„ì´í…œ ì„ íƒ í›„ ì‚­ì œ:**
```
1. Explore itemsì—ì„œ ì•„ì´í…œ ì„ íƒ
2. [Actions] â†’ [Delete items]
3. í™•ì¸ ëŒ€í™”ìƒìì—ì„œ [Delete] í´ë¦­
```

**2. í…Œì´ë¸” ì‚­ì œ:**
```
1. Tables ë©”ë‰´ì—ì„œ í…Œì´ë¸” ì„ íƒ
2. [Actions] â†’ [Delete table]
3. í™•ì¸:
   [ ] Create a backup before deleting
   ì…ë ¥: [delete]
4. [Delete]
```

**ì‚­ì œ ì‹œ ì£¼ì˜ì‚¬í•­:**
```
âš ï¸ í”„ë¡œë•ì…˜ í™˜ê²½:
- ì‚­ì œ ì „ ë°˜ë“œì‹œ ë°±ì—…!
- Point-in-Time Recovery í™œì„±í™” ì—¬ë¶€ í™•ì¸
- ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ì˜ì¡´ì„± í™•ì¸

âœ“ í…ŒìŠ¤íŠ¸ í™˜ê²½:
- ë°”ë¡œ ì‚­ì œ ê°€ëŠ¥
- ë¹„ìš© ì ˆê°ì„ ìœ„í•´ ì‚¬ìš© í›„ ì‚­ì œ ê¶Œì¥
```

---

### ğŸ’» DynamoDB í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì‚¬ìš©

#### Python SDK (Boto3) ì˜ˆì‹œ

**1. í™˜ê²½ ì„¤ì •:**
```bash
# AWS SDK ì„¤ì¹˜
pip install boto3

# AWS ìê²© ì¦ëª… ì„¤ì •
aws configure
```

**2. ë°ì´í„° ì¶”ê°€ (Put Item):**
```python
import boto3

# DynamoDB ë¦¬ì†ŒìŠ¤ ì—°ê²°
dynamodb = boto3.resource(
    'dynamodb',
    region_name='ap-northeast-2'
)

# í…Œì´ë¸” ì„ íƒ
table = dynamodb.Table('T12345-user-info')

# ì•„ì´í…œ ë°ì´í„°
item_data = {
    'id': '200',
    'name': 'ë°•ë¯¼ìˆ˜',
    'age': '28',
    'email': 'park@example.com'
}

# ì•„ì´í…œ ì¶”ê°€
try:
    response = table.put_item(Item=item_data)
    print("ì•„ì´í…œ ì¶”ê°€ ì„±ê³µ!")
    print(f"ì‘ë‹µ: {response}")
except Exception as e:
    print(f"ì˜¤ë¥˜ ë°œìƒ: {e}")
```

**3. ë°ì´í„° ì¡°íšŒ (Get Item):**
```python
# íŠ¹ì • ì•„ì´í…œ ì¡°íšŒ
response = table.get_item(
    Key={
        'id': '200'
    }
)

# ê²°ê³¼ ì¶œë ¥
if 'Item' in response:
    item = response['Item']
    print(f"ID: {item['id']}")
    print(f"ì´ë¦„: {item['name']}")
    print(f"ë‚˜ì´: {item['age']}")
else:
    print("ì•„ì´í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

**4. ë°ì´í„° ì—…ë°ì´íŠ¸ (Update Item):**
```python
# ë‚˜ì´ ì •ë³´ ì—…ë°ì´íŠ¸
response = table.update_item(
    Key={
        'id': '200'
    },
    UpdateExpression='SET age = :val',
    ExpressionAttributeValues={
        ':val': '29'
    },
    ReturnValues='UPDATED_NEW'
)

print(f"ì—…ë°ì´íŠ¸ëœ ê°’: {response['Attributes']}")
```

**5. Query ì‹¤í–‰:**
```python
from boto3.dynamodb.conditions import Key

# íŒŒí‹°ì…˜ í‚¤ë¡œ ì¿¼ë¦¬
response = table.query(
    KeyConditionExpression=Key('id').eq('200')
)

items = response['Items']
print(f"ì°¾ì€ ì•„ì´í…œ ìˆ˜: {len(items)}")
for item in items:
    print(item)
```

**6. Scan ì‹¤í–‰:**
```python
# ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”
response = table.scan()

items = response['Items']
print(f"ì „ì²´ ì•„ì´í…œ ìˆ˜: {len(items)}")

# í•„í„° ì¡°ê±´ ì¶”ê°€
response = table.scan(
    FilterExpression=Attr('age').lt('30')  # 30ì„¸ ë¯¸ë§Œ
)

items = response['Items']
print(f"30ì„¸ ë¯¸ë§Œ ì•„ì´í…œ ìˆ˜: {len(items)}")
```

**7. ë°°ì¹˜ ì‘ì—…:**
```python
# ì—¬ëŸ¬ ì•„ì´í…œ í•œë²ˆì— ì¶”ê°€
with table.batch_writer() as batch:
    for i in range(10):
        batch.put_item(
            Item={
                'id': f'user{i:03d}',
                'name': f'ì‚¬ìš©ì{i}',
                'age': str(20 + i)
            }
        )

print("10ê°œ ì•„ì´í…œ ë°°ì¹˜ ì¶”ê°€ ì™„ë£Œ!")
```

---

### ğŸ“ DynamoDB ì‚¬ìš© ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### âœ… ì„¤ê³„ ë‹¨ê³„
```
â–¡ ì ì ˆí•œ íŒŒí‹°ì…˜ í‚¤ ì„ íƒ (ê· ë“± ë¶„ì‚°)
â–¡ ì •ë ¬ í‚¤ í•„ìš”ì„± ê²€í† 
â–¡ ì•¡ì„¸ìŠ¤ íŒ¨í„´ ë¶„ì„
â–¡ RCU/WCU ì˜ˆìƒëŸ‰ ê³„ì‚°
â–¡ ìš©ëŸ‰ ëª¨ë“œ ì„ íƒ (Provisioned vs On-Demand)
```

#### âœ… ê°œë°œ ë‹¨ê³„
```
â–¡ SDK/ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜¬ë°”ë¥¸ ì‚¬ìš©
â–¡ ì—ëŸ¬ ì²˜ë¦¬ êµ¬í˜„ (Throttling, ConditionalCheckFailed ë“±)
â–¡ ì¬ì‹œë„ ë¡œì§ êµ¬í˜„ (Exponential Backoff)
â–¡ ë°°ì¹˜ ì‘ì—… í™œìš© (Batch Get/Write)
â–¡ í˜ì´ì§€ë„¤ì´ì…˜ ì²˜ë¦¬
```

#### âœ… ìš´ì˜ ë‹¨ê³„
```
â–¡ CloudWatch ë©”íŠ¸ë¦­ ëª¨ë‹ˆí„°ë§
â–¡ Auto Scaling ì„¤ì • (Provisioned ëª¨ë“œ)
â–¡ ì•ŒëŒ ì„¤ì • (Throttle, ì—ëŸ¬ìœ¨)
â–¡ ë°±ì—… ì •ì±… ì„¤ì • (PITR, On-Demand Backup)
â–¡ ë¹„ìš© ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”
```

#### âœ… ë³´ì•ˆ ë‹¨ê³„
```
â–¡ IAM ì •ì±… ìµœì†Œ ê¶Œí•œ ì›ì¹™
â–¡ VPC ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš© (í•„ìš” ì‹œ)
â–¡ ì•”í˜¸í™” ì„¤ì • í™•ì¸
â–¡ ê°ì‚¬ ë¡œê¹… (CloudTrail)
```

---

## 2ï¸âƒ£ Amazon Redshift - ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤

### ğŸ¢ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ê°œë…

**ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ë€?**
- ë°ì´í„° ë¶„ì„ì„ ìœ„í•´ **ì—¬ëŸ¬ ì‹œìŠ¤í…œì˜ ë°ì´í„°ë¥¼ ëª¨ì•„ë†“ì€** ëŒ€ê·œëª¨ ë°ì´í„°ë² ì´ìŠ¤

**ê¸°ì¡´ ì‹œìŠ¤í…œì˜ ë¬¸ì œ:**

```mermaid
graph TB
    subgraph "íšŒì‚¬ì˜ ì—¬ëŸ¬ ì‹œìŠ¤í…œ"
        A[CRM System<br/>ê³ ê°ê´€ë¦¬]
        B[ERP System<br/>ì¬ë¬´/ê²½ì˜]
        C[HR System<br/>ì¸ì‚¬ê´€ë¦¬]
        D[Marketing System<br/>ë§ˆì¼€íŒ…/ì›¹ì‚¬ì´íŠ¸]
    end

    subgraph "ê°œë³„ ë°ì´í„°ë² ì´ìŠ¤"
        A --> A1[(CRM DB<br/>ê³ ê° ë°ì´í„°)]
        B --> B1[(ERP DB<br/>ì¬ë¬´ ë°ì´í„°)]
        C --> C1[(HR DB<br/>ì¸ì‚¬ ë°ì´í„°)]
        D --> D1[(Marketing DB<br/>ê³ ê° í–‰ë™ ë°ì´í„°)]
    end

    E[âŒ ë¬¸ì œì :<br/>ë°ì´í„°ê°€ ë¶„ì‚°ë˜ì–´<br/>í†µí•© ë¶„ì„ ì–´ë ¤ì›€]
```

**ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ì†”ë£¨ì…˜:**

```mermaid
graph TB
    subgraph "Source Systems"
        A[CRM DB]
        B[ERP DB]
        C[HR DB]
        D[Marketing DB]
    end

    subgraph "ETL Process"
        E[ë°ì´í„° ì¶”ì¶œ<br/>Extract]
        F[ë°ì´í„° ë³€í™˜<br/>Transform]
        G[ë°ì´í„° ì ì¬<br/>Load]
    end

    subgraph "Data Warehouse"
        H[(Redshift<br/>í†µí•© ë°ì´í„°)]
        I[ê³ ê° í†µí•© ë·°]
        J[ë§¤ì¶œ ë¶„ì„ ë°ì´í„°]
        K[ì§ì› ì„±ê³¼ ë°ì´í„°]
    end

    subgraph "Analytics"
        L[BI ë„êµ¬]
        M[ë°ì´í„° ê³¼í•™ì]
        N[ê²½ì˜ì§„ ë¦¬í¬íŠ¸]
    end

    A --> E
    B --> E
    C --> E
    D --> E
    E --> F
    F --> G
    G --> H
    H --> I
    H --> J
    H --> K
    I --> L
    J --> M
    K --> N
```

**ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì˜ íŠ¹ì§•:**
```
1. ì£¼ì œ ì¤‘ì‹¬ (Subject-Oriented)
   - ê³ ê°, ì œí’ˆ, íŒë§¤ ë“± ì£¼ì œë³„ë¡œ êµ¬ì„±

2. í†µí•© (Integrated)
   - ì—¬ëŸ¬ ì†ŒìŠ¤ì˜ ë°ì´í„°ë¥¼ ì¼ê´€ëœ í˜•ì‹ìœ¼ë¡œ í†µí•©

3. ì‹œê°„ì„± (Time-Variant)
   - ê³¼ê±°ë¶€í„° í˜„ì¬ê¹Œì§€ì˜ ì‹œê³„ì—´ ë°ì´í„° ë³´ê´€

4. ë¹„íœ˜ë°œì„± (Non-Volatile)
   - ë°ì´í„° ì‚­ì œ/ìˆ˜ì • ë“œë¬¼ê³  ì£¼ë¡œ ì½ê¸°/ì¶”ê°€ë§Œ ë°œìƒ
```

---

### ğŸ“Š Redshift í•µì‹¬ ê°œë…

#### 1ï¸âƒ£ ì—´ ì§€í–¥ ìŠ¤í† ë¦¬ì§€ (Columnar Storage)

**ì¼ë°˜ RDB (í–‰ ì§€í–¥ ì €ì¥):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í•™ë²ˆ  â”‚ ì´ë¦„  â”‚ ì ìˆ˜  â”‚ ì„±ë³„  â”‚ ì¶œì‹ ì§€  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 001  â”‚ í™ê¸¸ë™â”‚  95  â”‚  M   â”‚ ì„œìš¸   â”‚
â”‚ 002  â”‚ ê¹€ì˜í¬â”‚  88  â”‚  F   â”‚ ë¶€ì‚°   â”‚
â”‚ 003  â”‚ ì´ì² ìˆ˜â”‚  92  â”‚  M   â”‚ ëŒ€êµ¬   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì €ì¥ ë°©ì‹ (Row-Oriented):
[001,í™ê¸¸ë™,95,M,ì„œìš¸][002,ê¹€ì˜í¬,88,F,ë¶€ì‚°][003,ì´ì² ìˆ˜,92,M,ëŒ€êµ¬]
â†’ í–‰ ë‹¨ìœ„ë¡œ ì—°ì† ì €ì¥
```

**ë¬¸ì œì :**
```
ë¶„ì„ ì¿¼ë¦¬ ì˜ˆ: "ëª¨ë“  í•™ìƒì˜ í‰ê·  ì ìˆ˜ëŠ”?"
SELECT AVG(ì ìˆ˜) FROM í•™ìƒ;

í•„ìš”í•œ ë°ì´í„°: ì ìˆ˜ ì»¬ëŸ¼ë§Œ
ì‹¤ì œ ì½ëŠ” ë°ì´í„°: í•™ë²ˆ, ì´ë¦„, ì ìˆ˜, ì„±ë³„, ì¶œì‹ ì§€ (ëª¨ë“  ì»¬ëŸ¼)
â†’ I/O ë‚­ë¹„!
```

**Redshift (ì—´ ì§€í–¥ ì €ì¥):**
```
ì €ì¥ ë°©ì‹ (Column-Oriented):
í•™ë²ˆ: [001][002][003]...
ì´ë¦„: [í™ê¸¸ë™][ê¹€ì˜í¬][ì´ì² ìˆ˜]...
ì ìˆ˜: [95][88][92]...          â† ì´ê²ƒë§Œ ì½ìœ¼ë©´ ë¨!
ì„±ë³„: [M][F][M]...
ì¶œì‹ ì§€: [ì„œìš¸][ë¶€ì‚°][ëŒ€êµ¬]...
```

**ì¥ì :**
```
âœ… í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì½ìŒ â†’ I/O ìµœì†Œí™”
âœ… ê°™ì€ íƒ€ì… ë°ì´í„° ì—°ì† â†’ ì••ì¶•ë¥  ë†’ìŒ
âœ… ì§‘ê³„ í•¨ìˆ˜ (SUM, AVG, COUNT) ë¹ ë¦„
âœ… ë¶„ì„ ì¿¼ë¦¬ ì„±ëŠ¥ ëŒ€í­ í–¥ìƒ
```

**ì••ì¶• íš¨ê³¼ ì˜ˆì‹œ:**
```
í–‰ ì§€í–¥:
[001,í™ê¸¸ë™,95,M,ì„œìš¸][002,ê¹€ì˜í¬,88,F,ë¶€ì‚°]...
â†’ ì••ì¶• ì–´ë ¤ì›€ (ë‹¤ì–‘í•œ ë°ì´í„° íƒ€ì… í˜¼ì¬)

ì—´ ì§€í–¥:
ì ìˆ˜: [95][88][92][95][88]...
â†’ ì••ì¶• ì‰¬ì›€ (ê°™ì€ íƒ€ì…, ìœ ì‚¬í•œ ê°’)
â†’ ì••ì¶•ë¥ : 70~90% ì ˆê° ê°€ëŠ¥!
```

---

#### 2ï¸âƒ£ Redshift ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "í´ë¼ì´ì–¸íŠ¸"
        A[ë¶„ì„ê°€]
        B[BI ë„êµ¬<br/>Tableau, PowerBI]
        C[SQL í´ë¼ì´ì–¸íŠ¸]
    end

    subgraph "Redshift Cluster"
        D[Leader Node<br/>ë¦¬ë” ë…¸ë“œ]

        subgraph "Compute Nodes"
            E[Compute Node 1<br/>ë°ì´í„° ì €ì¥ ë° ì²˜ë¦¬]
            F[Compute Node 2<br/>ë°ì´í„° ì €ì¥ ë° ì²˜ë¦¬]
            G[Compute Node 3<br/>ë°ì´í„° ì €ì¥ ë° ì²˜ë¦¬]
        end
    end

    subgraph "Storage"
        H[(S3<br/>ì €ì¥ì†Œ)]
    end

    A --> D
    B --> D
    C --> D

    D --> E
    D --> F
    D --> G

    E --> H
    F --> H
    G --> H
```

**ì»´í¬ë„ŒíŠ¸ ì„¤ëª…:**

**Leader Node (ë¦¬ë” ë…¸ë“œ):**
```
ì—­í• :
âœ“ í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ìˆ˜ë½
âœ“ SQL ì¿¼ë¦¬ íŒŒì‹± (Parsing)
âœ“ ì‹¤í–‰ ê³„íš ìƒì„± (Query Planning)
âœ“ ì‘ì—…ì„ Compute Nodeë“¤ì— ë¶„ì‚°
âœ“ ê²°ê³¼ ìˆ˜ì§‘ ë° í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜

ì²˜ë¦¬ íë¦„:
1. ë¶„ì„ê°€ê°€ ì¿¼ë¦¬ ì „ì†¡
   â†“
2. Leader Nodeê°€ ìˆ˜ì‹ 
   â†“
3. ì¿¼ë¦¬ ë¶„ì„ ë° ìµœì í™”
   â†“
4. ì‘ì—… ë‹¨ìœ„ë¡œ ë¶„í• 
   â†“
5. ê° Compute Nodeì— ë¶„ë°°
   â†“
6. ê²°ê³¼ ìˆ˜ì§‘ ë° ë³‘í•©
   â†“
7. í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜
```

**Compute Node (ì»´í“¨íŠ¸ ë…¸ë“œ):**
```
ì—­í• :
âœ“ ì‹¤ì œ ë°ì´í„° ì €ì¥
âœ“ ì¿¼ë¦¬ ì‹¤í–‰ ë° ë°ì´í„° ì²˜ë¦¬
âœ“ ë¡œì»¬ ë°ì´í„°ì— ëŒ€í•œ ì—°ì‚° ìˆ˜í–‰
âœ“ ì¤‘ê°„ ê²°ê³¼ë¥¼ Leader Nodeì— ì „ì†¡

íŠ¹ì§•:
- ë³‘ë ¬ ì²˜ë¦¬ (Parallel Processing)
- ê° ë…¸ë“œëŠ” ë°ì´í„°ì˜ ì¼ë¶€ë§Œ ë³´ìœ 
- ë…ë¦½ì ìœ¼ë¡œ ì‘ì—… ìˆ˜í–‰
```

**ì¿¼ë¦¬ ì‹¤í–‰ ì˜ˆì‹œ:**
```sql
-- ì¿¼ë¦¬: 2024ë…„ ì´ ë§¤ì¶œ ê³„ì‚°
SELECT SUM(amount) FROM sales WHERE year = 2024;

ì‹¤í–‰ ê³¼ì •:
1. Leader Node: ì¿¼ë¦¬ ìˆ˜ì‹  ë° ë¶„ì„
2. Leader Node: "ê° Compute NodeëŠ” ìì‹ ì´ ê°€ì§„ ë°ì´í„°ì—ì„œ
                2024ë…„ ë§¤ì¶œì„ í•©ì‚°í•˜ë¼"
3. Compute Node 1: SUM = 100M (ìì‹ ì˜ ë°ì´í„°)
4. Compute Node 2: SUM = 150M (ìì‹ ì˜ ë°ì´í„°)
5. Compute Node 3: SUM = 120M (ìì‹ ì˜ ë°ì´í„°)
6. Leader Node: 100M + 150M + 120M = 370M
7. í´ë¼ì´ì–¸íŠ¸: ê²°ê³¼ ìˆ˜ì‹  (370M)
```

---

#### 3ï¸âƒ£ S3 Integration

**Redshift Spectrum:**
```mermaid
graph LR
    A[Redshift Cluster] --> B[ë‚´ë¶€ ìŠ¤í† ë¦¬ì§€<br/>ìì£¼ ì‚¬ìš© ë°ì´í„°]
    A --> C[S3<br/>ëŒ€ìš©ëŸ‰ ë°ì´í„°]

    D[ì¿¼ë¦¬] --> A
    A --> E[í†µí•© ê²°ê³¼]
```

**ì¥ì :**
```
âœ… ìŠ¤í† ë¦¬ì§€ ë¹„ìš© ì ˆê°
   - Redshift ë‚´ë¶€: $23/TB/ì›”
   - S3 Standard: $2.5/TB/ì›”

âœ… ìœ ì—°í•œ ë°ì´í„° ê´€ë¦¬
   - ìì£¼ ì‚¬ìš©: Redshift ë‚´ë¶€
   - ê°€ë” ì‚¬ìš©: S3

âœ… í™•ì¥ì„±
   - S3ì— ë¬´ì œí•œ ë°ì´í„° ì €ì¥
   - í•„ìš” ì‹œì—ë§Œ ì¿¼ë¦¬
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```sql
-- S3 ë°ì´í„°ë¥¼ Redshiftì—ì„œ ì§ì ‘ ì¿¼ë¦¬
CREATE EXTERNAL TABLE s3_sales
(
    order_id INT,
    customer_id INT,
    amount DECIMAL(10,2),
    order_date DATE
)
STORED AS PARQUET
LOCATION 's3://my-bucket/sales-data/';

-- S3ì™€ Redshift ë°ì´í„°ë¥¼ ì¡°ì¸
SELECT
    c.customer_name,
    SUM(s.amount) as total
FROM customers c  -- Redshift ë‚´ë¶€ í…Œì´ë¸”
JOIN s3_sales s   -- S3 ì™¸ë¶€ í…Œì´ë¸”
ON c.id = s.customer_id
GROUP BY c.customer_name;
```

---

### ğŸš€ Redshift ì‚¬ìš© ì‚¬ë¡€

**1. ë¹„ì¦ˆë‹ˆìŠ¤ ì¸í…”ë¦¬ì „ìŠ¤ (BI):**
```
ì‹œë‚˜ë¦¬ì˜¤: ì „êµ­ ë§¤ì¥ ë§¤ì¶œ ëŒ€ì‹œë³´ë“œ

ë°ì´í„°:
- 10,000ê°œ ë§¤ì¥
- 5ë…„ì¹˜ íŒë§¤ ë°ì´í„°
- ì‹œê°„ë‹¹ ì—…ë°ì´íŠ¸

ì¿¼ë¦¬ ì˜ˆì‹œ:
- ì§€ì—­ë³„ ë§¤ì¶œ íŠ¸ë Œë“œ
- ì œí’ˆ ì¹´í…Œê³ ë¦¬ë³„ íŒë§¤ëŸ‰
- ì‹œê°„ëŒ€ë³„ ê³ ê° ë°©ë¬¸ íŒ¨í„´

Redshift ì¥ì :
âœ“ ëŒ€ìš©ëŸ‰ ë°ì´í„° ë¹ ë¥¸ ì§‘ê³„
âœ“ ë³µì¡í•œ JOIN ì¿¼ë¦¬ ì²˜ë¦¬
âœ“ BI ë„êµ¬ì™€ ì‰¬ìš´ ì—°ë™
```

**2. ë¡œê·¸ ë¶„ì„:**
```
ì‹œë‚˜ë¦¬ì˜¤: ì›¹ ì„œë¹„ìŠ¤ ì ‘ì† ë¡œê·¸ ë¶„ì„

ë°ì´í„°:
- ì¼ì¼ ë¡œê·¸: 1ì–µ ê±´
- ë¡œê·¸ í¬ê¸°: 100GB/ì¼
- ë³´ê´€ ê¸°ê°„: 1ë…„

ë¶„ì„:
- ì‚¬ìš©ì í–‰ë™ íŒ¨í„´
- ì˜¤ë¥˜ ë°œìƒ ë¹ˆë„
- ì„±ëŠ¥ ë³‘ëª© ì§€ì 

ì €ì¥ ì „ëµ:
- ìµœê·¼ 30ì¼: Redshift ë‚´ë¶€
- 30ì¼ ì´ì „: S3 (Spectrumìœ¼ë¡œ ì¿¼ë¦¬)
```

**3. ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜:**
```
ì‹œë‚˜ë¦¬ì˜¤: ì˜¨í”„ë ˆë¯¸ìŠ¤ â†’ í´ë¼ìš°ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜

ê¸°ì¡´ í™˜ê²½:
- Oracle/Teradata ë“±
- ìˆ˜ì‹­ TB ë°ì´í„°

ë§ˆì´ê·¸ë ˆì´ì…˜:
1. DMSë¡œ ì´ˆê¸° ë°ì´í„° ì´ì „
2. Redshiftì—ì„œ SQL í˜¸í™˜ì„± í™œìš©
3. ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ (CDC)
```

---

### ğŸ’° Redshift ë¹„ìš© ìµœì í™”

**1. ë…¸ë“œ íƒ€ì… ì„ íƒ:**
```
Dense Compute (DC2):
- SSD ê¸°ë°˜
- ë†’ì€ ì„±ëŠ¥
- ë¹„ìš©: ë†’ìŒ
- ì í•©: ê³ ì„±ëŠ¥ ìš”êµ¬, ì¤‘ê°„ ê·œëª¨ ë°ì´í„°

Dense Storage (RA3):
- S3 ê¸°ë°˜ ìŠ¤í† ë¦¬ì§€
- ìŠ¤í† ë¦¬ì§€/ì»´í“¨íŒ… ë¶„ë¦¬
- ë¹„ìš©: ë‚®ìŒ
- ì í•©: ëŒ€ìš©ëŸ‰ ë°ì´í„°, ë¹„ìš© ìµœì í™”
```

**2. ì••ì¶• (Compression):**
```sql
-- ì••ì¶• ì¸ì½”ë”© ë¶„ì„
ANALYZE COMPRESSION sales_table;

-- ìµœì  ì••ì¶• ì ìš©
CREATE TABLE sales_optimized
(
    order_id INT ENCODE az64,
    amount DECIMAL ENCODE az64,
    order_date DATE ENCODE delta,
    customer_name VARCHAR(100) ENCODE lzo
)
SORTKEY(order_date)
DISTKEY(customer_id);

-- íš¨ê³¼: 70~90% ì €ì¥ê³µê°„ ì ˆê°
```

**3. ì •ê¸° ìœ ì§€ë³´ìˆ˜:**
```sql
-- VACUUM: ì‚­ì œëœ ë°ì´í„° ì •ë¦¬
VACUUM FULL sales_table;

-- ANALYZE: í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸
ANALYZE sales_table;

-- íš¨ê³¼: ì¿¼ë¦¬ ì„±ëŠ¥ ìœ ì§€, ì €ì¥ê³µê°„ ìµœì í™”
```

---

## 3ï¸âƒ£ AWS Database Migration Service (DMS)

### ğŸ”„ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì˜ ë³µì¡ì„±

**ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì–´ë ¤ìš´ ì´ìœ :**

**1. ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„± ìš”êµ¬:**
```
ë¬¸ì œ:
- ëŒ€ìš©ëŸ‰ ë°ì´í„° ì „ì†¡ ì¤‘ ë„¤íŠ¸ì›Œí¬ ëŠê¹€
- ì „ì†¡ ì‹¤íŒ¨ ì‹œ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘
- ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥ ì–´ë ¤ì›€

ì˜í–¥:
âœ— ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨
âœ— ë°ì´í„° ì†ì‹¤ ìœ„í—˜
âœ— ë‹¤ìš´íƒ€ì„ ì¦ê°€
```

**2. ì´ê¸°ì¢… DB ì—”ì§„ ê°„ í˜¸í™˜ì„±:**
```
Oracle â†’ MySQL ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ:

ë¬¸ì œì :
- ë°ì´í„° íƒ€ì… ë¶ˆì¼ì¹˜
  ì˜ˆ: Oracle NUMBER â†” MySQL DECIMAL

- í•¨ìˆ˜ ì°¨ì´
  ì˜ˆ: Oracle NVL() â†” MySQL IFNULL()

- í”„ë¡œì‹œì €/íŠ¸ë¦¬ê±° ë¬¸ë²• ì°¨ì´
  ì˜ˆ: Oracle PL/SQL â†” MySQL Stored Procedure

- ì‹œí€€ìŠ¤ vs AUTO_INCREMENT ì°¨ì´
```

**3. ë‹¤ìš´íƒ€ì„ ìµœì†Œí™”:**
```
ìš”êµ¬ì‚¬í•­:
- 24/7 ì„œë¹„ìŠ¤ ìš´ì˜
- ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ì—ë„ ì„œë¹„ìŠ¤ ì§€ì†
- ì‚¬ìš©ì ì˜í–¥ ìµœì†Œí™”

í•´ê²°ì±…:
â†’ ì§€ì†ì  ë³µì œ (Continuous Replication) í•„ìš”
```

---

### ğŸ› ï¸ AWS DMS ì•„í‚¤í…ì²˜

```mermaid
graph LR
    subgraph "Source Database"
        A[(ì˜¨í”„ë ˆë¯¸ìŠ¤<br/>Oracle DB)]
    end

    subgraph "AWS Cloud"
        B[DMS Replication<br/>Instance]
        C[(Target<br/>RDS MySQL)]
    end

    subgraph "Management"
        D[DMS Console<br/>ëª¨ë‹ˆí„°ë§ & ì œì–´]
    end

    A -->|ë°ì´í„° ì½ê¸°| B
    B -->|ë°ì´í„° ì“°ê¸°| C
    D -.ê´€ë¦¬.-> B
```

**êµ¬ì„± ìš”ì†Œ:**

**1. Replication Instance:**
```
ì—­í• :
- ì†ŒìŠ¤ DBì—ì„œ ë°ì´í„° ì½ê¸°
- íƒ€ê²Ÿ DBë¡œ ë°ì´í„° ì“°ê¸°
- ë°ì´í„° ë³€í™˜ ë° ë§¤í•‘
- ì˜¤ë¥˜ ì²˜ë¦¬ ë° ì¬ì‹œë„

íŠ¹ì§•:
- EC2 ì¸ìŠ¤í„´ìŠ¤ ê¸°ë°˜
- Multi-AZ ì§€ì› (ê³ ê°€ìš©ì„±)
- í¬ê¸° ì¡°ì • ê°€ëŠ¥
```

**2. Source Endpoint:**
```
ì§€ì› ì†ŒìŠ¤:
âœ“ ì˜¨í”„ë ˆë¯¸ìŠ¤ DB
  - Oracle, SQL Server, MySQL, PostgreSQL

âœ“ AWS DB
  - RDS, Aurora, Redshift

âœ“ NoSQL
  - MongoDB, DocumentDB

âœ“ íŒŒì¼
  - S3 (CSV, Parquet)
```

**3. Target Endpoint:**
```
ì§€ì› íƒ€ê²Ÿ:
âœ“ RDS (ëª¨ë“  ì—”ì§„)
âœ“ Aurora
âœ“ Redshift
âœ“ DynamoDB
âœ“ S3
âœ“ Elasticsearch
âœ“ Kinesis Data Streams
âœ“ DocumentDB
```

---

### ğŸ“‹ DMS ë§ˆì´ê·¸ë ˆì´ì…˜ ìœ í˜•

#### 1ï¸âƒ£ Full Load (ì „ì²´ ë¡œë“œ)

**ê°œë…:**
```
ëª¨ë“  ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë§ˆì´ê·¸ë ˆì´ì…˜

ê³¼ì •:
1. ì†ŒìŠ¤ DBì˜ ìŠ¤ëƒ…ìƒ· ìƒì„±
2. ëª¨ë“  í…Œì´ë¸” ë°ì´í„° ë³µì‚¬
3. íƒ€ê²Ÿ DBë¡œ ë¡œë“œ
4. ì™„ë£Œ
```

```mermaid
sequenceDiagram
    participant S as Source DB
    participant D as DMS
    participant T as Target DB

    D->>S: 1. ë°ì´í„° ì½ê¸° ì‹œì‘
    S-->>D: 2. ì „ì²´ ë°ì´í„° ì „ì†¡
    D->>T: 3. ë°ì´í„° ì“°ê¸°
    T-->>D: 4. ì™„ë£Œ í™•ì¸
    D->>D: 5. ë§ˆì´ê·¸ë ˆì´ì…˜ ì¢…ë£Œ
```

**ì‚¬ìš© ì‚¬ë¡€:**
```
ì í•©:
âœ“ ì¼íšŒì„± ë§ˆì´ê·¸ë ˆì´ì…˜
âœ“ ë‹¤ìš´íƒ€ì„ í—ˆìš© ê°€ëŠ¥
âœ“ ì†Œê·œëª¨ ë°ì´í„°ë² ì´ìŠ¤

ë¹„ì í•©:
âœ— ëŒ€ê·œëª¨ í”„ë¡œë•ì…˜ DB
âœ— ë‹¤ìš´íƒ€ì„ ë¶ˆê°€
âœ— ì§€ì†ì ì¸ ë³€ê²½ ë°œìƒ
```

---

#### 2ï¸âƒ£ Full Load + CDC (Change Data Capture)

**ê°œë…:**
```
ì „ì²´ ë¡œë“œ í›„ ë³€ê²½ ì‚¬í•­ ì§€ì† ë³µì œ

ê³¼ì •:
1. Full Loadë¡œ ì´ˆê¸° ë°ì´í„° ë³µì‚¬
2. ì´í›„ ë³€ê²½ ì‚¬í•­ë§Œ ì‹¤ì‹œê°„ ë³µì œ
3. íƒ€ê²Ÿ DBê°€ ì†ŒìŠ¤ DBì™€ ë™ê¸°í™” ìœ ì§€
```

```mermaid
sequenceDiagram
    participant S as Source DB
    participant D as DMS
    participant T as Target DB

    Note over S,T: Phase 1: Full Load
    D->>S: ì „ì²´ ë°ì´í„° ì½ê¸°
    S-->>D: ë°ì´í„° ì „ì†¡
    D->>T: ë°ì´í„° ì“°ê¸°

    Note over S,T: Phase 2: CDC
    loop ì‹¤ì‹œê°„ ë³µì œ
        S->>S: ë°ì´í„° ë³€ê²½ (INSERT/UPDATE/DELETE)
        D->>S: ë³€ê²½ ì‚¬í•­ ê°ì§€
        S-->>D: ë³€ê²½ ë°ì´í„° ì „ì†¡
        D->>T: ë³€ê²½ ì‚¬í•­ ì ìš©
    end
```

**ì¥ì :**
```
âœ… ë‹¤ìš´íƒ€ì„ ìµœì†Œí™”
âœ… ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥
âœ… ë¡¤ë°± ê°€ëŠ¥ (ë¬¸ì œ ë°œìƒ ì‹œ)
âœ… ë°ì´í„° ì¼ê´€ì„± ìœ ì§€
```

**ì‚¬ìš© ì‚¬ë¡€:**
```
í”„ë¡œë•ì…˜ DB ë§ˆì´ê·¸ë ˆì´ì…˜:

ë‹¨ê³„ 1: ì „ì²´ ë°ì´í„° ë³µì‚¬
- ì—…ë¬´ ì‹œê°„ ì™¸ ì‹¤í–‰
- ì´ˆê¸° ë°ì´í„° ë™ê¸°í™”

ë‹¨ê³„ 2: CDCë¡œ ì‹¤ì‹œê°„ ë™ê¸°í™”
- ë©°ì¹ ~ëª‡ ì£¼ê°„ ìš´ì˜
- íƒ€ê²Ÿ DB í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

ë‹¨ê³„ 3: ì „í™˜ (Cutover)
- ì†ŒìŠ¤ DB ì½ê¸° ì „ìš© ì „í™˜
- ë§ˆì§€ë§‰ ë³€ê²½ ì‚¬í•­ ë™ê¸°í™”
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íƒ€ê²Ÿ DBë¡œ ì „í™˜
- ë‹¤ìš´íƒ€ì„: ìˆ˜ ë¶„ ì´ë‚´
```

---

#### 3ï¸âƒ£ CDC Only

**ê°œë…:**
```
ë³€ê²½ ì‚¬í•­ë§Œ ë³µì œ (ì´ˆê¸° ë°ì´í„°ëŠ” ì´ë¯¸ ì¡´ì¬)

ì‚¬ìš© ì‚¬ë¡€:
- íƒ€ê²Ÿ DBì— ì´ë¯¸ ë°ì´í„°ê°€ ìˆìŒ
- ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì´ˆê¸° ë¡œë“œ ì™„ë£Œ
- ì‹¤ì‹œê°„ ë™ê¸°í™”ë§Œ í•„ìš”
```

---

### ğŸ”§ Schema Conversion Tool (SCT)

**í•„ìš”ì„±:**
```
ì´ê¸°ì¢… DB ì—”ì§„ ê°„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ:
- Oracle â†’ PostgreSQL
- SQL Server â†’ MySQL
- ë“±ë“±

ë¬¸ì œ:
âœ— SQL ë¬¸ë²• ì°¨ì´
âœ— ë°ì´í„° íƒ€ì… ë¶ˆì¼ì¹˜
âœ— í•¨ìˆ˜/í”„ë¡œì‹œì € í˜¸í™˜ì„±
```

**SCT ê¸°ëŠ¥:**

```mermaid
graph TB
    A[Source DB<br/>Oracle] --> B[SCT]
    B --> C[í˜¸í™˜ì„± ë¶„ì„]
    C --> D{ìë™ ë³€í™˜<br/>ê°€ëŠ¥?}
    D -->|Yes| E[ìë™ ìŠ¤í‚¤ë§ˆ ë³€í™˜]
    D -->|No| F[ìˆ˜ë™ ì‘ì—… í•„ìš”<br/>ë³´ê³ ì„œ ìƒì„±]
    E --> G[Target DB<br/>PostgreSQL]
    F --> H[DBA ìˆ˜ë™ ì‘ì—…]
    H --> G
```

**1. í‰ê°€ ë³´ê³ ì„œ (Assessment Report):**
```
ë³´ê³ ì„œ ë‚´ìš©:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Schema Conversion Report            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ê°ì²´: 500ê°œ                       â”‚
â”‚                                     â”‚
â”‚ âœ“ ìë™ ë³€í™˜ ê°€ëŠ¥: 380ê°œ (76%)      â”‚
â”‚   - í…Œì´ë¸”: 100/100                 â”‚
â”‚   - ì¸ë±ìŠ¤: 80/80                   â”‚
â”‚   - ë·°: 50/60                       â”‚
â”‚   - í”„ë¡œì‹œì €: 150/260               â”‚
â”‚                                     â”‚
â”‚ âš  ìˆ˜ë™ ì‘ì—… í•„ìš”: 120ê°œ (24%)      â”‚
â”‚   - ë·°: 10ê°œ (ë³µì¡í•œ ì¿¼ë¦¬)         â”‚
â”‚   - í”„ë¡œì‹œì €: 110ê°œ (íŠ¹ìˆ˜ í•¨ìˆ˜)    â”‚
â”‚                                     â”‚
â”‚ ì˜ˆìƒ ì‘ì—… ì‹œê°„: 40ì‹œê°„              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. ìŠ¤í‚¤ë§ˆ ë³€í™˜ ì˜ˆì‹œ:**

**Oracle â†’ PostgreSQL:**
```sql
-- Oracle ì›ë³¸
CREATE TABLE employees (
    emp_id NUMBER PRIMARY KEY,
    hire_date DATE,
    salary NUMBER(10,2),
    status VARCHAR2(20)
);

-- SCT ìë™ ë³€í™˜
CREATE TABLE employees (
    emp_id SERIAL PRIMARY KEY,
    hire_date DATE,
    salary NUMERIC(10,2),
    status VARCHAR(20)
);
```

**í”„ë¡œì‹œì € ë³€í™˜:**
```sql
-- Oracle PL/SQL
CREATE OR REPLACE PROCEDURE update_salary(
    p_emp_id IN NUMBER,
    p_amount IN NUMBER
)
IS
BEGIN
    UPDATE employees
    SET salary = salary + p_amount
    WHERE emp_id = p_emp_id;
    COMMIT;
END;

-- PostgreSQL (SCT ë³€í™˜ + ìˆ˜ë™ ìˆ˜ì • í•„ìš”)
CREATE OR REPLACE FUNCTION update_salary(
    p_emp_id INTEGER,
    p_amount NUMERIC
)
RETURNS VOID AS $$
BEGIN
    UPDATE employees
    SET salary = salary + p_amount
    WHERE emp_id = p_emp_id;
    -- PostgreSQLì€ ìë™ ì»¤ë°‹
END;
$$ LANGUAGE plpgsql;
```

**3. ìˆ˜ë™ ì‘ì—…ì´ í•„ìš”í•œ ê²½ìš°:**
```
ë³´ê³ ì„œ ì˜ˆì‹œ:

Item: CALCULATE_BONUS í”„ë¡œì‹œì €
Severity: Warning
Issue: Oracle ì „ìš© í•¨ìˆ˜ 'NVL2' ì‚¬ìš©
Location: Line 15
Recommendation: PostgreSQLì˜ 'COALESCE' í•¨ìˆ˜ë¡œ ë³€ê²½ í•„ìš”

Before (Oracle):
  bonus := NVL2(commission, salary * 0.1, 0);

After (PostgreSQL):
  bonus := CASE
    WHEN commission IS NOT NULL THEN salary * 0.1
    ELSE 0
  END;
```

---

### ğŸ”„ DMS ë§ˆì´ê·¸ë ˆì´ì…˜ í”„ë¡œì„¸ìŠ¤

**ì „ì²´ ì›Œí¬í”Œë¡œìš°:**

```mermaid
graph TB
    A[1. í‰ê°€<br/>Assessment] --> B[2. SCT ì‹¤í–‰<br/>ìŠ¤í‚¤ë§ˆ ë³€í™˜]
    B --> C[3. ìˆ˜ë™ ì‘ì—…<br/>í˜¸í™˜ì„± ìˆ˜ì •]
    C --> D[4. íƒ€ê²Ÿ ìŠ¤í‚¤ë§ˆ ìƒì„±]
    D --> E[5. DMS Task ìƒì„±]
    E --> F[6. Full Load ì‹¤í–‰]
    F --> G[7. CDC ì‹œì‘]
    G --> H{ê²€ì¦<br/>ì™„ë£Œ?}
    H -->|No| G
    H -->|Yes| I[8. Cutover<br/>ì „í™˜]
    I --> J[9. ëª¨ë‹ˆí„°ë§]
```

**ìƒì„¸ ë‹¨ê³„:**

**Step 1-3: ìŠ¤í‚¤ë§ˆ ì¤€ë¹„**
```bash
# 1. SCT ì‹¤í–‰
aws sct convert-schema \
  --source-endpoint oracle-prod \
  --target-endpoint postgresql-dev

# 2. í‰ê°€ ë³´ê³ ì„œ ê²€í† 
# 3. ìˆ˜ë™ ì‘ì—… ìˆ˜í–‰ (DBA)
```

**Step 4: íƒ€ê²Ÿ ìŠ¤í‚¤ë§ˆ ìƒì„±**
```sql
-- SCTê°€ ìƒì„±í•œ DDL ì‹¤í–‰
psql -h target-db.amazonaws.com -U admin -d mydb -f converted_schema.sql
```

**Step 5: DMS Task ìƒì„±**
```json
{
  "TaskName": "oracle-to-postgres-migration",
  "SourceEndpointArn": "arn:aws:dms:...:endpoint/oracle-source",
  "TargetEndpointArn": "arn:aws:dms:...:endpoint/postgres-target",
  "ReplicationInstanceArn": "arn:aws:dms:...:rep:...",
  "MigrationType": "full-load-and-cdc",
  "TableMappings": "...",
  "ReplicationTaskSettings": "..."
}
```

**Step 6-7: ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**
```
Full Load ì§„í–‰:
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ------] 80% (8/10 tables)
Estimated time remaining: 2 hours

CDC ì‹œì‘:
Changes replicated: 15,234 operations
Latency: 2 seconds
```

**Step 8: Cutover**
```
Cutover ì²´í¬ë¦¬ìŠ¤íŠ¸:
â–¡ íƒ€ê²Ÿ DB ë°ì´í„° ê²€ì¦ ì™„ë£Œ
â–¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—°ê²° í…ŒìŠ¤íŠ¸ ì™„ë£Œ
â–¡ ë¡¤ë°± ê³„íš ì¤€ë¹„
â–¡ ì´í•´ê´€ê³„ì ìŠ¹ì¸

ì‹¤í–‰:
1. ì†ŒìŠ¤ DB READ-ONLY ì „í™˜
2. CDC ì§€ì—° ì‹œê°„ 0ì´ˆ í™•ì¸
3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì—°ê²° ë¬¸ìì—´ ë³€ê²½
4. ì„œë¹„ìŠ¤ ì¬ì‹œì‘
5. í—¬ìŠ¤ì²´í¬ í™•ì¸
```

---

### ğŸ“Š DMS ëª¨ë‹ˆí„°ë§

**CloudWatch ë©”íŠ¸ë¦­:**
```
ì¤‘ìš” ë©”íŠ¸ë¦­:
- CDCLatencySource: ë³µì œ ì§€ì—° ì‹œê°„
- CDCLatencyTarget: íƒ€ê²Ÿ ì ìš© ì§€ì—°
- FullLoadThroughputRowsSource: ì´ˆë‹¹ ì²˜ë¦¬ í–‰ ìˆ˜
- ReplicationTaskStatus: ì‘ì—… ìƒíƒœ

ì•ŒëŒ ì„¤ì • ì˜ˆì‹œ:
- CDCLatency > 60ì´ˆ: ê²½ê³ 
- CDCLatency > 300ì´ˆ: ì‹¬ê°
- FullLoadThroughputRows < 1000: ì„±ëŠ¥ ì €í•˜
```

**ë¡œê·¸ í™•ì¸:**
```bash
# DMS ì‘ì—… ë¡œê·¸
aws dms describe-replication-task-assessment-results \
  --replication-task-arn "arn:aws:dms:..."

# ì˜¤ë¥˜ ë¡œê·¸
aws logs tail /aws/dms/tasks/my-migration-task --follow
```

---

## 4ï¸âƒ£ ê¸°íƒ€ AWS ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤

### ğŸ—„ï¸ Amazon ElastiCache

**ê°œë…:**
- **ì¸ë©”ëª¨ë¦¬ ë°ì´í„° ìŠ¤í† ì–´**
- RAMì— ë°ì´í„° ì €ì¥ â†’ ì´ˆê³ ì† ì•¡ì„¸ìŠ¤
- ìºì‹œ ë˜ëŠ” ì„¸ì…˜ ìŠ¤í† ì–´ë¡œ ì‚¬ìš©

**ì§€ì› ì—”ì§„:**

#### 1ï¸âƒ£ Memcached

**íŠ¹ì§•:**
```
âœ“ ë‹¨ìˆœí•œ Key-Value ìŠ¤í† ì–´
âœ“ ë©€í‹°ìŠ¤ë ˆë“œ ì§€ì›
âœ“ ìˆ˜í‰ í™•ì¥ ì‰¬ì›€ (ìƒ¤ë”©)
âœ“ ì˜ì†ì„± ì—†ìŒ (ì¬ì‹œì‘ ì‹œ ë°ì´í„° ì†Œì‹¤)

ì í•©í•œ ì‚¬ìš©:
- ë‹¨ìˆœ ìºì‹±
- ì„¸ì…˜ ì €ì¥
- ì„ì‹œ ë°ì´í„°
```

#### 2ï¸âƒ£ Redis

**íŠ¹ì§•:**
```
âœ“ ë‹¤ì–‘í•œ ë°ì´í„° êµ¬ì¡° ì§€ì›
  - String, List, Set, Hash, Sorted Set
âœ“ ì˜ì†ì„± ì§€ì› (RDB/AOF)
âœ“ ë³µì œ ì§€ì› (Master-Replica)
âœ“ íŠ¸ëœì­ì…˜ ì§€ì›
âœ“ Pub/Sub ë©”ì‹œì§•

ì í•©í•œ ì‚¬ìš©:
- ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°
- ë¦¬ë”ë³´ë“œ/ìˆœìœ„í‘œ
- ì‹¤ì‹œê°„ ë¶„ì„
- ë©”ì‹œì§•
```

---

**ì‚¬ìš© ì‚¬ë¡€ 1: DB ìºì‹œ**

```mermaid
graph LR
    A[Application] --> B{Cache Hit?}
    B -->|Yes| C[ElastiCache<br/>ë¹ ë¥¸ ì‘ë‹µ]
    B -->|No| D[RDS<br/>DB ì¿¼ë¦¬]
    D --> E[ê²°ê³¼ë¥¼ ìºì‹œì— ì €ì¥]
    E --> C
```

**êµ¬í˜„ ì˜ˆì‹œ:**
```python
import redis
import psycopg2

# Redis ì—°ê²°
cache = redis.Redis(host='elasticache-endpoint', port=6379)

def get_user_data(user_id):
    # 1. ìºì‹œ í™•ì¸
    cached_data = cache.get(f'user:{user_id}')
    if cached_data:
        print("Cache Hit!")
        return json.loads(cached_data)

    # 2. ìºì‹œ ë¯¸ìŠ¤ â†’ DB ì¡°íšŒ
    print("Cache Miss - Querying DB")
    conn = psycopg2.connect(...)
    cursor = conn.execute(
        "SELECT * FROM users WHERE id = %s", (user_id,)
    )
    user_data = cursor.fetchone()

    # 3. ìºì‹œì— ì €ì¥ (TTL 1ì‹œê°„)
    cache.setex(
        f'user:{user_id}',
        3600,  # TTL in seconds
        json.dumps(user_data)
    )

    return user_data
```

**ì„±ëŠ¥ í–¥ìƒ:**
```
ìºì‹œ ë¯¸ì‚¬ìš©:
- DB ì¿¼ë¦¬ ì‹œê°„: 50ms
- ì´ˆë‹¹ ì²˜ë¦¬ ìš”ì²­: 20 req/s
- DB ë¶€í•˜: ë†’ìŒ

ìºì‹œ ì‚¬ìš© (90% Hit Rate):
- ìºì‹œ ì‘ë‹µ ì‹œê°„: 1ms
- ì´ˆë‹¹ ì²˜ë¦¬ ìš”ì²­: 1000 req/s
- DB ë¶€í•˜: ë‚®ìŒ (10%ë§Œ DB ì ‘ê·¼)
```

---

**ì‚¬ìš© ì‚¬ë¡€ 2: ì„¸ì…˜ ìŠ¤í† ì–´**

```mermaid
graph TB
    subgraph "Web Tier (Auto Scaling)"
        A[Web Server 1]
        B[Web Server 2]
        C[Web Server 3]
    end

    subgraph "Session Store"
        D[ElastiCache<br/>Redis Cluster]
    end

    E[User] --> A
    E --> B
    E --> C

    A --> D
    B --> D
    C --> D
```

**ì¥ì :**
```
ì„¸ì…˜ ìŠ¤í† ì–´ë¥¼ ElastiCacheë¡œ ì¤‘ì•™í™”:

âœ… ì„œë²„ ê°„ ì„¸ì…˜ ê³µìœ 
   - ì‚¬ìš©ìê°€ ì–´ëŠ ì„œë²„ì— ì ‘ì†í•´ë„ ì„¸ì…˜ ìœ ì§€

âœ… Auto Scaling ê°€ëŠ¥
   - ì›¹ ì„œë²„ ì¶”ê°€/ì‚­ì œ ììœ ë¡œì›€

âœ… ê³ ê°€ìš©ì„±
   - ì›¹ ì„œë²„ ì¥ì•  ì‹œì—ë„ ì„¸ì…˜ ìœ ì§€

âœ… ë¹ ë¥¸ ì„¸ì…˜ ì•¡ì„¸ìŠ¤
   - ë©”ëª¨ë¦¬ ê¸°ë°˜ â†’ 1ms ì´í•˜ ì‘ë‹µ
```

**êµ¬í˜„ ì˜ˆì‹œ (Node.js + Express):**
```javascript
const session = require('express-session');
const RedisStore = require('connect-redis')(session);
const redis = require('redis');

// Redis í´ë¼ì´ì–¸íŠ¸ ìƒì„±
const redisClient = redis.createClient({
  host: 'elasticache-endpoint.cache.amazonaws.com',
  port: 6379
});

// Express ì„¸ì…˜ ì„¤ì •
app.use(session({
  store: new RedisStore({ client: redisClient }),
  secret: 'my-secret-key',
  resave: false,
  saveUninitialized: false,
  cookie: {
    secure: true,
    maxAge: 1000 * 60 * 60 * 24 // 24ì‹œê°„
  }
}));

// ì„¸ì…˜ ì‚¬ìš©
app.get('/login', (req, res) => {
  req.session.userId = 12345;
  res.send('ë¡œê·¸ì¸ ì„±ê³µ');
});

app.get('/profile', (req, res) => {
  if (req.session.userId) {
    res.send(`ì‚¬ìš©ì ID: ${req.session.userId}`);
  } else {
    res.send('ë¡œê·¸ì¸ í•„ìš”');
  }
});
```

---

**ì‚¬ìš© ì‚¬ë¡€ 3: ê²Œì„ ë¦¬ë”ë³´ë“œ**

**Redis Sorted Set í™œìš©:**
```python
import redis

r = redis.Redis(host='elasticache-endpoint')

# ì ìˆ˜ ì—…ë°ì´íŠ¸
def update_score(player_id, score):
    r.zadd('leaderboard', {player_id: score})

# ìƒìœ„ 10ëª… ì¡°íšŒ
def get_top_10():
    return r.zrevrange('leaderboard', 0, 9, withscores=True)

# íŠ¹ì • í”Œë ˆì´ì–´ ìˆœìœ„ ì¡°íšŒ
def get_player_rank(player_id):
    rank = r.zrevrank('leaderboard', player_id)
    return rank + 1 if rank is not None else None

# ì‚¬ìš© ì˜ˆì‹œ
update_score('player001', 9500)
update_score('player002', 8700)
update_score('player003', 9200)

top_players = get_top_10()
# [('player001', 9500.0), ('player003', 9200.0), ('player002', 8700.0)]

rank = get_player_rank('player003')
# 2
```

---

### ğŸ“„ Amazon DocumentDB

**ê°œë…:**
- **ë¬¸ì„œ ì§€í–¥ ë°ì´í„°ë² ì´ìŠ¤**
- **MongoDB í˜¸í™˜**
- JSON í˜•ì‹ ë°ì´í„° ì €ì¥

**íŠ¹ì§•:**
```
âœ“ MongoDB API í˜¸í™˜ (3.6, 4.0, 5.0)
âœ“ ì™„ì „ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤
âœ“ ìë™ ë°±ì—… ë° ë³µêµ¬
âœ“ ìë™ ìŠ¤ì¼€ì¼ë§
âœ“ ê³ ê°€ìš©ì„± (3 AZ ë³µì œ)
```

**ë°ì´í„° êµ¬ì¡°:**
```json
{
  "_id": "507f1f77bcf86cd799439011",
  "name": "í™ê¸¸ë™",
  "email": "hong@example.com",
  "address": {
    "city": "ì„œìš¸",
    "zipcode": "12345"
  },
  "orders": [
    {
      "order_id": "ORD-001",
      "amount": 50000,
      "date": "2024-12-01"
    },
    {
      "order_id": "ORD-002",
      "amount": 35000,
      "date": "2024-12-05"
    }
  ],
  "tags": ["VIP", "regular"]
}
```

**ì‚¬ìš© ì‚¬ë¡€:**
- ì½˜í…ì¸  ê´€ë¦¬ ì‹œìŠ¤í…œ (CMS)
- ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬
- ì¹´íƒˆë¡œê·¸/ì œí’ˆ ì •ë³´
- ëª¨ë°”ì¼ ì•± ë°±ì—”ë“œ

---

### ğŸ•¸ï¸ Amazon Neptune

**ê°œë…:**
- **ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤**
- ë…¸ë“œ(Node)ì™€ ì—£ì§€(Edge)ë¡œ ê´€ê³„ í‘œí˜„

**ê·¸ë˜í”„ êµ¬ì¡°:**
```mermaid
graph LR
    A[User: í™ê¸¸ë™] -->|ì¹œêµ¬| B[User: ê¹€ì² ìˆ˜]
    B -->|ì¹œêµ¬| C[User: ì´ì˜í¬]
    A -->|ì¢‹ì•„ìš”| D[Post: ì—¬í–‰ ì‚¬ì§„]
    B -->|ì¢‹ì•„ìš”| D
    C -->|ì¢‹ì•„ìš”| D
    A -->|íŒ”ë¡œìš°| E[Account: ë§›ì§‘ê³„ì •]
    C -->|íŒ”ë¡œìš°| E
```

**êµ¬ì„± ìš”ì†Œ:**
```
Vertex (ì •ì /ë…¸ë“œ):
- ì—”í‹°í‹°ë¥¼ í‘œí˜„
- ì˜ˆ: ì‚¬ëŒ, ì¥ì†Œ, ì œí’ˆ

Edge (ê°„ì„ ):
- ê´€ê³„ë¥¼ í‘œí˜„
- ì˜ˆ: ì¹œêµ¬, ì¢‹ì•„ìš”, êµ¬ë§¤

Property (ì†ì„±):
- ë…¸ë“œ/ê°„ì„ ì˜ ì†ì„±
- ì˜ˆ: ì´ë¦„, ë‚˜ì´, ê´€ê³„ í˜•ì„± ë‚ ì§œ
```

**ì¿¼ë¦¬ ì˜ˆì‹œ (Gremlin):**
```groovy
// í™ê¸¸ë™ì˜ ì¹œêµ¬ë“¤ ì¡°íšŒ
g.V().has('name', 'í™ê¸¸ë™')
  .out('ì¹œêµ¬')
  .values('name')

// ì¹œêµ¬ì˜ ì¹œêµ¬ ì¶”ì²œ (2ì´Œ ê´€ê³„)
g.V().has('name', 'í™ê¸¸ë™')
  .out('ì¹œêµ¬').out('ì¹œêµ¬')
  .dedup()
  .where(without(['í™ê¸¸ë™']))
  .values('name')

// ê³µí†µ ê´€ì‹¬ì‚¬ ì°¾ê¸°
g.V().has('name', 'í™ê¸¸ë™')
  .out('ì¢‹ì•„ìš”')
  .in('ì¢‹ì•„ìš”')
  .groupCount()
  .unfold()
  .order().by(values, desc)
  .limit(10)
```

**ì‚¬ìš© ì‚¬ë¡€:**
- **ì†Œì…œ ë„¤íŠ¸ì›Œí¬**: ì¹œêµ¬ ì¶”ì²œ, ì˜í–¥ë ¥ ë¶„ì„
- **ì¶”ì²œ ì—”ì§„**: ìƒí’ˆ ì¶”ì²œ, ì½˜í…ì¸  ì¶”ì²œ
- **ì§€ì‹ ê·¸ë˜í”„**: ê²€ìƒ‰ ì—”ì§„, Q&A ì‹œìŠ¤í…œ
- **ì‚¬ê¸° íƒì§€**: ë„¤íŠ¸ì›Œí¬ íŒ¨í„´ ë¶„ì„
- **ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬**: IT ì¸í”„ë¼ ê´€ê³„ ë§¤í•‘

---

### ğŸ“œ Amazon Quantum Ledger Database (QLDB)

**ê°œë…:**
- **ì›ì¥ ë°ì´í„°ë² ì´ìŠ¤** (Ledger Database)
- **ë¶ˆë³€(Immutable) íŠ¸ëœì­ì…˜ ë¡œê·¸**
- ëª¨ë“  ë³€ê²½ ì´ë ¥ì„ ì•”í˜¸í™”í•˜ì—¬ ë³´ê´€

**íŠ¹ì§•:**
```
âœ“ ì—…ë°ì´íŠ¸ ë¶ˆê°€ (Update ë¶ˆí—ˆ)
âœ“ ì‚­ì œ ë¶ˆê°€ (Delete ë¶ˆí—ˆ)
âœ“ ì¶”ê°€ë§Œ ê°€ëŠ¥ (Insert/Append Only)
âœ“ ì „ì²´ ë³€ê²½ ì´ë ¥ ì¶”ì 
âœ“ ì•”í˜¸í™” ê²€ì¦ (ë¸”ë¡ì²´ì¸ ê¸°ìˆ )
```

**ë°ì´í„° êµ¬ì¡°:**
```
Version 1 (2024-01-01):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account: 1001                â”‚
â”‚ Balance: 1,000,000          â”‚
â”‚ Timestamp: 2024-01-01 09:00 â”‚
â”‚ Hash: abc123...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Version 2 (2024-01-02):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account: 1001                â”‚
â”‚ Transaction: -100,000       â”‚
â”‚ Balance: 900,000            â”‚
â”‚ Timestamp: 2024-01-02 14:30 â”‚
â”‚ Previous Hash: abc123...    â”‚
â”‚ Hash: def456...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Version 3 (2024-01-03):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account: 1001                â”‚
â”‚ Transaction: +50,000        â”‚
â”‚ Balance: 950,000            â”‚
â”‚ Timestamp: 2024-01-03 10:15 â”‚
â”‚ Previous Hash: def456...    â”‚
â”‚ Hash: ghi789...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SQL ì¿¼ë¦¬ ì˜ˆì‹œ:**
```sql
-- í˜„ì¬ ì”ì•¡ ì¡°íšŒ
SELECT balance
FROM accounts
WHERE account_id = '1001';

-- ì „ì²´ ê±°ë˜ ì´ë ¥ ì¡°íšŒ
SELECT *
FROM history(accounts)
WHERE metadata.id = '1001'
ORDER BY metadata.version;

-- íŠ¹ì • ì‹œì ì˜ ì”ì•¡ ì¡°íšŒ
SELECT balance
FROM history(accounts) AS h
WHERE h.metadata.id = '1001'
  AND h.metadata.txTime <= '2024-01-02T00:00:00Z'
ORDER BY h.metadata.version DESC
LIMIT 1;
```

**ì‚¬ìš© ì‚¬ë¡€:**
```
ê¸ˆìœµ:
- ì€í–‰ ê±°ë˜ ë‚´ì—­
- ì£¼ì‹ ê±°ë˜ ê¸°ë¡
- ê²°ì œ ì´ë ¥

ê³µê¸‰ë§:
- ì œí’ˆ ì´ë™ ì¶”ì 
- ì›ì‚°ì§€ ì¦ëª…
- í’ˆì§ˆ ê´€ë¦¬ ì´ë ¥

ì˜ë£Œ:
- í™˜ì ì§„ë£Œ ê¸°ë¡
- ì•½ë¬¼ ì²˜ë°© ì´ë ¥

ë²•ë¥ /ê·œì œ:
- ê³„ì•½ ë³€ê²½ ì´ë ¥
- ê·œì • ì¤€ìˆ˜ ê¸°ë¡
```

---

### â±ï¸ Amazon Timestream

**ê°œë…:**
- **ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤** (Time-Series DB)
- ì‹œê°„ ìˆœì„œë¡œ ìˆ˜ì§‘ë˜ëŠ” ë°ì´í„° ì €ì¥ì— ìµœì í™”

**ì‹œê³„ì—´ ë°ì´í„° ì˜ˆì‹œ:**
```
IoT ì„¼ì„œ ë°ì´í„°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Timestamp   â”‚ Sensor  â”‚ Temp(Â°C) â”‚ Humidity â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 09:00:00    â”‚ SEN-001 â”‚ 22.5     â”‚ 45%      â”‚
â”‚ 09:00:10    â”‚ SEN-001 â”‚ 22.6     â”‚ 45%      â”‚
â”‚ 09:00:20    â”‚ SEN-001 â”‚ 22.7     â”‚ 46%      â”‚
â”‚ 09:00:30    â”‚ SEN-001 â”‚ 22.8     â”‚ 46%      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì§•:**
```
âœ“ ì‹œê°„ ê¸°ë°˜ ì¿¼ë¦¬ ìµœì í™”
âœ“ ìë™ ë°ì´í„° í‹°ì–´ë§
  - ìµœì‹  ë°ì´í„°: ë©”ëª¨ë¦¬ (ë¹ ë¦„)
  - ì˜¤ë˜ëœ ë°ì´í„°: S3 (ì €ë ´)
âœ“ ìë™ ë°ì´í„° ë³´ì¡´ ì •ì±…
âœ“ ë‚´ì¥ ì‹œê³„ì—´ ë¶„ì„ í•¨ìˆ˜
```

**ì¿¼ë¦¬ ì˜ˆì‹œ:**
```sql
-- ìµœê·¼ 1ì‹œê°„ í‰ê·  ì˜¨ë„
SELECT
    BIN(time, 1m) AS minute,
    AVG(temperature) AS avg_temp
FROM sensor_data
WHERE time > ago(1h)
  AND sensor_id = 'SEN-001'
GROUP BY BIN(time, 1m)
ORDER BY minute;

-- ì´ë™ í‰ê·  ê³„ì‚°
SELECT
    time,
    temperature,
    AVG(temperature) OVER (
        ORDER BY time
        ROWS BETWEEN 9 PRECEDING AND CURRENT ROW
    ) AS moving_avg_10
FROM sensor_data
WHERE sensor_id = 'SEN-001'
  AND time > ago(24h);
```

**ì‚¬ìš© ì‚¬ë¡€:**
```
IoT:
- ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘
- ë””ë°”ì´ìŠ¤ ëª¨ë‹ˆí„°ë§
- ì´ìƒ íƒì§€

DevOps:
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”íŠ¸ë¦­
- ë¡œê·¸ ë¶„ì„
- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

ê¸ˆìœµ:
- ì£¼ê°€ ë°ì´í„°
- ê±°ë˜ëŸ‰ ë¶„ì„
```

---

### â›“ï¸ Amazon Managed Blockchain

**ê°œë…:**
- **ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ ì„œë¹„ìŠ¤**
- Hyperledger Fabric, Ethereum ì§€ì›

**íŠ¹ì§•:**
```
âœ“ ì™„ì „ ê´€ë¦¬í˜• ë¸”ë¡ì²´ì¸
âœ“ ë„¤íŠ¸ì›Œí¬ ìƒì„± ê°„ì†Œí™”
âœ“ ë©¤ë²„ ê´€ë¦¬ ìë™í™”
âœ“ íˆ¬í‘œ ê¸°ë°˜ ë©¤ë²„ì‹­ ê´€ë¦¬
```

**ì‚¬ìš© ì‚¬ë¡€:**
```
ê³µê¸‰ë§:
- ì œí’ˆ ì¶”ì 
- ì§„í’ˆ ì¸ì¦

ê¸ˆìœµ:
- ë¬´ì—­ ê¸ˆìœµ
- ìì‚° í† í°í™”

ì˜ë£Œ:
- ì˜ë£Œ ê¸°ë¡ ê³µìœ 
- ì„ìƒ ì‹œí—˜ ë°ì´í„°
```

---

## ğŸ“Š AWS ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ì„ íƒ ê°€ì´ë“œ

### ê²°ì • íŠ¸ë¦¬

```mermaid
graph TD
    A[ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ] --> B{ë°ì´í„° êµ¬ì¡°}

    B -->|ì •í˜• ë°ì´í„°| C{ì›Œí¬ë¡œë“œ ìœ í˜•}
    C -->|OLTP íŠ¸ëœì­ì…˜| D[RDS / Aurora]
    C -->|OLAP ë¶„ì„| E[Redshift]

    B -->|ë°˜ì •í˜•| F{ìš”êµ¬ì‚¬í•­}
    F -->|Key-Value, ê³ ì„±ëŠ¥| G[DynamoDB]
    F -->|ë¬¸ì„œ í˜•ì‹| H[DocumentDB]

    B -->|ë¹„ì •í˜•| I{íŠ¹ìˆ˜ ìš”êµ¬ì‚¬í•­}
    I -->|ê·¸ë˜í”„ ê´€ê³„| J[Neptune]
    I -->|ì‹œê³„ì—´| K[Timestream]
    I -->|ì›ì¥/ë¶ˆë³€| L[QLDB]

    A --> M{ìºì‹± í•„ìš”?}
    M -->|Yes| N[ElastiCache]
```

### ğŸ“‹ ë¹„êµí‘œ

| ì„œë¹„ìŠ¤ | ë°ì´í„° ëª¨ë¸ | ì‚¬ìš© ì‚¬ë¡€ | íŠ¹ì§• |
|--------|-----------|----------|------|
| **RDS** | ê´€ê³„í˜• | íŠ¸ëœì­ì…˜ ì²˜ë¦¬ | ACID, SQL ì§€ì› |
| **Aurora** | ê´€ê³„í˜• | ê³ ì„±ëŠ¥ íŠ¸ëœì­ì…˜ | RDS ëŒ€ë¹„ 5ë°° ì„±ëŠ¥ |
| **DynamoDB** | Key-Value | ëŒ€ê·œëª¨ ì›¹/ëª¨ë°”ì¼ ì•± | ì„œë²„ë¦¬ìŠ¤, ë°€ë¦¬ì´ˆ ì§€ì—° |
| **Redshift** | ê´€ê³„í˜• (ì»¬ëŸ¼) | ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ | í˜íƒ€ë°”ì´íŠ¸ ë¶„ì„ |
| **DocumentDB** | ë¬¸ì„œ | ì½˜í…ì¸  ê´€ë¦¬ | MongoDB í˜¸í™˜ |
| **Neptune** | ê·¸ë˜í”„ | ì†Œì…œ, ì¶”ì²œ | ê´€ê³„ ë¶„ì„ |
| **ElastiCache** | In-Memory | ìºì‹±, ì„¸ì…˜ | ë°€ë¦¬ì´ˆ ë¯¸ë§Œ ì‘ë‹µ |
| **QLDB** | ì›ì¥ | ê¸ˆìœµ, ê·œì œ | ë¶ˆë³€ ì´ë ¥ |
| **Timestream** | ì‹œê³„ì—´ | IoT, ëª¨ë‹ˆí„°ë§ | ì‹œê°„ ê¸°ë°˜ ìµœì í™” |

---

## âœ… Section 2 í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

### DynamoDB
```
â–¡ Key-Value ë°ì´í„° ëª¨ë¸ ì´í•´
â–¡ íŒŒí‹°ì…˜ í‚¤ì™€ ì •ë ¬ í‚¤ ê°œë…
â–¡ RCU/WCU ê³„ì‚° ë°©ë²•
â–¡ Provisioned vs On-Demand ëª¨ë“œ ì°¨ì´
â–¡ í…Œì´ë¸” ìƒì„± ë° ì•„ì´í…œ CRUD ì‹¤ìŠµ
â–¡ Scan vs Query ì°¨ì´ì 
â–¡ ë°±ì—… ë° ë³µì› ë°©ë²•
```

### Redshift
```
â–¡ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ê°œë…
â–¡ ì—´ ì§€í–¥ ìŠ¤í† ë¦¬ì§€ ì¥ì 
â–¡ Leader Nodeì™€ Compute Node ì—­í• 
â–¡ S3 Integration (Redshift Spectrum)
â–¡ ì‚¬ìš© ì‚¬ë¡€ ì´í•´
```

### DMS
```
â–¡ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ë³µì¡ì„±
â–¡ DMS ì•„í‚¤í…ì²˜ (Replication Instance)
â–¡ Full Load vs CDC ì°¨ì´
â–¡ Schema Conversion Tool (SCT) ì—­í• 
â–¡ ë§ˆì´ê·¸ë ˆì´ì…˜ í”„ë¡œì„¸ìŠ¤ ì´í•´
```

### ê¸°íƒ€ ë°ì´í„°ë² ì´ìŠ¤
```
â–¡ ElastiCache ìš©ë„ (ìºì‹œ, ì„¸ì…˜)
â–¡ DocumentDB (MongoDB í˜¸í™˜)
â–¡ Neptune (ê·¸ë˜í”„ DB)
â–¡ QLDB (ì›ì¥ DB)
â–¡ Timestream (ì‹œê³„ì—´ DB)
â–¡ ê° ì„œë¹„ìŠ¤ì˜ ì ì ˆí•œ ì‚¬ìš© ì‚¬ë¡€ íŒë‹¨
```

---

**ë‹¤ìŒ ì„¹ì…˜ ì˜ˆê³ :**
ì„¹ì…˜ 3ì—ì„œëŠ” AWS ë¡œê·¸ ë° ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ (CloudTrail, CloudWatch, VPC Flow Logs ë“±)ë¥¼ ìƒì„¸íˆ í•™ìŠµí•©ë‹ˆë‹¤.
# ğŸ“Š AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ - Day 6 (Section 3)

## ğŸ“š ì„¹ì…˜ 3: AWS ë¡œê·¸ ë° ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤

---

### ğŸ¯ í•™ìŠµ ëª©í‘œ
ì´ ì„¹ì…˜ì—ì„œëŠ” AWS í™˜ê²½ì—ì„œì˜ ë¡œê·¸ ìˆ˜ì§‘, ì €ì¥, ë¶„ì„ ë° ëª¨ë‹ˆí„°ë§ ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤.

**í•µì‹¬ í•™ìŠµ ë‚´ìš©:**
- ë¡œê·¸ ìˆ˜ì§‘ ë° ë³´í˜¸ ê¸°ë³¸ ì›ì¹™
- AWS CloudTrail: API í™œë™ ì¶”ì 
- Amazon CloudWatch Logs: ë¡œê·¸ ì§‘ì¤‘í™” ë° ë¶„ì„
- VPC Flow Logs: ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë¡œê¹…
- ê¸°íƒ€ AWS ë¡œê·¸ ì„œë¹„ìŠ¤ (S3 Access Logs, ELB Access Logs)
- ë¡œê·¸ ê¸°ë°˜ ì•ŒëŒ ë° ìë™í™”

---

## 1ï¸âƒ£ ë¡œê·¸ ìˆ˜ì§‘ ë° ë³´í˜¸ ê¸°ë³¸ ì›ì¹™

### ğŸ“‹ ë¡œê·¸ ìˆ˜ì§‘ì˜ ì¤‘ìš”ì„±

**ë¡œê·¸ê°€ í•„ìš”í•œ ì´ìœ :**
```
âœ“ ì¥ì•  ë°œìƒ ì‹œ ì›ì¸ íŒŒì•…
âœ“ ë³´ì•ˆ ì‚¬ê³  ì¡°ì‚¬ ë° ê°ì‚¬
âœ“ ê·œì • ì¤€ìˆ˜ (Compliance)
âœ“ ì‚¬ìš©ì í–‰ë™ ë¶„ì„
âœ“ ì‹œìŠ¤í…œ ìµœì í™” ê·¼ê±°
âœ“ ê³¼ê¸ˆ ë° ë¦¬ì†ŒìŠ¤ ì‚¬ìš© ì¶”ì 
```

---

### ğŸ“ ë¡œê·¸ ìˆ˜ì§‘ ê¸°ë³¸ ì›ì¹™

#### ì›ì¹™ 1: ìµœëŒ€í•œ ë§ì€ ë¡œê·¸ ìˆ˜ì§‘

```
ê¶Œì¥ ë¡œê·¸ ìˆ˜ì§‘ ë²”ìœ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¸í”„ë¼ ë ˆë²¨                             â”‚
â”‚  â€¢ VPC Flow Logs                       â”‚
â”‚  â€¢ CloudTrail API Logs                 â”‚
â”‚  â€¢ Config Changes                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„œë¹„ìŠ¤ ë ˆë²¨                             â”‚
â”‚  â€¢ S3 Access Logs                      â”‚
â”‚  â€¢ ELB Access Logs                     â”‚
â”‚  â€¢ RDS Logs                            â”‚
â”‚  â€¢ Lambda Execution Logs               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨                        â”‚
â”‚  â€¢ ì›¹ ì„œë²„ ë¡œê·¸ (Apache/Nginx)         â”‚
â”‚  â€¢ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸                    â”‚
â”‚  â€¢ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ë¡œê·¸               â”‚
â”‚  â€¢ ì»¤ìŠ¤í…€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì™œ ë§ì€ ë¡œê·¸ê°€ í•„ìš”í•œê°€?**
```
ì‚¬ê³  ì¡°ì‚¬ ì‹œë‚˜ë¦¬ì˜¤:

ë¬¸ì œ: "3ì¼ ì „ 15:30ê²½ íŠ¹ì • ì‚¬ìš©ì ë°ì´í„° ì‚­ì œë¨"

í•„ìš”í•œ ë¡œê·¸:
1. CloudTrail â†’ ëˆ„ê°€ ì–´ë–¤ APIë¥¼ í˜¸ì¶œí–ˆëŠ”ê°€?
2. VPC Flow Logs â†’ ì–´ë””ì„œ ì ‘ì†í–ˆëŠ”ê°€?
3. Application Logs â†’ ì •í™•íˆ ë¬´ì—‡ì„ ì‚­ì œí–ˆëŠ”ê°€?
4. S3 Access Logs â†’ ë°±ì—… íŒŒì¼ì€ ì ‘ê·¼í–ˆëŠ”ê°€?

â†’ í•œ ê°€ì§€ ë¡œê·¸ë§Œìœ¼ë¡œëŠ” ì „ì²´ ìƒí™© íŒŒì•… ë¶ˆê°€!
```

---

#### ì›ì¹™ 2: ì ì ˆí•œ ë³´ê´€ ê¸°ê°„ ì„¤ì •

**ë³´ê´€ ê¸°ê°„ ê°€ì´ë“œ:**

| ë¡œê·¸ ìœ í˜• | ê¶Œì¥ ë³´ê´€ ê¸°ê°„ | ê·¼ê±° |
|----------|--------------|------|
| **CloudTrail** | 1ë…„ ì´ìƒ | ë³´ì•ˆ ê°ì‚¬, ê·œì • ì¤€ìˆ˜ |
| **VPC Flow Logs** | 90ì¼ | ë„¤íŠ¸ì›Œí¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…, ì¹¨ì… íƒì§€ |
| **Application Logs** | 30~90ì¼ | ë””ë²„ê¹…, ì„±ëŠ¥ ë¶„ì„ |
| **S3 Access Logs** | 90ì¼~1ë…„ | ì•¡ì„¸ìŠ¤ íŒ¨í„´ ë¶„ì„, ê°ì‚¬ |
| **ELB Access Logs** | 30ì¼ | íŠ¸ë˜í”½ ë¶„ì„, ì„±ëŠ¥ ìµœì í™” |

**ì£¼ì˜ì‚¬í•­:**
```
âš ï¸ ë²•ì  ìš”êµ¬ì‚¬í•­ í™•ì¸:
- ê¸ˆìœµê¶Œ: ìµœì†Œ 5ë…„
- ì˜ë£Œ: ìµœì†Œ 7ë…„
- ì¼ë°˜ ê¸°ì—…: ìµœì†Œ 1ë…„

âš ï¸ ê³¼ë„í•œ ë³´ê´€ì˜ ìœ„í—˜:
- ë¶ˆí•„ìš”í•œ ìŠ¤í† ë¦¬ì§€ ë¹„ìš©
- ë²•ì  ë¶„ìŸ ì‹œ ë” ë§ì€ ë°ì´í„° ì œì¶œ ì˜ë¬´
- GDPR ë“± ê°œì¸ì •ë³´ ë³´í˜¸ë²• ìœ„ë°˜ ê°€ëŠ¥ì„±

â†’ íšŒì‚¬ ì •ì±…ê³¼ ë²•ê·œì— ë§ëŠ” ê¸°ì¤€ ì„¤ì •!
```

---

#### ì›ì¹™ 3: ë¬¸ì œ ì›ì¸ íŒŒì•… ë° ê°œì„ 

**ë¡œê·¸ ë¶„ì„ â†’ ì¸ì‚¬ì´íŠ¸ â†’ ê°œì„  ì‚¬ì´í´:**

```mermaid
graph LR
    A[ë¡œê·¸ ìˆ˜ì§‘] --> B[ë¡œê·¸ ë¶„ì„]
    B --> C[ë¬¸ì œ ë°œê²¬]
    C --> D[ì›ì¸ íŒŒì•…]
    D --> E[ê°œì„  ì¡°ì¹˜]
    E --> F[íš¨ê³¼ ê²€ì¦]
    F --> A

    style C fill:#ffcccc
    style E fill:#ccffcc
```

**ì‹¤ì œ ì‚¬ë¡€:**
```
Case 1: ì„±ëŠ¥ ì €í•˜ ë¬¸ì œ

ë¡œê·¸ ë¶„ì„:
â†’ ELB Access Logs: ì‘ë‹µ ì‹œê°„ ì¦ê°€ íŒ¨í„´ ë°œê²¬
â†’ CloudWatch Logs: íŠ¹ì • API ì—”ë“œí¬ì¸íŠ¸ ëŠë¦¼
â†’ Application Logs: DB ì¿¼ë¦¬ ì‹œê°„ ì¦ê°€

ì›ì¸ íŒŒì•…:
â†’ ë¹„íš¨ìœ¨ì ì¸ SQL ì¿¼ë¦¬

ê°œì„ :
â†’ ì¸ë±ìŠ¤ ì¶”ê°€, ì¿¼ë¦¬ ìµœì í™”
â†’ ì‘ë‹µ ì‹œê°„ 50% ê°ì†Œ

Case 2: ë¹„ì •ìƒ API í˜¸ì¶œ ì¦ê°€

ë¡œê·¸ ë¶„ì„:
â†’ CloudTrail: íŠ¹ì • IAM ì‚¬ìš©ìì˜ S3 GetObject API í­ì¦
â†’ VPC Flow Logs: ì™¸ë¶€ IPì—ì„œ ëŒ€ëŸ‰ ë‹¤ìš´ë¡œë“œ

ì›ì¸ íŒŒì•…:
â†’ ìê²© ì¦ëª… ìœ ì¶œ (Credentials Leak)

ê°œì„ :
â†’ IAM í‚¤ ì¦‰ì‹œ ë¹„í™œì„±í™”
â†’ IAM Access Analyzer í™œì„±í™”
â†’ ë¹„ë°€ë²ˆí˜¸ ì •ê¸° êµì²´ ì •ì±… ìˆ˜ë¦½
```

---

### ğŸ”’ ë¡œê·¸ ë³´í˜¸ ë°©ë²•

#### 1ï¸âƒ£ ì•”í˜¸í™” (Encryption)

**ì €ì¥ ì‹œ ì•”í˜¸í™” (Encryption at Rest):**

```
AWS ì„œë¹„ìŠ¤ë³„ ì•”í˜¸í™” ì§€ì›:

CloudTrail:
âœ“ S3 ë²„í‚·: SSE-S3 ë˜ëŠ” SSE-KMS
âœ“ CloudWatch Logs: KMS ì•”í˜¸í™” ì§€ì›

VPC Flow Logs:
âœ“ S3 ë²„í‚·: ìë™ ì•”í˜¸í™”
âœ“ CloudWatch Logs: KMS í‚¤ ì„¤ì • ê°€ëŠ¥

S3 Access Logs:
âœ“ ë¡œê·¸ ë²„í‚·ì— SSE í™œì„±í™”
```

**ì„¤ì • ì˜ˆì‹œ:**
```bash
# S3 ë²„í‚· ê¸°ë³¸ ì•”í˜¸í™” ì„¤ì •
aws s3api put-bucket-encryption \
  --bucket my-log-bucket \
  --server-side-encryption-configuration '{
    "Rules": [{
      "ApplyServerSideEncryptionByDefault": {
        "SSEAlgorithm": "aws:kms",
        "KMSMasterKeyID": "arn:aws:kms:region:account:key/key-id"
      }
    }]
  }'

# CloudWatch Logs ê·¸ë£¹ ì•”í˜¸í™”
aws logs associate-kms-key \
  --log-group-name /aws/cloudtrail/logs \
  --kms-key-id arn:aws:kms:region:account:key/key-id
```

---

#### 2ï¸âƒ£ ìœ„ë³€ì¡° ë°©ì§€ (Tamper-Proof)

**CloudTrail ë¡œê·¸ ë¬´ê²°ì„± ê²€ì¦:**

```mermaid
sequenceDiagram
    participant CT as CloudTrail
    participant S3 as S3 Bucket
    participant D as Digest File

    CT->>S3: ë¡œê·¸ íŒŒì¼ ì €ì¥<br/>log-file-1.json
    CT->>CT: í•´ì‹œ ê°’ ê³„ì‚°<br/>SHA-256(log-file-1)
    CT->>D: Digest íŒŒì¼ ìƒì„±<br/>digest-1.json
    D->>S3: Digest ì €ì¥

    Note over CT,D: 1ì‹œê°„ë§ˆë‹¤ ë°˜ë³µ

    CT->>S3: ë¡œê·¸ íŒŒì¼ ì €ì¥<br/>log-file-2.json
    CT->>CT: í•´ì‹œ ê°’ ê³„ì‚°<br/>SHA-256(log-file-2)
    CT->>D: Digest íŒŒì¼ ìƒì„±<br/>digest-2.json
    D->>S3: Digest ì €ì¥
```

**Digest íŒŒì¼ êµ¬ì¡°:**
```json
{
  "logFiles": [
    {
      "s3Bucket": "my-cloudtrail-bucket",
      "s3Object": "logs/2024/12/10/log-file-1.json.gz",
      "hashValue": "abc123def456...",
      "hashAlgorithm": "SHA-256",
      "startTime": "2024-12-10T10:00:00Z",
      "endTime": "2024-12-10T11:00:00Z"
    }
  ],
  "digestSignature": "xyz789...",
  "previousDigestHashValue": "previous-hash..."
}
```

**ë¬´ê²°ì„± ê²€ì¦ í”„ë¡œì„¸ìŠ¤:**
```
1. ì›ë³¸ ë¡œê·¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
   â”” log-file-1.json.gz

2. í•´ì‹œ ê°’ ì¬ê³„ì‚°
   â”” SHA-256(log-file-1.json.gz) = hash-computed

3. Digest íŒŒì¼ì—ì„œ ì›ë³¸ í•´ì‹œ í™•ì¸
   â”” digest-1.json â†’ hashValue = hash-original

4. ë¹„êµ
   â”” hash-computed == hash-original?
     â”œ Yes â†’ ë³€ì¡°ë˜ì§€ ì•ŠìŒ âœ“
     â”” No  â†’ ë³€ì¡° ê°ì§€! âœ—
```

**CLIë¥¼ í†µí•œ ê²€ì¦:**
```bash
# CloudTrail ë¡œê·¸ ë¬´ê²°ì„± ê²€ì¦
aws cloudtrail validate-logs \
  --trail-arn arn:aws:cloudtrail:region:account:trail/MyTrail \
  --start-time 2024-12-10T00:00:00Z \
  --end-time 2024-12-10T23:59:59Z

# ê²°ê³¼ ì˜ˆì‹œ:
# Validating log files for trail arn:aws:cloudtrail:...
# Results requested for 2024-12-10 00:00:00 to 2024-12-10 23:59:59
# Results found for 2024-12-10 00:00:00 to 2024-12-10 23:59:59
# 24/24 digest files valid
# 240/240 log files valid
```

---

#### 3ï¸âƒ£ S3 ê°ì²´ ì ê¸ˆ (Object Lock)

**Immutable ë¡œê·¸ ì €ì¥:**

```
S3 Object Lock ëª¨ë“œ:

1. Governance Mode:
   - íŠ¹ì • ê¶Œí•œ ìˆëŠ” ì‚¬ìš©ìë§Œ ì‚­ì œ/ìˆ˜ì • ê°€ëŠ¥
   - ìœ ì—°í•œ ê´€ë¦¬ í•„ìš” ì‹œ ì‚¬ìš©

2. Compliance Mode:
   - ë£¨íŠ¸ ì‚¬ìš©ì í¬í•¨ ëˆ„êµ¬ë„ ì‚­ì œ/ìˆ˜ì • ë¶ˆê°€
   - ë³´ê´€ ê¸°ê°„ ë™ì•ˆ ì™„ì „í•œ ë¶ˆë³€ì„±
   - ê·œì • ì¤€ìˆ˜ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
```

**ì„¤ì • ì˜ˆì‹œ:**
```bash
# S3 ë²„í‚·ì— Object Lock í™œì„±í™” (ë²„í‚· ìƒì„± ì‹œë§Œ ê°€ëŠ¥)
aws s3api create-bucket \
  --bucket my-immutable-logs \
  --object-lock-enabled-for-bucket

# Object Lock êµ¬ì„±
aws s3api put-object-lock-configuration \
  --bucket my-immutable-logs \
  --object-lock-configuration '{
    "ObjectLockEnabled": "Enabled",
    "Rule": {
      "DefaultRetention": {
        "Mode": "COMPLIANCE",
        "Days": 365
      }
    }
  }'
```

**íš¨ê³¼:**
```
ë¡œê·¸ íŒŒì¼ ë³´í˜¸:
- ìƒì„± í›„ 365ì¼ê°„ ì‚­ì œ ë¶ˆê°€
- ìˆ˜ì • ë¶ˆê°€
- ê´€ë¦¬ìë„ ì‚­ì œ ë¶ˆê°€

ë³´ì•ˆ ì‚¬ê³  ì¡°ì‚¬:
â†’ ê³µê²©ìê°€ ë¡œê·¸ë¥¼ ì‚­ì œí•˜ë ¤ í•´ë„ ë¶ˆê°€ëŠ¥
â†’ ì™„ì „í•œ ê°ì‚¬ ì¶”ì  ë³´ì¥
```

---

#### 4ï¸âƒ£ ì ‘ê·¼ ì œì–´ (Access Control)

**IAM ì •ì±… ì˜ˆì‹œ:**

**ë¡œê·¸ ì½ê¸° ì „ìš© ì—­í• :**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::my-log-bucket",
        "arn:aws:s3:::my-log-bucket/*"
      ]
    },
    {
      "Effect": "Allow",
      "Action": [
        "logs:DescribeLogGroups",
        "logs:DescribeLogStreams",
        "logs:GetLogEvents",
        "logs:FilterLogEvents"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Deny",
      "Action": [
        "s3:DeleteObject",
        "s3:PutObject",
        "logs:DeleteLogGroup",
        "logs:DeleteLogStream"
      ],
      "Resource": "*"
    }
  ]
}
```

**ë³´ì•ˆ ê°ì‚¬ ì—­í•  (ì œí•œì ):**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "cloudtrail:LookupEvents",
        "cloudtrail:GetTrailStatus"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "logs:StartQuery",
        "logs:GetQueryResults"
      ],
      "Resource": "arn:aws:logs:*:*:log-group:/aws/cloudtrail/*"
    }
  ]
}
```

---

### ğŸ“Š ê¸°ë³¸ í™œì„±í™” ê¶Œì¥ ë¡œê·¸

**í•„ìˆ˜ ë¡œê·¸:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. VPC Flow Logs                            â”‚
â”‚    â€¢ ENI ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì¶”ì                â”‚
â”‚    â€¢ ë³´ì•ˆ ê·¸ë£¹/NACL íš¨ê³¼ í™•ì¸               â”‚
â”‚    â€¢ ë„¤íŠ¸ì›Œí¬ ì¥ì•  íŠ¸ëŸ¬ë¸”ìŠˆíŒ…               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. S3 Access Logs                           â”‚
â”‚    â€¢ ë²„í‚· ì ‘ê·¼ ê¸°ë¡                         â”‚
â”‚    â€¢ ë°ì´í„° ë‹¤ìš´ë¡œë“œ íŒ¨í„´                   â”‚
â”‚    â€¢ ë³´ì•ˆ ê°ì‚¬                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ELB Access Logs                          â”‚
â”‚    â€¢ HTTP/HTTPS ìš”ì²­ ê¸°ë¡                   â”‚
â”‚    â€¢ í´ë¼ì´ì–¸íŠ¸ IP ì¶”ì                      â”‚
â”‚    â€¢ ì‘ë‹µ ì‹œê°„ ë¶„ì„                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. CloudWatch Logs                          â”‚
â”‚    â€¢ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ ì¤‘ì•™í™”               â”‚
â”‚    â€¢ Lambda ì‹¤í–‰ ë¡œê·¸                       â”‚
â”‚    â€¢ ì»¤ìŠ¤í…€ ë¡œê·¸ ìˆ˜ì§‘                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. CloudTrail                               â”‚
â”‚    â€¢ AWS API í˜¸ì¶œ ê¸°ë¡                      â”‚
â”‚    â€¢ ëˆ„ê°€, ì–¸ì œ, ë¬´ì—‡ì„ í–ˆëŠ”ì§€              â”‚
â”‚    â€¢ ë³´ì•ˆ ê°ì‚¬ ë° ê·œì • ì¤€ìˆ˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ AWS CloudTrail - API í™œë™ ì¶”ì 

### ğŸ” CloudTrail ê°œë…

**CloudTrailì´ë€?**
- AWSì—ì„œ ë°œìƒí•˜ëŠ” **ëª¨ë“  API í˜¸ì¶œì„ ê¸°ë¡**í•˜ëŠ” ì„œë¹„ìŠ¤
- "ëˆ„ê°€ (Who), ì–¸ì œ (When), ë¬´ì—‡ì„ (What) í–ˆëŠ”ì§€" ì¶”ì 

**ê¸°ë¡ë˜ëŠ” ì •ë³´:**
```
âœ“ IAM ì‚¬ìš©ì/ì—­í•  ì •ë³´
âœ“ API í˜¸ì¶œ ì‹œê°„
âœ“ ìš”ì²­ íŒŒë¼ë¯¸í„°
âœ“ ì‘ë‹µ ìš”ì†Œ
âœ“ ì†ŒìŠ¤ IP ì£¼ì†Œ
âœ“ ì‚¬ìš©í•œ ë„êµ¬ (Console, CLI, SDK)
```

---

### ğŸ“‹ CloudTrail ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "AWS ì„œë¹„ìŠ¤"
        A[EC2]
        B[S3]
        C[IAM]
        D[RDS]
        E[Lambda]
    end

    subgraph "CloudTrail"
        F[Event Capture<br/>ì´ë²¤íŠ¸ ìˆ˜ì§‘]
        G[Event Processing<br/>ì´ë²¤íŠ¸ ì²˜ë¦¬]
    end

    subgraph "ì €ì¥ì†Œ"
        H[(S3 Bucket<br/>ì¥ê¸° ë³´ê´€)]
        I[(CloudWatch Logs<br/>ì‹¤ì‹œê°„ ë¶„ì„)]
    end

    subgraph "ë¶„ì„ & ì•ŒëŒ"
        J[CloudWatch Logs Insights<br/>ëŒ€í™”í˜• ì¿¼ë¦¬]
        K[Metric Filters<br/>ì§€í‘œ ìƒì„±]
        L[CloudWatch Alarms<br/>ì•ŒëŒ]
    end

    A --> F
    B --> F
    C --> F
    D --> F
    E --> F

    F --> G
    G --> H
    G --> I

    I --> J
    I --> K
    K --> L
```

---

### ğŸ—‚ï¸ ì´ë²¤íŠ¸ ìœ í˜•

#### 1ï¸âƒ£ ê´€ë¦¬ ì´ë²¤íŠ¸ (Management Events)

**ì •ì˜:**
- AWS ë¦¬ì†ŒìŠ¤ì˜ ê´€ë¦¬ ì‘ì—… ê¸°ë¡
- ì œì–´ í”Œë ˆì¸ (Control Plane) ì‘ì—…

**ì˜ˆì‹œ:**
```
âœ“ EC2 ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘/ì¤‘ì§€
  - StartInstances
  - StopInstances
  - TerminateInstances

âœ“ S3 ë²„í‚· ìƒì„±/ì‚­ì œ
  - CreateBucket
  - DeleteBucket
  - PutBucketPolicy

âœ“ IAM ì‚¬ìš©ì/ì—­í•  ê´€ë¦¬
  - CreateUser
  - AttachUserPolicy
  - CreateRole

âœ“ VPC êµ¬ì„± ë³€ê²½
  - CreateVpc
  - CreateSubnet
  - AuthorizeSecurityGroupIngress

âœ“ ì½˜ì†” ë¡œê·¸ì¸
  - ConsoleLogin
```

**ê¸°ë³¸ ì„¤ì •:**
```
âœ“ ë¬´ë£Œë¡œ ì œê³µ (90ì¼ ë³´ê´€)
âœ“ ìë™ í™œì„±í™”
âœ“ Event Historyì—ì„œ í™•ì¸ ê°€ëŠ¥
```

---

#### 2ï¸âƒ£ ë°ì´í„° ì´ë²¤íŠ¸ (Data Events)

**ì •ì˜:**
- ë¦¬ì†ŒìŠ¤ ë‚´ë¶€ ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë°ì´í„° ì‘ì—…
- ë°ì´í„° í”Œë ˆì¸ (Data Plane) ì‘ì—…

**ì˜ˆì‹œ:**
```
S3 ê°ì²´ ì‘ì—…:
âœ“ GetObject - ê°ì²´ ë‹¤ìš´ë¡œë“œ
âœ“ PutObject - ê°ì²´ ì—…ë¡œë“œ
âœ“ DeleteObject - ê°ì²´ ì‚­ì œ

DynamoDB ì‘ì—…:
âœ“ PutItem - ì•„ì´í…œ ì¶”ê°€
âœ“ DeleteItem - ì•„ì´í…œ ì‚­ì œ
âœ“ UpdateItem - ì•„ì´í…œ ìˆ˜ì •
âœ“ GetItem - ì•„ì´í…œ ì¡°íšŒ

Lambda:
âœ“ Invoke - í•¨ìˆ˜ ì‹¤í–‰
```

**íŠ¹ì§•:**
```
âš ï¸ ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„±í™”
âš ï¸ í™œì„±í™” ì‹œ ì¶”ê°€ ë¹„ìš© ë°œìƒ
âš ï¸ ëŒ€ëŸ‰ì˜ ë¡œê·¸ ìƒì„± ê°€ëŠ¥

ì‚¬ìš© ì‚¬ë¡€:
- S3 ë²„í‚·ì˜ ë¯¼ê°í•œ ë°ì´í„° ì ‘ê·¼ ì¶”ì 
- DynamoDB í…Œì´ë¸” ë³€ê²½ ê°ì‚¬
- Lambda í•¨ìˆ˜ í˜¸ì¶œ ëª¨ë‹ˆí„°ë§
```

---

#### 3ï¸âƒ£ Insights ì´ë²¤íŠ¸ (Insights Events)

**ì •ì˜:**
- CloudTrailì´ **ë¹„ì •ìƒì ì¸ í™œë™**ì„ ìë™ íƒì§€

**íƒì§€ ëŒ€ìƒ:**
```
âœ“ ë¹„ì •ìƒì ìœ¼ë¡œ ë§ì€ API í˜¸ì¶œ
  - í‰ì†Œ 10íšŒ/ì‹œê°„ â†’ ê°‘ìê¸° 1000íšŒ/ì‹œê°„

âœ“ ì˜¤ë¥˜ìœ¨ ì¦ê°€
  - AccessDenied ì—ëŸ¬ ê¸‰ì¦

âœ“ ë¹„ì •ìƒì ì¸ ì‹œê°„ëŒ€ í™œë™
  - ìƒˆë²½ ì‹œê°„ì— ê°‘ìê¸° ë§ì€ ë¦¬ì†ŒìŠ¤ ìƒì„±

âœ“ ìƒˆë¡œìš´ ì‚¬ìš©ì í™œë™
  - í‰ì†Œ ì‚¬ìš©í•˜ì§€ ì•Šë˜ API ê°‘ìê¸° í˜¸ì¶œ
```

**ì˜ˆì‹œ:**
```
ì •ìƒ íŒ¨í„´:
ì›”ìš”ì¼~ê¸ˆìš”ì¼ 9:00~18:00
- EC2 RunInstances: í‰ê·  5íšŒ/ì‹œê°„

ë¹„ì •ìƒ íƒì§€:
í† ìš”ì¼ 03:00
- EC2 RunInstances: 50íšŒ/ì‹œê°„ âš ï¸

â†’ CloudTrail Insights ì´ë²¤íŠ¸ ìƒì„±!
â†’ ìë™ ì•ŒëŒ ë°œì†¡ ê°€ëŠ¥
```

---

### ğŸ“„ CloudTrail ë¡œê·¸ í˜•ì‹

**ì „ì²´ êµ¬ì¡°:**
```json
{
  "eventVersion": "1.08",
  "userIdentity": {
    "type": "IAMUser",
    "principalId": "AIDAI...",
    "arn": "arn:aws:iam::123456789012:user/alice",
    "accountId": "123456789012",
    "accessKeyId": "AKIAI...",
    "userName": "alice"
  },
  "eventTime": "2024-12-10T14:30:15Z",
  "eventSource": "ec2.amazonaws.com",
  "eventName": "StopInstances",
  "awsRegion": "ap-northeast-2",
  "sourceIPAddress": "203.0.113.50",
  "userAgent": "aws-cli/2.13.0",
  "requestParameters": {
    "instancesSet": {
      "items": [
        {
          "instanceId": "i-0abcd1234efgh5678"
        }
      ]
    }
  },
  "responseElements": {
    "instancesSet": {
      "items": [
        {
          "instanceId": "i-0abcd1234efgh5678",
          "currentState": {
            "code": 64,
            "name": "stopping"
          },
          "previousState": {
            "code": 16,
            "name": "running"
          }
        }
      ]
    }
  }
}
```

**ì£¼ìš” í•„ë“œ ì„¤ëª…:**

| í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ ê°’ |
|------|------|--------|
| **userIdentity** | API í˜¸ì¶œì ì •ë³´ | IAM ì‚¬ìš©ì alice |
| **eventTime** | ì´ë²¤íŠ¸ ë°œìƒ ì‹œê° (UTC) | 2024-12-10T14:30:15Z |
| **eventSource** | í˜¸ì¶œëœ ì„œë¹„ìŠ¤ | ec2.amazonaws.com |
| **eventName** | API ì‘ì—… ì´ë¦„ | StopInstances |
| **awsRegion** | ë¦¬ì „ | ap-northeast-2 (ì„œìš¸) |
| **sourceIPAddress** | ìš”ì²­ IP ì£¼ì†Œ | 203.0.113.50 |
| **userAgent** | ì‚¬ìš© ë„êµ¬ | aws-cli/2.13.0 |
| **requestParameters** | ìš”ì²­ íŒŒë¼ë¯¸í„° | { instanceId: "i-0abc..." } |
| **responseElements** | ì‘ë‹µ ìš”ì†Œ | í˜„ì¬ ìƒíƒœ: stopping |

---

### ğŸ’¾ CloudTrail ë¡œê·¸ ì €ì¥

**ì €ì¥ ì˜µì…˜:**

```mermaid
graph LR
    A[CloudTrail] --> B[Event History<br/>90ì¼ ë¬´ë£Œ]
    A --> C[S3 Bucket<br/>ì¥ê¸° ë³´ê´€]
    A --> D[CloudWatch Logs<br/>ì‹¤ì‹œê°„ ë¶„ì„]

    C --> E[S3 Lifecycle<br/>â†’ Glacier]
    C --> F[Athena ì¿¼ë¦¬]
    D --> G[Logs Insights]
    D --> H[Metric Filters]
```

**ë¹„êµí‘œ:**

| ì €ì¥ì†Œ | ë³´ê´€ ê¸°ê°„ | ë¹„ìš© | ì‚¬ìš© ì‚¬ë¡€ |
|--------|---------|------|----------|
| **Event History** | 90ì¼ (ê³ ì •) | ë¬´ë£Œ | ìµœê·¼ ì´ë²¤íŠ¸ ë¹ ë¥¸ ì¡°íšŒ |
| **S3** | ë¬´ì œí•œ | ~$0.023/GB | ì¥ê¸° ë³´ê´€, ê·œì • ì¤€ìˆ˜, ë¹…ë°ì´í„° ë¶„ì„ |
| **CloudWatch Logs** | ì‚¬ìš©ì ì„¤ì • | ~$0.50/GB | ì‹¤ì‹œê°„ ë¶„ì„, ì•ŒëŒ, ëŒ€ì‹œë³´ë“œ |

---

### ğŸ”§ CloudTrail Trail (ì¶”ì ) ìƒì„± ì‹¤ìŠµ

#### Step 1: CloudTrail ì½˜ì†” ì ‘ì†

```
1. AWS Management Console
2. ê²€ìƒ‰: "CloudTrail"
3. CloudTrail ëŒ€ì‹œë³´ë“œ ì§„ì…
```

---

#### Step 2: Trail ìƒì„±

**ê¸°ë³¸ ì„¤ì •:**
```
[ Create trail ]

Trail name: [my-management-trail]

Enable for all accounts in my organization: â–¡
(Organization ì‚¬ìš© ì‹œ ì²´í¬)
```

---

**S3 ì €ì¥ ì„¤ì •:**
```
Storage location:
  â¦¿ Create new S3 bucket
  â—‹ Use existing S3 bucket

Bucket name: [aws-cloudtrail-logs-123456789012-abc123]
(ìë™ ìƒì„±ë˜ëŠ” ì´ë¦„ ì‚¬ìš© ê¶Œì¥)

Log file SSE-KMS encryption:
  â˜‘ Enabled (ê¶Œì¥)

  â¦¿ New (ìƒˆ KMS í‚¤ ìƒì„±)
  AWS KMS alias: [cloudtrail-key]

  â—‹ Existing (ê¸°ì¡´ KMS í‚¤ ì‚¬ìš©)

Log file validation:
  â˜‘ Enabled (ê¶Œì¥)
  â†’ ë¬´ê²°ì„± ê²€ì¦ì„ ìœ„í•œ Digest íŒŒì¼ ìƒì„±
```

**CloudWatch Logs í†µí•©:**
```
CloudWatch Logs:
  â˜‘ Enabled

Log group:
  â¦¿ New
  Log group name: [/aws/cloudtrail/management-events]

  IAM Role:
  â¦¿ New
  Role name: [CloudTrailRoleForCloudWatchLogs]
```

---

**ì´ë²¤íŠ¸ ì„ íƒ:**
```
[ Choose log events ]

Management events:
  â˜‘ Read events (ì˜ˆ: DescribeInstances, ListBuckets)
  â˜‘ Write events (ì˜ˆ: RunInstances, PutObject)

Data events:
  â–¡ S3 (ì„ íƒ ì‹œ S3 ë²„í‚· ì§€ì • í•„ìš”)
  â–¡ Lambda (ì„ íƒ ì‹œ í•¨ìˆ˜ ì§€ì • í•„ìš”)

Insights events:
  â˜‘ API call rate (API í˜¸ì¶œ ë¹ˆë„ ì´ìƒ íƒì§€)
  â˜‘ API error rate (API ì˜¤ë¥˜ìœ¨ ì´ìƒ íƒì§€)

Exclude AWS KMS events:
  â˜‘ Exclude (KMS í˜¸ì¶œì´ ë„ˆë¬´ ë§ì•„ ë¡œê·¸ í­ì¦ ë°©ì§€)

Exclude Amazon RDS Data API events:
  â˜‘ Exclude (ë¶ˆí•„ìš”í•œ RDS API ë¡œê·¸ ì œì™¸)
```

---

**IAM ì—­í•  ìƒì„± (ìë™):**
```
ìƒì„±ë˜ëŠ” IAM ì—­í•  ì •ì±…:

{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AWSCloudTrailCreateLogStream",
      "Effect": "Allow",
      "Action": "logs:CreateLogStream",
      "Resource": "arn:aws:logs:*:*:log-group:/aws/cloudtrail/*:log-stream:*"
    },
    {
      "Sid": "AWSCloudTrailPutLogEvents",
      "Effect": "Allow",
      "Action": "logs:PutLogEvents",
      "Resource": "arn:aws:logs:*:*:log-group:/aws/cloudtrail/*:log-stream:*"
    }
  ]
}
```

---

#### Step 3: Trail ìƒì„± ì™„ë£Œ

```
[ Review and create ]

í™•ì¸ ë‚´ìš©:
âœ“ Trail name: my-management-trail
âœ“ S3 bucket: aws-cloudtrail-logs-123456789012-abc123
âœ“ Encryption: KMS (cloudtrail-key)
âœ“ Log validation: Enabled
âœ“ CloudWatch Logs: /aws/cloudtrail/management-events
âœ“ Management events: Read/Write
âœ“ Insights events: Enabled

[ Create trail ]
```

---

#### Step 4: ë¡œê·¸ í™•ì¸

**S3 ë²„í‚· êµ¬ì¡°:**
```
aws-cloudtrail-logs-123456789012-abc123/
â””â”€â”€ AWSLogs/
    â””â”€â”€ 123456789012/
        â””â”€â”€ CloudTrail/
            â””â”€â”€ ap-northeast-2/
                â””â”€â”€ 2024/
                    â””â”€â”€ 12/
                        â””â”€â”€ 10/
                            â”œâ”€â”€ 123456789012_CloudTrail_ap-northeast-2_20241210T1400Z_abc.json.gz
                            â”œâ”€â”€ 123456789012_CloudTrail_ap-northeast-2_20241210T1410Z_def.json.gz
                            â””â”€â”€ ...

ë””ë ‰í† ë¦¬:
â””â”€â”€ AWSLogs/
    â””â”€â”€ 123456789012/
        â””â”€â”€ CloudTrail-Digest/
            â””â”€â”€ ap-northeast-2/
                â””â”€â”€ 2024/
                    â””â”€â”€ 12/
                        â””â”€â”€ 10/
                            â”œâ”€â”€ 123456789012_CloudTrail-Digest_ap-northeast-2_20241210T1400Z_abc.json.gz
                            â””â”€â”€ ...
```

**CloudWatch Logs í™•ì¸:**
```
1. CloudWatch ì½˜ì†”
2. Logs â†’ Log groups
3. /aws/cloudtrail/management-events ì„ íƒ
4. Log streams í™•ì¸
   - ë¦¬ì „ë³„ë¡œ ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ ìƒì„±ë¨
   - ì˜ˆ: 123456789012_CloudTrail_ap-northeast-2
```

**ë¡œê·¸ í™•ì¸ ì˜ˆì‹œ:**
```
ì´ë²¤íŠ¸ ë‚´ìš©:
{
  "eventName": "CreateTrail",
  "userIdentity": {
    "userName": "admin"
  },
  "eventTime": "2024-12-10T05:30:00Z",
  "requestParameters": {
    "name": "my-management-trail"
  }
}
```

---

### ğŸ” Event History ì‚¬ìš©

**Event History ì ‘ê·¼:**
```
CloudTrail ì½˜ì†” â†’ Event history

ê¸°ë³¸ ë³´ê¸°:
- ìµœê·¼ 90ì¼ ì´ë²¤íŠ¸
- ê´€ë¦¬ ì´ë²¤íŠ¸ë§Œ (ë¬´ë£Œ)
```

**í•„í„°ë§ ì˜µì…˜:**

```
[ Event history ]

Filter by:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Event name (API ì´ë¦„)               â”‚
â”‚   ì˜ˆ: StopInstances, CreateBucket    â”‚
â”‚                                      â”‚
â”‚ â€¢ Event source (ì„œë¹„ìŠ¤)               â”‚
â”‚   ì˜ˆ: ec2.amazonaws.com              â”‚
â”‚                                      â”‚
â”‚ â€¢ Resource type                      â”‚
â”‚   ì˜ˆ: AWS::EC2::Instance             â”‚
â”‚                                      â”‚
â”‚ â€¢ Resource name                      â”‚
â”‚   ì˜ˆ: i-0abc123                      â”‚
â”‚                                      â”‚
â”‚ â€¢ User name                          â”‚
â”‚   ì˜ˆ: alice, Bob                     â”‚
â”‚                                      â”‚
â”‚ â€¢ Time range                         â”‚
â”‚   ìµœê·¼ 90ì¼ ë‚´ ì„ íƒ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‹¤ìŠµ ì˜ˆì‹œ:**

**1. EC2 ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘ ì´ë²¤íŠ¸ ì°¾ê¸°:**
```
Filter:
- Event name: RunInstances
- Time range: Last 7 days

ê²°ê³¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Event time      â”‚ User      â”‚ Event name   â”‚ Resource   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 12/10 14:30 KST â”‚ alice     â”‚ RunInstances â”‚ i-0abc123  â”‚
â”‚ 12/09 10:15 KST â”‚ bob       â”‚ RunInstances â”‚ i-0def456  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. íŠ¹ì • ì‚¬ìš©ì í™œë™ ì¶”ì :**
```
Filter:
- User name: alice
- Time range: Today

ê²°ê³¼:
- StopInstances (14:30)
- TerminateInstances (14:35)
- CreateSecurityGroup (15:00)
- AuthorizeSecurityGroupIngress (15:02)
```

**3. S3 ë²„í‚· ì‘ì—… ì°¾ê¸°:**
```
Filter:
- Event source: s3.amazonaws.com
- Event name: CreateBucket

ê²°ê³¼:
aliceê°€ 12/10 10:00ì— my-data-bucket ìƒì„±
```

---

## 3ï¸âƒ£ Amazon CloudWatch Logs

### ğŸ“š CloudWatch Logs ê°œë…

**CloudWatch Logsë€?**
- AWS ì„œë¹„ìŠ¤ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ë¡œê·¸ë¥¼ ì¤‘ì•™ì—ì„œ ìˆ˜ì§‘, ì €ì¥, ë¶„ì„**í•˜ëŠ” ì„œë¹„ìŠ¤
- ë‹¨ìˆœ ì €ì¥ì†Œê°€ ì•„ë‹Œ **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° ì•ŒëŒ** ê¸°ëŠ¥ ì œê³µ

**ì£¼ìš” ìš©ë„:**
```
âœ“ AWS ì„œë¹„ìŠ¤ ë¡œê·¸ ì €ì¥
  - CloudTrail, VPC Flow Logs, Lambda, etc.

âœ“ EC2 ì¸ìŠ¤í„´ìŠ¤ ë¡œê·¸ ìˆ˜ì§‘
  - ì›¹ ì„œë²„ ë¡œê·¸ (Apache, Nginx)
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
  - ì‹œìŠ¤í…œ ë¡œê·¸ (/var/log/*)

âœ“ ì‹¤ì‹œê°„ ë¡œê·¸ ë¶„ì„
  - CloudWatch Logs Insights

âœ“ ì•ŒëŒ ìƒì„±
  - Metric Filters â†’ CloudWatch Alarms
```

---

### ğŸ—‚ï¸ CloudWatch Logs êµ¬ì¡°

```mermaid
graph TB
    A[CloudWatch Logs] --> B[Log Group 1<br/>/aws/lambda/my-function]
    A --> C[Log Group 2<br/>/aws/ec2/webserver]
    A --> D[Log Group 3<br/>/aws/cloudtrail/logs]

    B --> B1[Log Stream 1<br/>2024/12/10 10:00]
    B --> B2[Log Stream 2<br/>2024/12/10 11:00]

    C --> C1[Log Stream 1<br/>i-0abc123]
    C --> C2[Log Stream 2<br/>i-0def456]

    D --> D1[Log Stream 1<br/>ap-northeast-2]

    B1 --> B1A[Log Event 1<br/>START RequestId...]
    B1 --> B1B[Log Event 2<br/>Processing data...]
    B1 --> B1C[Log Event 3<br/>END RequestId...]
```

**ê³„ì¸µ êµ¬ì¡°:**
```
CloudWatch Logs
â”œâ”€â”€ Log Group (ë¡œê·¸ ê·¸ë£¹) - ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ Log Stream (ë¡œê·¸ ìŠ¤íŠ¸ë¦¼) - íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ Log Event (ë¡œê·¸ ì´ë²¤íŠ¸) - ë¼ì¸
â”‚   â”‚   â”œâ”€â”€ Log Event
â”‚   â”‚   â””â”€â”€ Log Event
â”‚   â””â”€â”€ Log Stream
â”‚       â”œâ”€â”€ Log Event
â”‚       â””â”€â”€ Log Event
â””â”€â”€ Log Group
    â””â”€â”€ Log Stream
        â””â”€â”€ Log Event
```

---

**Log Group (ë¡œê·¸ ê·¸ë£¹):**
```
ì •ì˜:
- ë¡œê·¸ë¥¼ ë¶„ë¥˜í•˜ëŠ” ì»¨í…Œì´ë„ˆ
- ë³´ê´€ ê¸°ê°„, ì•”í˜¸í™”, ê¶Œí•œ ì„¤ì • ë‹¨ìœ„

ëª…ëª… ê·œì¹™:
- AWS ì„œë¹„ìŠ¤: /aws/<service>/<resource>
  ì˜ˆ: /aws/lambda/my-function
      /aws/ec2/instance/i-0abc123

- ì»¤ìŠ¤í…€: ììœ ë¡­ê²Œ ì§€ì •
  ì˜ˆ: /production/webserver
      /staging/api-logs
```

**Log Stream (ë¡œê·¸ ìŠ¤íŠ¸ë¦¼):**
```
ì •ì˜:
- ë™ì¼í•œ ì†ŒìŠ¤ì˜ ë¡œê·¸ ì´ë²¤íŠ¸ ì‹œí€€ìŠ¤
- ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬ëœ ë¡œê·¸ ë¼ì¸ ì§‘í•©

ì˜ˆì‹œ:
Log Group: /aws/lambda/data-processor
â”œâ”€â”€ Log Stream: 2024/12/10/[$LATEST]abc123
â”‚   â””â”€â”€ í•¨ìˆ˜ ì‹¤í–‰ ë¡œê·¸
â””â”€â”€ Log Stream: 2024/12/10/[$LATEST]def456
    â””â”€â”€ ë‹¤ìŒ ì‹¤í–‰ ë¡œê·¸

Log Group: /production/webserver
â”œâ”€â”€ Log Stream: i-0abc123 (ì›¹ì„œë²„ 1)
â””â”€â”€ Log Stream: i-0def456 (ì›¹ì„œë²„ 2)
```

**Log Event (ë¡œê·¸ ì´ë²¤íŠ¸):**
```
ì •ì˜:
- íƒ€ì„ìŠ¤íƒ¬í”„ + ë©”ì‹œì§€ë¡œ êµ¬ì„±ëœ ê°œë³„ ë¡œê·¸ ë¼ì¸

ì˜ˆì‹œ:
{
  "timestamp": 1702195200000,
  "message": "2024-12-10 14:30:00 ERROR Failed to connect to database"
}
```

---

### ğŸ”§ CloudWatch Logs ê·¸ë£¹ ìƒì„± ì‹¤ìŠµ

#### Step 1: ë¡œê·¸ ê·¸ë£¹ ìƒì„±

```
CloudWatch ì½˜ì†” â†’ Logs â†’ Log groups

[ Create log group ]

Log group name: [/custom/vpc-flow-logs]

Retention setting:
  â¦¿ 1 week
  â—‹ 1 month
  â—‹ 3 months
  â—‹ 6 months
  â—‹ 1 year
  â—‹ Never expire

Log class:
  â¦¿ Standard (ê²€ìƒ‰ ë° ì¿¼ë¦¬ ê°€ëŠ¥)
  â—‹ Infrequent Access (ì €ë ´, ê²€ìƒ‰ ì œí•œì )

KMS key ARN: (ì„ íƒì‚¬í•­)
  [ ] (ì•”í˜¸í™” ë¶ˆí•„ìš” ì‹œ ë¹„ì›Œë‘ )

[ Create log group ]
```

**ìƒì„± ì™„ë£Œ:**
```
Log group created: /custom/vpc-flow-logs

Details:
- ARN: arn:aws:logs:ap-northeast-2:123456789012:log-group:/custom/vpc-flow-logs
- Retention: 7 days
- Stored bytes: 0 (ì•„ì§ ë¡œê·¸ ì—†ìŒ)
```

---

#### Step 2: IAM ì—­í•  ìƒì„± (VPC Flow Logsìš©)

**Trust Policy (ì‹ ë¢° ì •ì±…):**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "Service": "vpc-flow-logs.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
```

**IAM ì½˜ì†”ì—ì„œ ìƒì„±:**
```
IAM â†’ Roles â†’ Create role

Trusted entity type:
  â¦¿ AWS service
  â—‹ AWS account
  â—‹ Web identity
  â—‹ SAML 2.0 federation
  â—‹ Custom trust policy

Use case:
  [Custom trust policy] ì„ íƒ

Custom trust policy:
  (ìœ„ì˜ Trust Policy JSON ë¶™ì—¬ë„£ê¸°)

[ Next ]

Permissions:
  ê²€ìƒ‰: CloudWatch
  ì„ íƒ: CloudWatchLogsFullAccess

[ Next ]

Role name: [VPCFlowLogsRole]
Description: [Allows VPC Flow Logs to write to CloudWatch Logs]

[ Create role ]
```

---

### ğŸŒŠ VPC Flow Logs ì‹¤ìŠµ

#### Step 1: Bastion ì„œë²„ ì¤€ë¹„

**EC2 ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘:**
```
EC2 â†’ Instances â†’ ê¸°ì¡´ Bastion ì„œë²„ ì„ íƒ

[ Instance state ] â†’ [ Start instance ]

í™•ì¸:
âœ“ Instance State: Running
âœ“ Public IPv4: 13.125.XX.XX
âœ“ Network interface: eni-0abc123def456
```

**ENI ID í™•ì¸:**
```
Instance ì„ íƒ â†’ Networking íƒ­

Network interfaces:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Network interface ID: eni-0abc123def456â”‚
â”‚ Subnet ID: subnet-0xyz...              â”‚
â”‚ VPC ID: vpc-0123...                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†’ eni-0abc123def456 ê¸°ë¡í•´ ë‘ê¸°!
```

---

#### Step 2: VPC Flow Logs ìƒì„±

```
VPC ì½˜ì†” â†’ Your VPCs â†’ VPC ì„ íƒ

[ Actions ] â†’ [ Create flow log ]

Settings:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name: [my-vpc-flow-log]                  â”‚
â”‚                                          â”‚
â”‚ Filter:                                  â”‚
â”‚   â¦¿ All                                  â”‚
â”‚   â—‹ Accept (í—ˆìš©ëœ íŠ¸ë˜í”½ë§Œ)              â”‚
â”‚   â—‹ Reject (ì°¨ë‹¨ëœ íŠ¸ë˜í”½ë§Œ)              â”‚
â”‚                                          â”‚
â”‚ Maximum aggregation interval:            â”‚
â”‚   â—‹ 10 minutes                           â”‚
â”‚   â¦¿ 1 minute (ë¹ ë¥¸ í™•ì¸ì„ ìœ„í•´)           â”‚
â”‚                                          â”‚
â”‚ Destination:                             â”‚
â”‚   â¦¿ Send to CloudWatch Logs              â”‚
â”‚   â—‹ Send to Amazon S3                    â”‚
â”‚   â—‹ Send to Amazon Data Firehose         â”‚
â”‚                                          â”‚
â”‚ Destination log group:                   â”‚
â”‚   [/custom/vpc-flow-logs]                â”‚
â”‚                                          â”‚
â”‚ IAM role:                                â”‚
â”‚   [VPCFlowLogsRole]                      â”‚
â”‚                                          â”‚
â”‚ Log record format:                       â”‚
â”‚   â¦¿ AWS default format                   â”‚
â”‚   â—‹ Custom format                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ Create flow log ]
```

---

#### Step 3: SSH ì ‘ì† (Accept íŠ¸ë˜í”½ ìƒì„±)

**PuTTY ì„¤ì •:**
```
Session:
  Host Name: [ec2-user@13.125.XX.XX]
  Port: [22]

Connection â†’ SSH â†’ Auth:
  Private key file: [bastion-key.ppk]

[ Open ]

ê²°ê³¼:
login as: ec2-user
Authenticating with public key "bastion-key"

       __|  __|_  )
       _|  (     /   Amazon Linux 2 AMI
      ___|\___|___|

[ec2-user@ip-10-0-1-100 ~]$
```

---

#### Step 4: HTTP ì ‘ì† ì‹œë„ (Reject íŠ¸ë˜í”½ ìƒì„±)

**ë¸Œë¼ìš°ì €ì—ì„œ:**
```
URL: http://13.125.XX.XX

ê²°ê³¼:
This site can't be reached
13.125.XX.XX refused to connect.

ì´ìœ :
- Security Groupì—ì„œ Port 80 ë¯¸í—ˆìš©
- SSH (Port 22)ë§Œ í—ˆìš©ë¨
```

---

#### Step 5: CloudWatch Logs í™•ì¸

**ë¡œê·¸ ê·¸ë£¹ í™•ì¸:**
```
CloudWatch â†’ Logs â†’ Log groups
â†’ /custom/vpc-flow-logs

Log streams:
eni-0abc123def456-all
```

**SSH Accept ë¡œê·¸:**
```
2 123456789012 eni-0abc123def456 203.0.113.50 10.0.1.100 55432 22 6 10 5000 1702195200 1702195260 ACCEPT OK
```

**í•„ë“œ í•´ì„:**
```
2                    - ë²„ì „
123456789012         - Account ID
eni-0abc123def456    - Network Interface ID
203.0.113.50         - Source IP (ë‚´ ì»´í“¨í„°)
10.0.1.100           - Destination IP (Bastion ì„œë²„)
55432                - Source Port (í´ë¼ì´ì–¸íŠ¸)
22                   - Destination Port (SSH)
6                    - Protocol (TCP)
10                   - Packets
5000                 - Bytes
1702195200           - Start time
1702195260           - End time
ACCEPT               - Action (í—ˆìš©ë¨)
OK                   - Status
```

**HTTP Reject ë¡œê·¸:**
```
2 123456789012 eni-0abc123def456 203.0.113.50 10.0.1.100 55433 80 6 3 180 1702195300 1702195360 REJECT OK
```

**í•„ë“œ í•´ì„:**
```
80                   - Destination Port (HTTP)
REJECT               - Action (ì°¨ë‹¨ë¨)
â†’ Security Group ê·œì¹™ì— ì˜í•´ ì°¨ë‹¨!
```

---

**í•„í„°ë§í•˜ì—¬ í™•ì¸:**
```
CloudWatch Logs Insightsì—ì„œ:

# ë‚´ IP ì°¾ê¸°
fields @timestamp, @message
| filter srcaddr = "203.0.113.50"
| sort @timestamp desc

# ACCEPTë§Œ ë³´ê¸°
fields @timestamp, srcaddr, dstaddr, srcport, dstport, action
| filter action = "ACCEPT"

# REJECTë§Œ ë³´ê¸°
fields @timestamp, srcaddr, dstaddr, dstport, action
| filter action = "REJECT"

# Port 80 ì°¨ë‹¨ ë¡œê·¸
fields @timestamp, srcaddr, dstport, action
| filter dstport = 80 and action = "REJECT"
```

---

### ğŸ“Š CloudWatch Metric Filters (ì§€í‘œ í•„í„°)

**ê°œë…:**
- ë¡œê·¸ì—ì„œ íŠ¹ì • íŒ¨í„´ì„ ì°¾ì•„ **ì§€í‘œ(Metric)ë¥¼ ìƒì„±**
- ì§€í‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ **CloudWatch Alarms** ì„¤ì • ê°€ëŠ¥

**ì‚¬ìš© ì‚¬ë¡€:**
```
âœ“ ì—ëŸ¬ ë°œìƒ íšŸìˆ˜ ì¶”ì 
  - ë¡œê·¸ì—ì„œ "ERROR" í‚¤ì›Œë“œ ì¹´ìš´íŠ¸

âœ“ íŠ¹ì • API í˜¸ì¶œ ëª¨ë‹ˆí„°ë§
  - "StopInstances" ì´ë²¤íŠ¸ ë°œìƒ ì¶”ì 

âœ“ ë³´ì•ˆ ì´ë²¤íŠ¸ ê°ì§€
  - "UnauthorizedOperation" ì—ëŸ¬ ì¶”ì 

âœ“ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì¶”ì¶œ
  - ì‘ë‹µ ì‹œê°„, ì²˜ë¦¬ëŸ‰ ë“±
```

---

**Metric Filter ìƒì„± ì‹¤ìŠµ:**

#### ì˜ˆì‹œ 1: EC2 StopInstances ì´ë²¤íŠ¸ ì¶”ì 

**Step 1: CloudTrail ë¡œê·¸ ê·¸ë£¹ ì„ íƒ**
```
CloudWatch â†’ Logs â†’ Log groups
â†’ /aws/cloudtrail/management-events
```

**Step 2: Metric Filter ìƒì„±**
```
[ Actions ] â†’ [ Create metric filter ]

Filter pattern:
  [{ $.eventName = "StopInstances" }]

Test pattern:
  (ë¡œê·¸ ìƒ˜í”Œ ì„ íƒí•˜ì—¬ í…ŒìŠ¤íŠ¸)

[ Next ]

Metric details:
  Filter name: [EC2StopInstancesCount]
  Metric namespace: [CustomMetrics]
  Metric name: [EC2StopInstances]
  Metric value: [1]
  Default value: [0]

[ Create metric filter ]
```

---

**Step 3: CloudWatch Alarm ìƒì„±**
```
Metric filter ì„ íƒ â†’ [ Create alarm ]

Specify metric and conditions:
  Metric name: EC2StopInstances
  Statistic: Sum
  Period: 5 minutes

  Conditions:
    â¦¿ Static threshold
    Whenever EC2StopInstances is:
      â¦¿ Greater/Equal
      than: [1]

[ Next ]

Configure actions:
  Alarm state trigger: In alarm

  Send notification to:
    â¦¿ Create new topic
    Topic name: [admin-notifications]
    Email endpoints: [admin@example.com]

[ Next ]

Alarm name: [EC2-StopInstances-Alert]
Alarm description: [Alert when EC2 instances are stopped]

[ Create alarm ]
```

**ì´ë©”ì¼ êµ¬ë… í™•ì¸:**
```
ë°›ì€í¸ì§€í•¨:
From: no-reply@sns.amazonaws.com
Subject: AWS Notification - Subscription Confirmation

[ Confirm subscription ] í´ë¦­
```

---

**í…ŒìŠ¤íŠ¸:**
```
1. EC2 ì¸ìŠ¤í„´ìŠ¤ ì¤‘ì§€
   EC2 â†’ Instances â†’ Stop instance

2. 5ë¶„ í›„ ì´ë©”ì¼ ìˆ˜ì‹ :
   Subject: ALARM: "EC2-StopInstances-Alert" in AP-NORTHEAST-2

   You are receiving this email because your Amazon CloudWatch
   Alarm "EC2-StopInstances-Alert" in the AP-NORTHEAST-2 region
   has entered the ALARM state, because "Threshold Crossed:
   1 datapoint [1.0] was greater than or equal to the threshold (1.0)."
```

---

### ğŸ” CloudWatch Logs Insights (ëŒ€í™”í˜• ì¿¼ë¦¬)

**ê°œë…:**
- ë¡œê·¸ ê·¸ë£¹ì„ **SQL ìœ ì‚¬ ì¿¼ë¦¬**ë¡œ ê²€ìƒ‰í•˜ê³  ë¶„ì„
- ì‹¤ì‹œê°„ ëŒ€í™”í˜• ë¡œê·¸ ë¶„ì„ ë„êµ¬

**ì¿¼ë¦¬ ì–¸ì–´ íŠ¹ì§•:**
```
âœ“ í•„í„°ë§: filter
âœ“ í•„ë“œ ì„ íƒ: fields
âœ“ ì •ë ¬: sort
âœ“ ì§‘ê³„: stats count(), sum(), avg()
âœ“ ì‹œê°„ ë²”ìœ„: @timestamp
```

---

**ì˜ˆì‹œ ì¿¼ë¦¬:**

**1. ê¸°ë³¸ í•„ë“œ ì¡°íšŒ:**
```
fields @timestamp, @message
| sort @timestamp desc
| limit 20
```

**2. íŠ¹ì • ì´ë²¤íŠ¸ í•„í„°ë§:**
```
fields @timestamp, eventName, userIdentity.userName, sourceIPAddress
| filter eventName = "StopInstances"
| sort @timestamp desc
```

**3. ì—ëŸ¬ ë¡œê·¸ ê²€ìƒ‰:**
```
fields @timestamp, @message
| filter @message like /ERROR/
| sort @timestamp desc
| limit 50
```

**4. í†µê³„ ì§‘ê³„:**
```
stats count() by eventName
| sort count desc
| limit 10
```

**5. ì‹œê°„ëŒ€ë³„ ì§‘ê³„:**
```
fields @timestamp, eventName
| filter eventName = "ConsoleLogin"
| stats count() by bin(30m)
```

**6. ë³µì¡í•œ ì¡°ê±´:**
```
fields @timestamp, eventName, errorCode, userIdentity.userName
| filter eventSource = "ec2.amazonaws.com"
        and (eventName = "RunInstances" or eventName = "TerminateInstances")
        and errorCode exists
| sort @timestamp desc
```

---

**ì‹¤ìŠµ:**

```
CloudWatch â†’ Logs â†’ Logs Insights

Select log group(s):
  [âœ“] /aws/cloudtrail/management-events

Query:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
fields @timestamp, eventName, userIdentity.userName, responseElements.consoleLogin
| filter eventSource = "signin.amazonaws.com"
       and eventName = "ConsoleLogin"
| sort @timestamp desc
| limit 20
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Time range: Last 1 hour

[ Run query ]

Results:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ @timestamp          â”‚ eventName     â”‚ userName â”‚ consoleLogin   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2024-12-10 14:30:00 â”‚ ConsoleLogin  â”‚ alice    â”‚ Success        â”‚
â”‚ 2024-12-10 13:15:00 â”‚ ConsoleLogin  â”‚ bob      â”‚ Failure        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“ˆ ë¡œê·¸ ê¸°ë°˜ ì•ŒëŒ ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤

**í†µí•© ì˜ˆì‹œ: S3 â†’ Lambda â†’ CloudWatch â†’ SNS**

```mermaid
sequenceDiagram
    participant S3 as S3 Bucket
    participant L as Lambda Function
    participant CW as CloudWatch Logs
    participant MF as Metric Filter
    participant A as CloudWatch Alarm
    participant SNS as SNS Topic
    participant E as Email

    S3->>L: 1. ì´ë²¤íŠ¸ ë°œìƒ<br/>(íŒŒì¼ ì—…ë¡œë“œ)
    L->>L: 2. í•¨ìˆ˜ ì‹¤í–‰
    L->>CW: 3. ë¡œê·¸ ì €ì¥
    CW->>MF: 4. íŒ¨í„´ ë§¤ì¹­
    MF->>MF: 5. ì§€í‘œ ê°’ ì¦ê°€
    MF->>A: 6. ì§€í‘œ â†’ ì„ê³„ê°’ ì´ˆê³¼
    A->>SNS: 7. ì•ŒëŒ ë°œë™
    SNS->>E: 8. ì´ë©”ì¼ ì „ì†¡
```

**ì„¤ì • ë‹¨ê³„:**

**1. Lambda í•¨ìˆ˜ ìƒì„±:**
```python
import json
import logging

logger = logging.getLogger()
logger.setLevel(logging.INFO)

def lambda_handler(event, context):
    logger.info(f"Event received: {json.dumps(event)}")

    # S3 ì´ë²¤íŠ¸ ì²˜ë¦¬
    for record in event['Records']:
        bucket = record['s3']['bucket']['name']
        key = record['s3']['object']['key']

        if key.endswith('.jpg') or key.endswith('.png'):
            logger.info(f"Processing image: {key}")
        else:
            logger.error(f"Unsupported file type: {key}")

    return {
        'statusCode': 200,
        'body': json.dumps('Processing complete')
    }
```

**2. S3 ì´ë²¤íŠ¸ ì•Œë¦¼ ì„¤ì •:**
```
S3 Bucket â†’ Properties â†’ Event notifications

[ Create event notification ]
  Event name: [image-upload-trigger]
  Event types: [âœ“] PUT
  Destination: Lambda function
  Lambda: [my-image-processor]
```

**3. CloudWatch Metric Filter ìƒì„±:**
```
Log group: /aws/lambda/my-image-processor

Filter pattern: [level=ERROR]

Metric:
  Name: ImageProcessingErrors
  Value: 1
```

**4. CloudWatch Alarm ìƒì„±:**
```
Metric: ImageProcessingErrors
Condition: >= 1 in 5 minutes

Action: SNS Topic â†’ admin-notifications
```

**5. í…ŒìŠ¤íŠ¸:**
```
# ì •ìƒ íŒŒì¼ ì—…ë¡œë“œ
aws s3 cp image.jpg s3://my-bucket/
â†’ ë¡œê·¸: INFO Processing image: image.jpg
â†’ ì•ŒëŒ ì—†ìŒ

# ì˜ëª»ëœ íŒŒì¼ ì—…ë¡œë“œ
aws s3 cp document.pdf s3://my-bucket/
â†’ ë¡œê·¸: ERROR Unsupported file type: document.pdf
â†’ ì§€í‘œ: ImageProcessingErrors = 1
â†’ ì•ŒëŒ ë°œë™!
â†’ ì´ë©”ì¼ ìˆ˜ì‹ 
```

---

## 4ï¸âƒ£ ê¸°íƒ€ AWS ë¡œê·¸ ì„œë¹„ìŠ¤

### ğŸ“¦ S3 Access Logs

**ê°œë…:**
- S3 ë²„í‚·ì— ëŒ€í•œ **ëª¨ë“  ìš”ì²­ì„ ê¸°ë¡**
- ì›¹ ì„œë²„ ì•¡ì„¸ìŠ¤ ë¡œê·¸ì™€ ìœ ì‚¬í•œ í˜•ì‹

**ë¡œê·¸ ë‚´ìš©:**
```
âœ“ ìš”ì²­ì ì •ë³´ (AWS Account, IAM User)
âœ“ ë²„í‚· ì´ë¦„
âœ“ ìš”ì²­ ì‹œê°„
âœ“ ì‘ì—… (GET, PUT, DELETE ë“±)
âœ“ ìš”ì²­ URI
âœ“ HTTP ìƒíƒœ ì½”ë“œ
âœ“ ì—ëŸ¬ ì½”ë“œ (ìˆëŠ” ê²½ìš°)
âœ“ ë°”ì´íŠ¸ ìˆ˜
âœ“ ì†ŒìŠ¤ IP
```

---

**ë¡œê·¸ í˜•ì‹:**
```
79a59df900b949e55d96a1e698fbacedfd6e09d98eacf8f8d5218e7cd47ef2be mybucket [10/Dec/2024:14:30:15 +0000] 203.0.113.50 arn:aws:iam::123456789012:user/alice 3E57427F33A59F07 REST.GET.OBJECT my-image.jpg "GET /my-image.jpg HTTP/1.1" 200 - 2662992 2662992 5 10 "-" "Mozilla/5.0" - s9lzHYrFp76ZVxRcpX9+5cjAnEH2ROuNkd2BHfIa6UkFVdtjf5mKR3/eTPFvsiP/XV/VLi31234= SigV4 ECDHE-RSA-AES128-GCM-SHA256 QueryString s3.ap-northeast-2.amazonaws.com TLSv1.2
```

**ì£¼ìš” í•„ë“œ:**
```
í•„ë“œ 1: ë²„í‚· ì†Œìœ ì ID
í•„ë“œ 2: ë²„í‚· ì´ë¦„ (mybucket)
í•„ë“œ 3: ì‹œê°„ ([10/Dec/2024:14:30:15 +0000])
í•„ë“œ 4: ìš”ì²­ì IP (203.0.113.50)
í•„ë“œ 5: ìš”ì²­ì (arn:aws:iam::123456789012:user/alice)
í•„ë“œ 7: ì‘ì—… (REST.GET.OBJECT)
í•„ë“œ 8: ê°ì²´ í‚¤ (my-image.jpg)
í•„ë“œ 10: HTTP ìƒíƒœ (200)
í•„ë“œ 12-13: ë°”ì´íŠ¸ ìˆ˜ (ì „ì†¡/ê°ì²´ í¬ê¸°)
```

---

**í™œì„±í™” ë°©ë²•:**
```
S3 Bucket â†’ Properties â†’ Server access logging

[ Edit ]

Server access logging:
  â¦¿ Enable

Target bucket:
  [my-logs-bucket]

Target prefix:
  [s3-access-logs/]

[ Save changes ]
```

**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜:**
```
s3://my-logs-bucket/s3-access-logs/2024-12-10-14-30-15-ABCD1234
```

**ì‚¬ìš© ì‚¬ë¡€:**
```
âœ“ ë¹„ì •ìƒì ì¸ ë‹¤ìš´ë¡œë“œ íŒ¨í„´ íƒì§€
âœ“ ë°ì´í„° ìœ ì¶œ ì¡°ì‚¬
âœ“ ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ ë¶„ì„
âœ“ ì¸ê¸° ì½˜í…ì¸  íŒŒì•…
```

---

### âš–ï¸ ELB Access Logs

**ê°œë…:**
- Elastic Load Balancerë¥¼ í†µê³¼í•˜ëŠ” **ëª¨ë“  HTTP/HTTPS ìš”ì²­ ê¸°ë¡**

**ë¡œê·¸ ë‚´ìš©:**
```
âœ“ ìš”ì²­ ì‹œê°„
âœ“ í´ë¼ì´ì–¸íŠ¸ IP ë° í¬íŠ¸
âœ“ ë°±ì—”ë“œ IP ë° í¬íŠ¸
âœ“ ìš”ì²­ ì²˜ë¦¬ ì‹œê°„
âœ“ ë°±ì—”ë“œ ì²˜ë¦¬ ì‹œê°„
âœ“ HTTP ë©”ì„œë“œ ë° ê²½ë¡œ
âœ“ HTTP ìƒíƒœ ì½”ë“œ
âœ“ User-Agent
âœ“ SSL ì•”í˜¸ ì‚¬ìš© ì—¬ë¶€
```

---

**ë¡œê·¸ í˜•ì‹ (ALB):**
```
http 2024-12-10T14:30:15.123456Z app/my-loadbalancer/50dc6c495c0c9188 203.0.113.50:35498 10.0.1.10:80 0.001 0.002 0.000 200 200 154 365 "GET https://example.com:443/api/users HTTP/1.1" "Mozilla/5.0 (Windows NT 10.0; Win64; x64)" ECDHE-RSA-AES128-GCM-SHA256 TLSv1.2 arn:aws:elasticloadbalancing:ap-northeast-2:123456789012:targetgroup/my-targets/50dc6c495c0c9188 "Root=1-58337262-36d228ad5d99923122bbe354" "example.com" "arn:aws:acm:ap-northeast-2:123456789012:certificate/12345678-1234-1234-1234-123456789012" 0 2024-12-10T14:30:15.123456Z "forward" "-" "-" "10.0.1.10:80" "200" "-" "-"
```

**ì£¼ìš” í•„ë“œ:**
```
í•„ë“œ 1: í”„ë¡œí† ì½œ (http/https/h2/ws/wss)
í•„ë“œ 2: ì‹œê°„
í•„ë“œ 3: ELB ì´ë¦„
í•„ë“œ 4: í´ë¼ì´ì–¸íŠ¸ IP:í¬íŠ¸ (203.0.113.50:35498)
í•„ë“œ 5: íƒ€ê²Ÿ IP:í¬íŠ¸ (10.0.1.10:80)
í•„ë“œ 6-8: ì²˜ë¦¬ ì‹œê°„ (ìš”ì²­/ë°±ì—”ë“œ/ì‘ë‹µ)
í•„ë“œ 9-10: ìƒíƒœ ì½”ë“œ (ELB/ë°±ì—”ë“œ)
í•„ë“œ 11-12: ë°”ì´íŠ¸ ìˆ˜ (ìˆ˜ì‹ /ì „ì†¡)
í•„ë“œ 13: ìš”ì²­ ë¼ì¸ (GET /api/users HTTP/1.1)
```

---

**í™œì„±í™” ë°©ë²•:**
```
EC2 â†’ Load Balancers â†’ ë¡œë“œ ë°¸ëŸ°ì„œ ì„ íƒ

[ Attributes ] íƒ­

Access logs:
  [ Edit ]
  â˜‘ Enable access logs

S3 location:
  s3://[my-logs-bucket]/elb-access-logs/

[ Save changes ]
```

**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜:**
```
s3://my-logs-bucket/elb-access-logs/
  AWSLogs/
    123456789012/
      elasticloadbalancing/
        ap-northeast-2/
          2024/
            12/
              10/
                â”œâ”€â”€ app.my-loadbalancer.log.2024121014.abc123.gz
                â””â”€â”€ app.my-loadbalancer.log.2024121015.def456.gz
```

---

**ì‚¬ìš© ì‚¬ë¡€:**
```
âœ“ íŠ¸ë˜í”½ íŒ¨í„´ ë¶„ì„
  - ì‹œê°„ëŒ€ë³„ ìš”ì²­ ìˆ˜
  - ì§€ì—­ë³„ ì ‘ì† ë¶„í¬

âœ“ ì„±ëŠ¥ ìµœì í™”
  - ëŠë¦° ë°±ì—”ë“œ ì‹ë³„
  - ì‘ë‹µ ì‹œê°„ ë¶„ì„

âœ“ ë³´ì•ˆ ë¶„ì„
  - ì˜ì‹¬ìŠ¤ëŸ¬ìš´ IP ì°¨ë‹¨
  - DDoS ê³µê²© íƒì§€

âœ“ ë””ë²„ê¹…
  - 4xx/5xx ì˜¤ë¥˜ ì›ì¸ íŒŒì•…
  - íŠ¹ì • ìš”ì²­ ì¶”ì 
```

---

## âœ… Section 3 í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë¡œê·¸ ìˆ˜ì§‘ ë° ë³´í˜¸
```
â–¡ ë¡œê·¸ ìˆ˜ì§‘ ê¸°ë³¸ ì›ì¹™ ì´í•´
â–¡ ë¡œê·¸ ë³´ê´€ ê¸°ê°„ ì„¤ì • ê°€ì´ë“œ
â–¡ ì•”í˜¸í™”ë¥¼ í†µí•œ ë¡œê·¸ ë³´í˜¸
â–¡ ìœ„ë³€ì¡° ë°©ì§€ (í•´ì‹œ, Digest)
â–¡ S3 Object Lock í™œìš©
â–¡ IAMì„ í†µí•œ ì ‘ê·¼ ì œì–´
```

### CloudTrail
```
â–¡ CloudTrail ì—­í•  ë° ìš©ë„
â–¡ ê´€ë¦¬ ì´ë²¤íŠ¸ vs ë°ì´í„° ì´ë²¤íŠ¸ êµ¬ë¶„
â–¡ Insights ì´ë²¤íŠ¸ ì´í•´
â–¡ CloudTrail ë¡œê·¸ í˜•ì‹ (JSON)
â–¡ Trail ìƒì„± ì‹¤ìŠµ ì™„ë£Œ
â–¡ S3 ë° CloudWatch Logs í†µí•©
â–¡ ë¡œê·¸ ë¬´ê²°ì„± ê²€ì¦ ë°©ë²•
â–¡ Event History ì‚¬ìš©ë²•
```

### CloudWatch Logs
```
â–¡ CloudWatch Logs êµ¬ì¡° (Group/Stream/Event)
â–¡ ë¡œê·¸ ê·¸ë£¹ ìƒì„± ë° ì„¤ì •
â–¡ VPC Flow Logs ì‹¤ìŠµ ì™„ë£Œ
â–¡ Metric Filters ìƒì„±
â–¡ CloudWatch Alarms ì—°ë™
â–¡ CloudWatch Logs Insights ì¿¼ë¦¬ ì‘ì„±
â–¡ SNSë¥¼ í†µí•œ ì•ŒëŒ ì „ì†¡
```

### ê¸°íƒ€ ë¡œê·¸
```
â–¡ S3 Access Logs í™œì„±í™” ë° ë¶„ì„
â–¡ ELB Access Logs í™œì„±í™” ë° ë¶„ì„
â–¡ ë¡œê·¸ í˜•ì‹ ì´í•´
â–¡ ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€ íŒŒì•…
```

### ì¢…í•© ì‹œë‚˜ë¦¬ì˜¤
```
â–¡ ë¡œê·¸ ìˆ˜ì§‘ â†’ ë¶„ì„ â†’ ì•ŒëŒ ì „ì²´ íë¦„ ì´í•´
â–¡ ë‹¤ì–‘í•œ AWS ì„œë¹„ìŠ¤ ê°„ í†µí•©
â–¡ ì‹¤ë¬´ ì ìš© ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„
```

---

**ë‹¤ìŒ ì„¹ì…˜ ì˜ˆê³ :**
ì„¹ì…˜ 4ì—ì„œëŠ” AWS ë³´ì•ˆ ì„œë¹„ìŠ¤ (Shield, WAF, Config, GuardDuty ë“±)ë¥¼ ìƒì„¸íˆ í•™ìŠµí•©ë‹ˆë‹¤.
# ğŸ“Š AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ - Day 6 (Sections 4, 5, 6)

## ğŸ“š ì„¹ì…˜ 4, 5, 6: AWS ë³´ì•ˆ ì„œë¹„ìŠ¤ ì¢…í•©

---

### ğŸ¯ í•™ìŠµ ëª©í‘œ

**ì„¹ì…˜ 4-6ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©:**
- AWS Shield: DDoS ë°©ì–´
- AWS WAF: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½
- AWS Config: ë¦¬ì†ŒìŠ¤ êµ¬ì„± ê´€ë¦¬
- GuardDuty, Inspector, Security Hub: ìœ„í˜‘ íƒì§€ ë° í†µí•© ê´€ë¦¬
- Network Firewall, Detective: ê³ ê¸‰ ë³´ì•ˆ ì„œë¹„ìŠ¤
- WAF ì‹¤ìŠµ: Web ACL ìƒì„± ë° ì ìš©

---

## ğŸ›¡ï¸ SECTION 4: AWS ê¸°ë³¸ ë³´ì•ˆ ì„œë¹„ìŠ¤

### 1ï¸âƒ£ AWS Shield - DDoS ë°©ì–´

#### ğŸ“‹ DDoS ê³µê²© ê°œìš”

**DDoS (Distributed Denial of Service) ê³µê²©:**
- ëŒ€ëŸ‰ì˜ íŠ¸ë˜í”½ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë§ˆë¹„ì‹œí‚¤ëŠ” ê³µê²©
- ì„œë¹„ìŠ¤ ì¤‘ë‹¨(Denial of Service)ì„ ëª©ì ìœ¼ë¡œ í•¨

```mermaid
graph LR
    subgraph "ê³µê²©ì"
        A1[ë´‡ë„· 1]
        A2[ë´‡ë„· 2]
        A3[ë´‡ë„· 3]
        A4[ë´‡ë„· N...]
    end

    subgraph "íƒ€ê²Ÿ"
        B[ì›¹ ì„œë²„]
    end

    A1 -->|ëŒ€ëŸ‰ íŠ¸ë˜í”½| B
    A2 -->|ëŒ€ëŸ‰ íŠ¸ë˜í”½| B
    A3 -->|ëŒ€ëŸ‰ íŠ¸ë˜í”½| B
    A4 -->|ëŒ€ëŸ‰ íŠ¸ë˜í”½| B

    B --> C[ì„œë¹„ìŠ¤ ë§ˆë¹„]
```

---

#### ğŸ”¢ OSI 7ê³„ì¸µë³„ DDoS ê³µê²© ìœ í˜•

```
OSI 7 Layer:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 7 - Application (ì‘ìš©)             â”‚  HTTP GET Flood
â”‚  ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ íŠ¹ì„± ì´ìš©               â”‚  DNS Query Flood
â”‚  ë¦¬ì†ŒìŠ¤ ì†Œëª¨ ê³µê²©                         â”‚  Slowloris
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 6 - Presentation (í‘œí˜„)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 5 - Session (ì„¸ì…˜)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 4 - Transport (ì „ì†¡)               â”‚  TCP SYN Flood
â”‚  í”„ë¡œí† ì½œ ë§ˆë¹„ ê³µê²©                       â”‚  UDP Flood
â”‚                                          â”‚  ICMP Flood
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 3 - Network (ë„¤íŠ¸ì›Œí¬)             â”‚  IP Flood
â”‚  ë„¤íŠ¸ì›Œí¬ ê¸°ëŠ¥ ë§ˆë¹„                       â”‚  ICMP Flood
â”‚  ëŒ€ê·œëª¨ íŒ¨í‚· ì „ì†¡                         â”‚  Smurf Attack
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 2 - Data Link (ë°ì´í„°ë§í¬)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Layer 1 - Physical (ë¬¼ë¦¬)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì£¼ìš” ê³µê²© ë°œìƒ ê³„ì¸µ: Layer 3, 4, 7
```

**ê³„ì¸µë³„ ê³µê²© ì„¤ëª…:**

**Layer 3 (ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ):**
```
ëŒ€í‘œ ê³µê²©: IP Flood, ICMP Flood

íŠ¹ì§•:
- ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ì†Œì§„
- ë¼ìš°í„°/ë°©í™”ë²½ ê³¼ë¶€í•˜

ë°©ì–´:
- ëŒ€ì—­í­ í™•ë³´
- Rate Limiting
```

**Layer 4 (ì „ì†¡ ê³„ì¸µ):**
```
ëŒ€í‘œ ê³µê²©: TCP SYN Flood

ë™ì‘ ë°©ì‹:
1. ê³µê²©ì â†’ ì„œë²„: SYN (ì—°ê²° ìš”ì²­)
2. ì„œë²„ â†’ ê³µê²©ì: SYN-ACK (ì‘ë‹µ)
3. ê³µê²©ì: ACK ë³´ë‚´ì§€ ì•ŠìŒ!
4. ì„œë²„: Half-Open ì—°ê²° ëŒ€ê¸° (ë©”ëª¨ë¦¬ ì†Œëª¨)
5. ë°˜ë³µ â†’ ì„œë²„ ë¦¬ì†ŒìŠ¤ ê³ ê°ˆ

ë°©ì–´:
- SYN Cookie
- Connection Timeout ë‹¨ì¶•
- SYN Proxy
```

**Layer 7 (ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ):**
```
ëŒ€í‘œ ê³µê²©: HTTP GET Flood, Slowloris

HTTP GET Flood:
- ì •ìƒì ì¸ HTTP GET ìš”ì²­ì„ ëŒ€ëŸ‰ ì „ì†¡
- ì›¹ ì„œë²„ ë¦¬ì†ŒìŠ¤ ì†Œëª¨
- ë°ì´í„°ë² ì´ìŠ¤ ê³¼ë¶€í•˜

Slowloris:
- HTTP ìš”ì²­ì„ ë§¤ìš° ëŠë¦¬ê²Œ ì „ì†¡
- ì—°ê²°ì„ ìµœëŒ€í•œ ì˜¤ë˜ ìœ ì§€
- ì„œë²„ì˜ ë™ì‹œ ì—°ê²° ìˆ˜ ê³ ê°ˆ

ë°©ì–´:
- WAF (Web Application Firewall)
- Rate Limiting
- Connection Timeout
```

---

#### ğŸ›¡ï¸ AWS Shield ì„œë¹„ìŠ¤

**Shield ê°œìš”:**
- AWSì—ì„œ ì œê³µí•˜ëŠ” DDoS ë°©ì–´ ì„œë¹„ìŠ¤
- **ì•„í‚¤í…ì²˜ ë³€ê²½ ì—†ì´** ì ìš© ê°€ëŠ¥
- ìë™í™”ëœ ë°©ì–´ ê¸°ëŠ¥

---

#### ğŸ“Š Shield Standard vs Advanced

| í•­ëª© | Shield Standard | Shield Advanced |
|------|----------------|-----------------|
| **ë¹„ìš©** | ë¬´ë£Œ | ìœ ë£Œ ($3,000/ì›”) |
| **ì ìš© ëŒ€ìƒ** | CloudFront, Route 53 | CloudFront, Route 53, ELB, EC2, Global Accelerator |
| **ë°©ì–´ ê³„ì¸µ** | Layer 3, 4 | Layer 3, 4, 7 |
| **DDoS ìœ í˜•** | SYN/UDP Flood, Reflection | ëª¨ë“  DDoS ê³µê²© ìœ í˜• |
| **24/7 ì§€ì›** | âœ— | âœ“ (DDoS Response Team) |
| **WAF ë¬´ë£Œ** | âœ— | âœ“ (AWS WAF í¬í•¨) |
| **ë¹„ìš© ë³´í˜¸** | âœ— | âœ“ (DDoSë¡œ ì¸í•œ ë¹„ìš© ë³´ìƒ) |
| **Support Plan** | ì œí•œ ì—†ìŒ | Business/Enterprise í•„ìˆ˜ |

---

**Shield Standard ìƒì„¸:**

**ë¬´ë£Œ ì œê³µ:**
```
âœ“ ëª¨ë“  AWS ê³ ê°ì—ê²Œ ìë™ í™œì„±í™”
âœ“ ë³„ë„ ì„¤ì • ë¶ˆí•„ìš”
âœ“ CloudFront, Route 53ì— ìë™ ì ìš©
```

**ë°©ì–´ ë²”ìœ„:**
```
Layer 3 ê³µê²©:
âœ“ IP Flood
âœ“ ICMP Flood
âœ“ Reflection Attack (ì¦í­ ê³µê²©)

Layer 4 ê³µê²©:
âœ“ TCP SYN Flood
âœ“ UDP Flood
âœ“ Reflection/Amplification Attack

âŒ Layer 7 ê³µê²© ë°©ì–´ ë¶ˆê°€
```

**ì ìš© ì˜ˆì‹œ:**
```
ì‹œë‚˜ë¦¬ì˜¤: CloudFrontë¥¼ í†µí•œ ì›¹ ì„œë¹„ìŠ¤

ì‚¬ìš©ì â†’ Route 53 (DNS) â†’ CloudFront (CDN) â†’ Origin Server

ë°©ì–´:
- Route 53: Shield Standard ìë™ ë³´í˜¸
- CloudFront: Shield Standard ìë™ ë³´í˜¸
- Layer 3/4 DDoS ìë™ ì™„í™”
```

---

**Shield Advanced ìƒì„¸:**

**ì¶”ê°€ ì ìš© ëŒ€ìƒ:**
```
âœ“ Elastic Load Balancer (ALB, NLB, CLB)
âœ“ EC2 Elastic IP
âœ“ Global Accelerator
```

**Layer 7 ë°©ì–´:**
```
HTTP/HTTPS ê³µê²© ë°©ì–´:
âœ“ HTTP GET/POST Flood
âœ“ Slowloris
âœ“ DNS Query Flood

í†µí•©:
- AWS WAFì™€ ìë™ í†µí•©
- WAF ë¹„ìš© ë¬´ë£Œ (Advanced êµ¬ë… ì‹œ)
```

**24/7 DDoS Response Team (DRT):**
```
ì œê³µ ì„œë¹„ìŠ¤:
âœ“ ê³µê²© ë¶„ì„ ë° ìƒë‹´
âœ“ ë§ì¶¤í˜• ë°©ì–´ ì „ëµ ìˆ˜ë¦½
âœ“ ì‚¬ì „ ì˜ˆë°© ì¡°ì¹˜ ê¶Œì¥
âœ“ ê³µê²© ì¤‘ ì‹¤ì‹œê°„ ì§€ì›

ì—°ë½ ë°©ë²•:
- AWS Support Center
- ì „í™”: ìš°ì„  ëŒ€ì‘
```

**ë¹„ìš© ë³´í˜¸ (Cost Protection):**
```
DDoS ê³µê²©ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ë¹„ìš© ë³´ìƒ:

ë³´ìƒ ëŒ€ìƒ:
âœ“ Auto Scaling ë¹„ìš© ì¦ê°€
âœ“ CloudFront ë°ì´í„° ì „ì†¡ ë¹„ìš©
âœ“ ELB ë¹„ìš© ì¦ê°€
âœ“ Route 53 ì¿¼ë¦¬ ë¹„ìš©

ì‹ ì²­ ë°©ë²•:
1. ê³µê²© íƒì§€ ë° ê¸°ë¡
2. AWS Supportì— ë¹„ìš© ë³´í˜¸ ìš”ì²­
3. ì¦ë¹™ ìë£Œ ì œì¶œ
4. AWSê°€ ê²€í†  í›„ í¬ë ˆë”§ ì œê³µ
```

---

#### ğŸ—ï¸ Shieldë¥¼ í™œìš©í•œ DDoS ë°©ì–´ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    A[ì¸í„°ë„· ì‚¬ìš©ì] --> B[Route 53<br/>Shield Standard]
    B --> C[CloudFront<br/>Shield Standard]
    C --> D[WAF<br/>Layer 7 ë°©ì–´]
    D --> E[Application Load Balancer<br/>Shield Advanced]
    E --> F[Auto Scaling Group]
    F --> G[EC2 Instances]

    style B fill:#90EE90
    style C fill:#90EE90
    style D fill:#FFD700
    style E fill:#FFD700
    style F fill:#87CEEB
```

**ê³„ì¸µë³„ ë°©ì–´:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Route 53 (Shield Standard)                 â”‚
â”‚ â€¢ DNS Query Flood ë°©ì–´                     â”‚
â”‚ â€¢ DNS Amplification ë°©ì–´                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CloudFront (Shield Standard)               â”‚
â”‚ â€¢ Edge Locationì—ì„œ Layer 3/4 ë°©ì–´         â”‚
â”‚ â€¢ SYN Flood, UDP Flood ì™„í™”                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WAF (Shield Advanced í¬í•¨)                 â”‚
â”‚ â€¢ HTTP GET/POST Flood ë°©ì–´                 â”‚
â”‚ â€¢ Rate Limiting                            â”‚
â”‚ â€¢ Geo Blocking                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALB (Shield Advanced)                      â”‚
â”‚ â€¢ Layer 7 ì¶”ê°€ ë°©ì–´                         â”‚
â”‚ â€¢ íŠ¸ë˜í”½ ë¶„ì‚°                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auto Scaling Group                         â”‚
â”‚ â€¢ íŠ¸ë˜í”½ ì¦ê°€ ì‹œ ìë™ í™•ì¥                  â”‚
â”‚ â€¢ Layer 7 ê³µê²© ì™„í™”                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì™„ì „í•œ DDoS ë°©ì–´ ì‹œë‚˜ë¦¬ì˜¤:**

```
ì •ìƒ íŠ¸ë˜í”½:
1. ì‚¬ìš©ì â†’ Route 53 â†’ CloudFront â†’ WAF â†’ ALB â†’ EC2
2. ëª¨ë“  ê³„ì¸µ í†µê³¼
3. ì •ìƒ ì„œë¹„ìŠ¤ ì œê³µ

DDoS ê³µê²© ë°œìƒ:

Layer 3 ê³µê²© (IP Flood):
â†’ CloudFront Edgeì—ì„œ ì°¨ë‹¨
â†’ Origin ì„œë²„ ë³´í˜¸

Layer 4 ê³µê²© (SYN Flood):
â†’ CloudFrontì—ì„œ SYN Cookie ì ìš©
â†’ ì •ìƒ ì—°ê²°ë§Œ í†µê³¼

Layer 7 ê³µê²© (HTTP GET Flood):
â†’ WAF Rate Limiting ì‘ë™
â†’ 5ë¶„ê°„ 100íšŒ ì´ˆê³¼ ì‹œ ì°¨ë‹¨
â†’ Shield Advanced DRT ì•Œë¦¼
â†’ Auto Scalingìœ¼ë¡œ ìš©ëŸ‰ í™•ì¥

ê²°ê³¼:
âœ“ ê³µê²© íŠ¸ë˜í”½ ëŒ€ë¶€ë¶„ ì°¨ë‹¨
âœ“ ì •ìƒ ì‚¬ìš©ì ì˜í–¥ ìµœì†Œí™”
âœ“ ì„œë¹„ìŠ¤ ê°€ìš©ì„± ìœ ì§€
```

---

### 2ï¸âƒ£ AWS WAF - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½

#### ğŸ“‹ WAF ê°œë…

**WAF (Web Application Firewall):**
- **ì›¹ ì·¨ì•½ì ì„ ì´ìš©í•œ ê³µê²©**ì„ íƒì§€í•˜ê³  ë°©ì–´
- ì¼ë°˜ ë°©í™”ë²½(IP/Port ê¸°ë°˜)ê³¼ëŠ” ë‹¤ë¥¸ ê°œë…
- **HTTP/HTTPS íŠ¸ë˜í”½ ë‚´ìš© ê²€ì‚¬**

```mermaid
graph LR
    A[ì¸í„°ë„·] --> B[ì „í†µì  ë°©í™”ë²½<br/>IP/Port í•„í„°ë§]
    B --> C[WAF<br/>HTTP ë‚´ìš© ê²€ì‚¬]
    C --> D[ì›¹ ì„œë²„]

    style B fill:#87CEEB
    style C fill:#FFD700
```

**ì „í†µì  ë°©í™”ë²½ vs WAF:**

| ë¹„êµ í•­ëª© | ì „í†µì  ë°©í™”ë²½ | WAF |
|----------|--------------|-----|
| **ê²€ì‚¬ ê³„ì¸µ** | Layer 3, 4 (IP, Port) | Layer 7 (Application) |
| **ê²€ì‚¬ ë‚´ìš©** | IP ì£¼ì†Œ, í¬íŠ¸ ë²ˆí˜¸ | HTTP í—¤ë”, URL, Body |
| **ë°©ì–´ ëŒ€ìƒ** | ë„¤íŠ¸ì›Œí¬ ê³µê²© | ì›¹ ì·¨ì•½ì  ê³µê²© |
| **ì°¨ë‹¨ ê¸°ì¤€** | IP, Port, Protocol | SQL Injection, XSS ë“± |
| **ì˜ˆì‹œ** | Security Group, NACL | AWS WAF |

---

#### ğŸ¯ WAFê°€ ë°©ì–´í•˜ëŠ” ê³µê²© ìœ í˜•

**1. SQL Injection:**
```sql
-- ì •ìƒ ì¿¼ë¦¬
SELECT * FROM users WHERE id = '123';

-- SQL Injection ê³µê²©
ì…ë ¥ê°’: ' OR '1'='1
ì¿¼ë¦¬: SELECT * FROM users WHERE id = '' OR '1'='1';
â†’ ëª¨ë“  ì‚¬ìš©ì ì •ë³´ ë…¸ì¶œ!

WAF ì°¨ë‹¨:
- ì…ë ¥ê°’ì—ì„œ SQL ë¬¸ë²• íŒ¨í„´ íƒì§€
- ', OR, SELECT, UNION ë“± í‚¤ì›Œë“œ ì°¨ë‹¨
```

**2. Cross-Site Scripting (XSS):**
```html
<!-- ì •ìƒ ì…ë ¥ -->
<input value="í™ê¸¸ë™">

<!-- XSS ê³µê²© -->
<input value="<script>alert('í•´í‚¹')</script>">
â†’ ì‚¬ìš©ì ë¸Œë¼ìš°ì €ì—ì„œ ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰!

WAF ì°¨ë‹¨:
- <script> íƒœê·¸ íƒì§€
- JavaScript ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì°¨ë‹¨
- HTML ì¸ì½”ë”© ê°•ì œ
```

**3. HTTP GET/POST Flood:**
```
ì •ìƒ íŠ¸ë˜í”½:
- ì‚¬ìš©ìë‹¹ ë¶„ë‹¹ 10~20ê±´ ìš”ì²­

ê³µê²© íŠ¸ë˜í”½:
- ë‹¨ì¼ IPì—ì„œ ë¶„ë‹¹ 1,000ê±´ ìš”ì²­

WAF ì°¨ë‹¨:
- Rate Limiting ì ìš©
- ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì¼ì‹œ ì°¨ë‹¨
```

---

#### ğŸ”§ AWS WAF êµ¬ì„± ìš”ì†Œ

```mermaid
graph TB
    A[AWS WAF] --> B[Web ACL]
    B --> C[Rules]
    C --> D[Rule Groups]

    D --> E[AWS Managed Rules]
    D --> F[Marketplace Rules]
    D --> G[Custom Rules]

    C --> H[IP Set]
    C --> I[Regex Pattern Set]
    C --> J[String Match Set]
```

---

**1. Web ACL (Access Control List):**

**ê°œë…:**
- WAF ê·œì¹™ë“¤ì„ ëª¨ì•„ë†“ì€ ì»¨í…Œì´ë„ˆ
- ALB, CloudFront, API Gatewayì— ì—°ê²°

**êµ¬ì¡°:**
```
Web ACL: my-web-acl
â”œâ”€ Default Action: Allow (ê¸°ë³¸ í—ˆìš©)
â”‚
â”œâ”€ Rule 1: Block Bad IPs
â”‚  â””â”€ Action: Block
â”‚
â”œâ”€ Rule 2: Rate Limit
â”‚  â””â”€ Action: Block if > 100 req/5min
â”‚
â””â”€ Rule 3: SQL Injection Protection
   â””â”€ Action: Block
```

**í‰ê°€ ìˆœì„œ:**
```
1. Rule Priority ìˆœì„œëŒ€ë¡œ í‰ê°€ (ë‚®ì€ ë²ˆí˜¸ë¶€í„°)
2. ì²« ë²ˆì§¸ ë§¤ì¹­ë˜ëŠ” ê·œì¹™ì˜ Action ì‹¤í–‰
3. ë§¤ì¹­ë˜ëŠ” ê·œì¹™ ì—†ìœ¼ë©´ Default Action ì‹¤í–‰

ì˜ˆì‹œ:
Priority 1: Block IP 1.2.3.4 â†’ ë§¤ì¹­ â†’ Block (ì¢…ë£Œ)
Priority 2: Allow Korea â†’ í‰ê°€ ì•ˆ í•¨
Default Action: Block â†’ ì‹¤í–‰ ì•ˆ í•¨
```

---

**2. Rules (ê·œì¹™):**

**ê·œì¹™ ìœ í˜•:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IP Match Rules                           â”‚
â”‚ â€¢ IP ì£¼ì†Œ ê¸°ë°˜ í—ˆìš©/ì°¨ë‹¨                 â”‚
â”‚ â€¢ IPv4, IPv6 ì§€ì›                        â”‚
â”‚ â€¢ CIDR ë¸”ë¡ ì§€ì›                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ String Match Rules                       â”‚
â”‚ â€¢ HTTP í—¤ë”/URI/Bodyì—ì„œ ë¬¸ìì—´ ê²€ìƒ‰    â”‚
â”‚ â€¢ SQL Injection íŒ¨í„´ íƒì§€                â”‚
â”‚ â€¢ XSS íŒ¨í„´ íƒì§€                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rate-Based Rules                         â”‚
â”‚ â€¢ ìš”ì²­ ë¹ˆë„ ì œí•œ                         â”‚
â”‚ â€¢ 5ë¶„ë‹¹ NíšŒ ì´ˆê³¼ ì‹œ ì°¨ë‹¨                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Geo Match Rules                          â”‚
â”‚ â€¢ êµ­ê°€ ê¸°ë°˜ í—ˆìš©/ì°¨ë‹¨                    â”‚
â”‚ â€¢ íŠ¹ì • ì§€ì—­ ì ‘ê·¼ ì œí•œ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê·œì¹™ ì˜ˆì‹œ:**

**IP ì°¨ë‹¨ ê·œì¹™:**
```json
{
  "Name": "BlockBadIPs",
  "Priority": 1,
  "Statement": {
    "IPSetReferenceStatement": {
      "Arn": "arn:aws:wafv2:...:ipset/bad-ips"
    }
  },
  "Action": {
    "Block": {}
  }
}
```

**SQL Injection ë°©ì–´:**
```json
{
  "Name": "SQLiProtection",
  "Priority": 2,
  "Statement": {
    "SqliMatchStatement": {
      "FieldToMatch": {
        "Body": {}
      },
      "TextTransformations": [
        {
          "Priority": 0,
          "Type": "URL_DECODE"
        }
      ]
    }
  },
  "Action": {
    "Block": {}
  }
}
```

**Rate Limiting:**
```json
{
  "Name": "RateLimit",
  "Priority": 3,
  "Statement": {
    "RateBasedStatement": {
      "Limit": 100,
      "AggregateKeyType": "IP"
    }
  },
  "Action": {
    "Block": {}
  }
}
```
â†’ ë™ì¼ IPì—ì„œ 5ë¶„ê°„ 100íšŒ ì´ˆê³¼ ì‹œ ì°¨ë‹¨

---

**3. Managed Rule Groups:**

**AWS Managed Rules (ë¬´ë£Œ/ìœ ë£Œ):**

```
Core Rule Set (ë¬´ë£Œ):
âœ“ OWASP Top 10 ë°©ì–´
âœ“ SQL Injection
âœ“ Cross-Site Scripting
âœ“ Local File Inclusion
âœ“ Remote Code Execution
â†’ ê°€ì¥ ì¼ë°˜ì ì¸ ì›¹ ê³µê²© ë°©ì–´

Known Bad Inputs (ë¬´ë£Œ):
âœ“ ì•Œë ¤ì§„ ì•…ì„± íŒ¨í„´ ì°¨ë‹¨
âœ“ ë‚®ì€ ì˜¤íƒë¥ 

IP Reputation List (ë¬´ë£Œ):
âœ“ AWSê°€ ê´€ë¦¬í•˜ëŠ” ì•…ì„± IP ëª©ë¡
âœ“ ë´‡ë„·, ìµëª… í”„ë¡ì‹œ ì°¨ë‹¨

Anonymous IP List (ë¬´ë£Œ):
âœ“ VPN, Proxy, Tor ì°¨ë‹¨
âœ“ ìµëª… ë„êµ¬ ì‚¬ìš© ì°¨ë‹¨
```

**íŠ¹ì • ì·¨ì•½ì  ë°©ì–´:**
```
SQL Database Protection:
âœ“ SQL Injection ì „ë¬¸ ë°©ì–´
âœ“ ë‹¤ì–‘í•œ SQL ë¬¸ë²• íŒ¨í„´

Linux OS Protection:
âœ“ ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œ ëª…ë ¹ì–´ ì¸ì ì…˜ ì°¨ë‹¨
âœ“ Path Traversal ê³µê²© ì°¨ë‹¨
âœ“ ì˜ˆ: ../../../etc/passwd

Windows OS Protection:
âœ“ Windows ëª…ë ¹ì–´ ì¸ì ì…˜ ì°¨ë‹¨
âœ“ PowerShell ê³µê²© ë°©ì–´

PHP Application Protection:
âœ“ PHP íŠ¹í™” ê³µê²© ë°©ì–´
âœ“ eval(), include() ì•…ìš© ì°¨ë‹¨

WordPress Protection:
âœ“ WordPress í”ŒëŸ¬ê·¸ì¸ ì·¨ì•½ì 
âœ“ xmlrpc.php ê³µê²© ì°¨ë‹¨
```

**Marketplace Rules (ìœ ë£Œ):**
```
ë³´ì•ˆ ì—…ì²´ ì œê³µ:

F5 Networks:
- ê³ ê¸‰ ë´‡ íƒì§€
- API ë³´í˜¸

Fortinet:
- í†µí•© ìœ„í˜‘ ë°©ì–´
- ì•…ì„±ì½”ë“œ ì°¨ë‹¨

Imperva:
- DDoS ë°©ì–´
- ê³„ì • íƒˆì·¨ ë°©ì§€

ë¹„ìš©:
- ì—…ì²´ë³„ êµ¬ë… ëª¨ë¸
- $0.10 ~ $1.00 per million requests
```

---

#### ğŸ”— WAF ì ìš© ëŒ€ìƒ

**ì§€ì› ì„œë¹„ìŠ¤:**

```
âœ“ Application Load Balancer (ALB)
âœ“ Amazon CloudFront
âœ“ Amazon API Gateway
âœ“ AWS AppSync
```

**ì—°ê²° ì˜ˆì‹œ:**

**ALBì— ì—°ê²°:**
```
1. ALB ì½˜ì†” â†’ ë¡œë“œ ë°¸ëŸ°ì„œ ì„ íƒ
2. Integrated services íƒ­
3. AWS WAF ì„¹ì…˜ â†’ Associate
4. Web ACL ì„ íƒ â†’ Associate
```

**CloudFrontì— ì—°ê²°:**
```
1. CloudFront ì½˜ì†” â†’ Distribution ì„ íƒ
2. Security íƒ­
3. AWS WAF â†’ Edit
4. Web ACL ì„ íƒ â†’ Save
```

---

#### ğŸ’° WAF ë¹„ìš©

**ê°€ê²© êµ¬ì¡°:**
```
Web ACL:
- $5.00 per Web ACL per month

Rules:
- $1.00 per rule per month

Requests:
- $0.60 per 1 million requests

Managed Rule Groups:
- AWS Managed: $0 ~ $20/month
- Marketplace: ì—…ì²´ë³„ ìƒì´

ì˜ˆìƒ ë¹„ìš© (ì†Œê·œëª¨):
- 1 Web ACL: $5
- 5 Rules: $5
- 10M requests: $6
ì´: $16/month
```

**Shield Advanced ì‚¬ìš© ì‹œ:**
```
âœ“ WAF ë¹„ìš© ë¬´ë£Œ!
âœ“ $3,000/ì›” Shield ë¹„ìš©ì— í¬í•¨
âœ“ ëŒ€ê·œëª¨ ì„œë¹„ìŠ¤ì— ìœ ë¦¬
```

---

### 3ï¸âƒ£ AWS Config - ë¦¬ì†ŒìŠ¤ êµ¬ì„± ê´€ë¦¬

#### ğŸ“‹ Config ê°œë…

**AWS Configë€?**
- AWS ë¦¬ì†ŒìŠ¤ì˜ **êµ¬ì„±(Configuration) ë³€ê²½ ì‚¬í•­**ì„ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§
- **ê·œì • ì¤€ìˆ˜(Compliance) í™•ì¸**
- ë³€ê²½ ì´ë ¥ ì¶”ì 

```mermaid
graph LR
    A[AWS Resources] --> B[AWS Config]
    B --> C[Configuration History]
    B --> D[Compliance Rules]
    B --> E[Change Notifications]

    C --> F[Timeline View]
    D --> G[Compliant/Non-Compliant]
    E --> H[SNS/EventBridge]
```

---

**CloudTrail vs Config ë¹„êµ:**

| í•­ëª© | CloudTrail | Config |
|------|-----------|--------|
| **ì¶”ì  ëŒ€ìƒ** | API í˜¸ì¶œ (ì‘ì—… ì´ë ¥) | ë¦¬ì†ŒìŠ¤ êµ¬ì„± (ì„¤ì • ë³€ê²½) |
| **ì§ˆë¬¸** | ëˆ„ê°€, ì–¸ì œ, ë¬´ì—‡ì„ í–ˆëŠ”ê°€? | ë¦¬ì†ŒìŠ¤ê°€ ì–´ë–»ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ê°€? |
| **ì˜ˆì‹œ** | EC2 ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘ | Security Group ê·œì¹™ ë³€ê²½ |
| **ì‚¬ìš© ì‚¬ë¡€** | ê°ì‚¬, ë¬¸ì œ ì¡°ì‚¬ | ê·œì • ì¤€ìˆ˜, êµ¬ì„± ê´€ë¦¬ |
| **ë°ì´í„°** | JSON ë¡œê·¸ | êµ¬ì„± ìŠ¤ëƒ…ìƒ· |

**ì˜ˆì‹œë¡œ ì´í•´í•˜ê¸°:**

```
ì‹œë‚˜ë¦¬ì˜¤: Security Group ê·œì¹™ ë³€ê²½

CloudTrail ê¸°ë¡:
{
  "eventName": "AuthorizeSecurityGroupIngress",
  "userIdentity": {
    "userName": "alice"
  },
  "eventTime": "2024-12-10T14:30:00Z",
  "requestParameters": {
    "groupId": "sg-0abc123",
    "ipPermissions": [{
      "fromPort": 22,
      "toPort": 22,
      "ipProtocol": "tcp",
      "ipRanges": [{"cidrIp": "0.0.0.0/0"}]
    }]
  }
}
â†’ "aliceê°€ 14:30ì— SSHë¥¼ 0.0.0.0/0ì—ì„œ í—ˆìš©í–ˆë‹¤"

Config ê¸°ë¡:
{
  "resourceType": "AWS::EC2::SecurityGroup",
  "resourceId": "sg-0abc123",
  "configurationItemCaptureTime": "2024-12-10T14:30:00Z",
  "configuration": {
    "ipPermissions": [
      {
        "fromPort": 22,
        "toPort": 22,
        "ipProtocol": "tcp",
        "ipRanges": [{"cidrIp": "0.0.0.0/0"}]
      }
    ]
  },
  "relatedEvents": ["event-id-123"],
  "relationships": [{
    "resourceType": "AWS::EC2::Instance",
    "resourceId": "i-0abc123"
  }]
}
â†’ "Security Groupì´ 0.0.0.0/0ì—ì„œ SSH í—ˆìš©í•˜ë„ë¡ ë³€ê²½ë¨"

ê·œì • ìœ„ë°˜ íƒì§€:
Rule: "SSHëŠ” íŠ¹ì • IPì—ì„œë§Œ í—ˆìš©"
Status: Non-Compliant (ê·œì • ìœ„ë°˜!)
```

---

#### ğŸ—ï¸ Config êµ¬ì„± ìš”ì†Œ

**1. Configuration Item (CI):**
```
ë¦¬ì†ŒìŠ¤ì˜ íŠ¹ì • ì‹œì  êµ¬ì„± ìŠ¤ëƒ…ìƒ·

í¬í•¨ ë‚´ìš©:
âœ“ ë¦¬ì†ŒìŠ¤ ë©”íƒ€ë°ì´í„° (ID, ARN, íƒ€ì…)
âœ“ ì†ì„± (íƒœê·¸, ì„¤ì •ê°’)
âœ“ ê´€ê³„ (ì—°ê²°ëœ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤)
âœ“ ë³€ê²½ ì‚¬í•­
âœ“ CloudTrail ì´ë²¤íŠ¸ ì°¸ì¡°
```

**2. Configuration Recorder:**
```
ë¦¬ì†ŒìŠ¤ êµ¬ì„± ë³€ê²½ ê°ì§€ ë° ê¸°ë¡

ì„¤ì •:
- ê¸°ë¡í•  ë¦¬ì†ŒìŠ¤ ìœ í˜• ì„ íƒ
  â€¢ ëª¨ë“  ë¦¬ì†ŒìŠ¤
  â€¢ íŠ¹ì • ë¦¬ì†ŒìŠ¤ ìœ í˜•ë§Œ
- S3 ë²„í‚·ì— ì €ì¥
- SNS ì•Œë¦¼ ì„¤ì •
```

**3. Config Rules:**
```
ê·œì • ì¤€ìˆ˜ í™•ì¸ ê·œì¹™

ìœ í˜•:
- AWS Managed Rules (ì‚¬ì „ ì •ì˜)
- Custom Rules (Lambda ê¸°ë°˜)
```

---

#### ğŸ“œ Config Rules ìƒì„¸

**AWS Managed Rules ì˜ˆì‹œ:**

```
ë³´ì•ˆ ê´€ë ¨:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ebs-encrypted-volumes                   â”‚
â”‚ â€¢ EBS ë³¼ë¥¨ ì•”í˜¸í™” ì—¬ë¶€ í™•ì¸              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ restricted-ssh                          â”‚
â”‚ â€¢ SSH(22) í¬íŠ¸ê°€ 0.0.0.0/0 ì˜¤í”ˆ í™•ì¸    â”‚
â”‚ â€¢ ë³´ì•ˆ ê·¸ë£¹ ì ê²€                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ s3-bucket-public-read-prohibited        â”‚
â”‚ â€¢ S3 ë²„í‚· í¼ë¸”ë¦­ ì½ê¸° ì°¨ë‹¨ í™•ì¸          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cloudtrail-enabled                      â”‚
â”‚ â€¢ CloudTrail í™œì„±í™” ì—¬ë¶€ í™•ì¸            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ iam-password-policy                     â”‚
â”‚ â€¢ IAM ë¹„ë°€ë²ˆí˜¸ ì •ì±… ì¤€ìˆ˜ í™•ì¸            â”‚
â”‚ â€¢ ìµœì†Œ ê¸¸ì´, ë³µì¡ë„ ìš”êµ¬ì‚¬í•­             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë„¤íŠ¸ì›Œí¬ ê´€ë ¨:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ vpc-flow-logs-enabled                   â”‚
â”‚ â€¢ VPC Flow Logs í™œì„±í™” í™•ì¸              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ vpc-default-security-group-closed       â”‚
â”‚ â€¢ ê¸°ë³¸ Security Group ë‹«í˜ í™•ì¸          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê·œì¹™ ì ìš© ì˜ˆì‹œ:**

```
Rule: restricted-ssh

ì„¤ì •:
{
  "ConfigRuleName": "RestrictedSSH",
  "Source": {
    "Owner": "AWS",
    "SourceIdentifier": "INCOMING_SSH_DISABLED"
  },
  "Scope": {
    "ComplianceResourceTypes": [
      "AWS::EC2::SecurityGroup"
    ]
  }
}

í‰ê°€ ê²°ê³¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Resource ID     â”‚ Compliance   â”‚ Detail     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sg-0abc123      â”‚ Non-Compliantâ”‚ 0.0.0.0/0  â”‚
â”‚ sg-0def456      â”‚ Compliant    â”‚ 10.0.0.0/8 â”‚
â”‚ sg-0ghi789      â”‚ Compliant    â”‚ 192.168.0.0â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ğŸ”§ Custom Rules (ì‚¬ìš©ì ì •ì˜ ê·œì¹™)

**Lambda ê¸°ë°˜ ê·œì¹™:**

```python
import boto3
import json

def lambda_handler(event, context):
    """
    Custom Rule: EC2 ì¸ìŠ¤í„´ìŠ¤ì— 'Owner' íƒœê·¸ í•„ìˆ˜
    """
    config = boto3.client('config')
    ec2 = boto3.client('ec2')

    # Configê°€ ì „ë‹¬í•œ ë¦¬ì†ŒìŠ¤ ì •ë³´
    invoking_event = json.loads(event['invokingEvent'])
    configuration_item = invoking_event['configurationItem']
    resource_id = configuration_item['resourceId']

    # ê·œì • ì¤€ìˆ˜ ì—¬ë¶€ íŒë‹¨
    compliance_status = 'COMPLIANT'
    annotation = 'Owner íƒœê·¸ ì¡´ì¬'

    # EC2 ì¸ìŠ¤í„´ìŠ¤ íƒœê·¸ í™•ì¸
    response = ec2.describe_instances(InstanceIds=[resource_id])
    tags = response['Reservations'][0]['Instances'][0].get('Tags', [])

    # 'Owner' íƒœê·¸ ì¡´ì¬ ì—¬ë¶€
    owner_tag_exists = any(tag['Key'] == 'Owner' for tag in tags)

    if not owner_tag_exists:
        compliance_status = 'NON_COMPLIANT'
        annotation = 'Owner íƒœê·¸ ì—†ìŒ'

    # Configì— ê²°ê³¼ ë³´ê³ 
    config.put_evaluations(
        Evaluations=[
            {
                'ComplianceResourceType': configuration_item['resourceType'],
                'ComplianceResourceId': resource_id,
                'ComplianceType': compliance_status,
                'Annotation': annotation,
                'OrderingTimestamp': configuration_item['configurationItemCaptureTime']
            }
        ],
        ResultToken=event['resultToken']
    )

    return compliance_status
```

**Guard ê¸°ë°˜ ê·œì¹™:**

```
rule ec2_instance_in_vpc {
    AWS::EC2::Instance {
        VpcId exists
        VpcId != ""
    }
}

rule s3_bucket_versioning_enabled {
    AWS::S3::Bucket {
        VersioningConfiguration.Status == "Enabled"
    }
}

rule rds_encrypted {
    AWS::RDS::DBInstance {
        StorageEncrypted == true
    }
}
```

---

#### ğŸ”„ Remediation (ìë™ ìˆ˜ì •)

**ê°œë…:**
- ê·œì • ìœ„ë°˜ ë°œê²¬ ì‹œ **ìë™ìœ¼ë¡œ ìˆ˜ì •**
- AWS Systems Manager Automation ì‚¬ìš©

```mermaid
sequenceDiagram
    participant R as Resource
    participant C as Config
    participant A as Automation
    participant R2 as Resource (ìˆ˜ì •ë¨)

    R->>C: êµ¬ì„± ë³€ê²½ ê°ì§€
    C->>C: ê·œì¹™ í‰ê°€
    C->>C: Non-Compliant íŒì •
    C->>A: Remediation ì‹¤í–‰
    A->>R2: ìë™ ìˆ˜ì •
    R2->>C: êµ¬ì„± ì¬í‰ê°€
    C->>C: Compliant í™•ì¸
```

**ì˜ˆì‹œ 1: S3 ë²„í‚· í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨**

**ì‹œë‚˜ë¦¬ì˜¤:**
```
1. ìš´ì˜ìê°€ ì‹¤ìˆ˜ë¡œ S3 ë²„í‚·ì„ í¼ë¸”ë¦­ ì˜¤í”ˆ
   Block Public Access: Off

2. Config Rule ìœ„ë°˜ íƒì§€
   Rule: s3-bucket-public-read-prohibited
   Status: Non-Compliant

3. Remediation ìë™ ì‹¤í–‰
   Automation Document: AWS-PublishSNSNotification
   ë˜ëŠ” AWS-ConfigureS3BucketPublicAccessBlock

4. Block Public Access: On (ìë™ ìˆ˜ì •)

5. Config ì¬í‰ê°€
   Status: Compliant
```

**Automation Document ì˜ˆì‹œ:**
```yaml
description: S3 ë²„í‚· í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨
schemaVersion: '0.3'
parameters:
  BucketName:
    type: String
    description: S3 ë²„í‚· ì´ë¦„
mainSteps:
  - name: BlockPublicAccess
    action: 'aws:executeAwsApi'
    inputs:
      Service: s3
      Api: PutPublicAccessBlock
      Bucket: '&#123;% raw %&#125;&#123;&#123; BucketName &#125;&#125;&#123;% endraw %&#125;'
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        IgnorePublicAcls: true
        BlockPublicPolicy: true
        RestrictPublicBuckets: true
```

---

**ì˜ˆì‹œ 2: Security Group SSH ì œí•œ**

```
ë¬¸ì œ:
Security Groupì— 0.0.0.0/0ì—ì„œ SSH(22) í—ˆìš©

Remediation:
1. ìœ„ë°˜ íƒì§€
2. Automation ì‹¤í–‰
3. 0.0.0.0/0 ê·œì¹™ ì‚­ì œ
4. íŠ¹ì • IP(10.0.0.0/8)ë¡œ ì œí•œ
5. ìš´ì˜ìì—ê²Œ ì•Œë¦¼ (SNS)
```

---

#### ğŸ“Š Config Dashboard

**ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ë·°:**
```
ë¦¬ì†ŒìŠ¤ ì„ íƒ: sg-0abc123 (Security Group)

Timeline:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2024-12-10 10:00 - ìƒì„±                 â”‚
â”‚ 2024-12-10 14:30 - SSH ê·œì¹™ ì¶”ê°€        â”‚
â”‚ 2024-12-10 16:00 - HTTP ê·œì¹™ ì¶”ê°€       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Compliance:
â€¢ restricted-ssh: Non-Compliant
  â†’ SSHë¥¼ 0.0.0.0/0ì— ì˜¤í”ˆ

Changes:
Before (14:29):
{
  "ipPermissions": []
}

After (14:30):
{
  "ipPermissions": [{
    "fromPort": 22,
    "toPort": 22,
    "ipProtocol": "tcp",
    "ipRanges": [{"cidrIp": "0.0.0.0/0"}]
  }]
}
```

**ê·œì¹™ ê¸°ë°˜ ë·°:**
```
Rule: restricted-ssh

Compliance Summary:
â€¢ Compliant: 15 resources
â€¢ Non-Compliant: 3 resources

Non-Compliant Resources:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Resource ID     â”‚ Resource Typeâ”‚ Reason     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sg-0abc123      â”‚ SecurityGroupâ”‚ 0.0.0.0/0  â”‚
â”‚ sg-0def456      â”‚ SecurityGroupâ”‚ 0.0.0.0/0  â”‚
â”‚ sg-0ghi789      â”‚ SecurityGroupâ”‚ 0.0.0.0/0  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Remediation Available:
â†’ Remove-SSH-0.0.0.0-Rule
```

---

## ğŸ” SECTION 5: AWS ê³ ê¸‰ ë³´ì•ˆ ì„œë¹„ìŠ¤

### 1ï¸âƒ£ Amazon GuardDuty - ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€

#### ğŸ“‹ GuardDuty ê°œë…

**ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€ ì„œë¹„ìŠ¤:**
- ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ **ì´ìƒ í–‰ë™ íƒì§€**
- ì—¬ëŸ¬ ë¡œê·¸ ì†ŒìŠ¤ í†µí•© ë¶„ì„
- ì§€ì†ì  ëª¨ë‹ˆí„°ë§

```mermaid
graph TB
    subgraph "ë°ì´í„° ì†ŒìŠ¤"
        A[CloudTrail Logs]
        B[VPC Flow Logs]
        C[DNS Logs]
        D[S3 Data Events]
        E[EKS Audit Logs]
    end

    subgraph "GuardDuty"
        F[ë°ì´í„° ìˆ˜ì§‘]
        G[ë¨¸ì‹ ëŸ¬ë‹ ë¶„ì„]
        H[ìœ„í˜‘ ì¸í…”ë¦¬ì „ìŠ¤]
        I[ì´ìƒ íƒì§€]
    end

    subgraph "ì¶œë ¥"
        J[Findings<br/>ìœ„í˜‘ íƒì§€ ê²°ê³¼]
    end

    A --> F
    B --> F
    C --> F
    D --> F
    E --> F

    F --> G
    G --> I
    H --> I
    I --> J
```

---

#### ğŸ” íƒì§€ ìœ í˜•

**1. ë¹„ì •ìƒ API í˜¸ì¶œ:**
```
íƒì§€ ì˜ˆì‹œ:

UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration
â†’ EC2 ì¸ìŠ¤í„´ìŠ¤ ìê²© ì¦ëª…ì´ ì™¸ë¶€ì—ì„œ ì‚¬ìš©ë¨

Recon:IAMUser/UserPermissions
â†’ ê¶Œí•œ ì •ì°° í™œë™ (DescribeInstances ë“±)

Impact:IAMUser/AnomalousBehavior
â†’ í‰ì†Œì™€ ë‹¤ë¥¸ ë¹„ì •ìƒì  API í˜¸ì¶œ íŒ¨í„´

ì‹œë‚˜ë¦¬ì˜¤:
- í‰ì†Œ: aliceê°€ ì„œìš¸ ë¦¬ì „ì—ì„œë§Œ ì‘ì—…
- ì´ìƒ: aliceì˜ ìê²© ì¦ëª…ìœ¼ë¡œ ì‹±ê°€í¬ë¥´ì—ì„œ EC2 ìƒì„±
â†’ GuardDuty ì•Œë¦¼!
```

**2. ì•…ì„± IP ì ‘ê·¼:**
```
íƒì§€ ì˜ˆì‹œ:

UnauthorizedAccess:EC2/MaliciousIPCaller.Custom
â†’ ì•Œë ¤ì§„ ì•…ì„± IPì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ì ‘ê·¼

Backdoor:EC2/C&CActivity.B!DNS
â†’ C&C(Command & Control) ì„œë²„ í†µì‹  íƒì§€

Trojan:EC2/BlackholeTraffic
â†’ ë¸”ë™í™€ ë„¤íŠ¸ì›Œí¬ë¡œ íŠ¸ë˜í”½ ì „ì†¡

ìœ„í˜‘ ì¸í…”ë¦¬ì „ìŠ¤:
- AWS ìœ„í˜‘ ì¸í…”ë¦¬ì „ìŠ¤
- ì˜¤í”ˆ ì†ŒìŠ¤ ìœ„í˜‘ í”¼ë“œ
- íŒŒíŠ¸ë„ˆ ìœ„í˜‘ ì¸í…”ë¦¬ì „ìŠ¤
```

**3. ì•”í˜¸í™”í ì±„êµ´:**
```
íƒì§€ ì˜ˆì‹œ:

CryptoCurrency:EC2/BitcoinTool.B!DNS
â†’ ë¹„íŠ¸ì½”ì¸ ê´€ë ¨ ë„ë©”ì¸ í†µì‹ 

Impact:EC2/BitcoinDomainRequest.Reputation
â†’ ì•Œë ¤ì§„ ì±„êµ´ í’€ ì ‘ì†

Impact:EC2/PortScanFromInstance
â†’ ìƒˆë¡œìš´ íƒ€ê²Ÿ ìŠ¤ìº” (ë´‡ë„· í™œë™)
```

**4. ë¹„ì •ìƒ ê³„ì • í™œë™:**
```
íƒì§€ ì˜ˆì‹œ:

Stealth:IAMUser/CloudTrailLoggingDisabled
â†’ CloudTrail ë¡œê¹… ë¹„í™œì„±í™” ì‹œë„

Policy:IAMUser/RootCredentialUsage
â†’ ë£¨íŠ¸ ê³„ì • ì‚¬ìš© (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)

PenTest:IAMUser/KaliLinux
â†’ ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸ ë„êµ¬ ì‚¬ìš© íƒì§€
```

---

#### ğŸ“Š Findings (íƒì§€ ê²°ê³¼)

**Finding êµ¬ì¡°:**
```json
{
  "SchemaVersion": "2.0",
  "AccountId": "123456789012",
  "Region": "ap-northeast-2",
  "Id": "abc123def456",
  "Type": "UnauthorizedAccess:EC2/MaliciousIPCaller",
  "Severity": 8.0,
  "Title": "EC2 instance is communicating with known malicious IP",
  "Description": "EC2 instance i-0abc123 is attempting to communicate with a known malicious IP address 1.2.3.4",
  "Service": {
    "Action": {
      "NetworkConnectionAction": {
        "ConnectionDirection": "OUTBOUND",
        "RemoteIpDetails": {
          "IpAddressV4": "1.2.3.4",
          "Country": {
            "CountryName": "Russia"
          }
        }
      }
    }
  },
  "Resource": {
    "ResourceType": "Instance",
    "InstanceDetails": {
      "InstanceId": "i-0abc123",
      "InstanceType": "t2.micro"
    }
  }
}
```

**ì‹¬ê°ë„ (Severity):**
```
High (7.0 - 8.9):
ğŸ”´ ì¦‰ì‹œ ì¡°ì¹˜ í•„ìš”
- ê³„ì • íƒˆì·¨
- ì•…ì„±ì½”ë“œ ê°ì—¼
- ë°ì´í„° ìœ ì¶œ

Medium (4.0 - 6.9):
ğŸŸ¡ ì‹ ì†í•œ ì¡°ì‚¬ í•„ìš”
- ê¶Œí•œ ì˜¤ìš©
- ì •ì±… ìœ„ë°˜

Low (0.1 - 3.9):
ğŸŸ¢ ëª¨ë‹ˆí„°ë§ í•„ìš”
- ë¹„ì •ìƒ í™œë™ ì§•í›„
- ì ì¬ì  ìœ„í˜‘
```

---

#### ğŸ”— GuardDuty í†µí•©

**1. EventBridge ì—°ë™:**
```json
{
  "source": ["aws.guardduty"],
  "detail-type": ["GuardDuty Finding"],
  "detail": {
    "severity": [7, 8, 9]
  }
}
```

**ìë™í™” ì˜ˆì‹œ:**
```mermaid
graph LR
    A[GuardDuty<br/>Finding] --> B[EventBridge<br/>Rule]
    B --> C[Lambda<br/>ìë™ ëŒ€ì‘]
    C --> D[Security Group<br/>ì—…ë°ì´íŠ¸]
    C --> E[SNS<br/>ì•Œë¦¼]
    C --> F[DynamoDB<br/>ë¡œê·¸ ì €ì¥]
```

**Lambda ìë™ ëŒ€ì‘:**
```python
import boto3

def lambda_handler(event, context):
    """
    GuardDuty Finding ìë™ ëŒ€ì‘
    """
    finding = event['detail']
    severity = finding['severity']
    finding_type = finding['type']

    if 'MaliciousIPCaller' in finding_type:
        # ì•…ì„± IP ì°¨ë‹¨
        malicious_ip = finding['service']['action']['networkConnectionAction']['remoteIpDetails']['ipAddressV4']

        # WAFì— IP ì¶”ê°€
        wafv2 = boto3.client('wafv2')
        wafv2.update_ip_set(
            Name='BlockedIPs',
            Scope='REGIONAL',
            Id='ip-set-id',
            Addresses=[f'{malicious_ip}/32'],
            LockToken='token'
        )

        # NACLì— Deny ê·œì¹™ ì¶”ê°€
        ec2 = boto3.client('ec2')
        ec2.create_network_acl_entry(
            NetworkAclId='acl-123',
            RuleNumber=50,
            Protocol='-1',
            RuleAction='deny',
            CidrBlock=f'{malicious_ip}/32'
        )

        # SNS ì•Œë¦¼
        sns = boto3.client('sns')
        sns.publish(
            TopicArn='arn:aws:sns:region:account:admin',
            Subject='GuardDuty: ì•…ì„± IP ìë™ ì°¨ë‹¨',
            Message=f'IP {malicious_ip} ì°¨ë‹¨ ì™„ë£Œ'
        )
```

---

**2. Security Hub í†µí•©:**
```
GuardDuty Findings â†’ Security Hub
â†’ í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œì—ì„œ í™•ì¸
â†’ ë‹¤ë¥¸ ë³´ì•ˆ ì„œë¹„ìŠ¤ ê²°ê³¼ì™€ í†µí•© ë¶„ì„
```

---

### 2ï¸âƒ£ Amazon Inspector - ì·¨ì•½ì  ìŠ¤ìº”

**ê°œë…:**
- EC2 ì¸ìŠ¤í„´ìŠ¤ ë° ì»¨í…Œì´ë„ˆ **ì·¨ì•½ì  í‰ê°€**
- ì†Œí”„íŠ¸ì›¨ì–´ ë²„ì „ ë° CVE í™•ì¸

**ìŠ¤ìº” ëŒ€ìƒ:**
```
âœ“ EC2 ì¸ìŠ¤í„´ìŠ¤ OS ë° ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€
âœ“ ECR ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€
âœ“ Lambda í•¨ìˆ˜ ë° ê³„ì¸µ
```

**íƒì§€ ë‚´ìš©:**
```
âœ“ CVE (Common Vulnerabilities and Exposures)
âœ“ CIS (Center for Internet Security) ë²¤ì¹˜ë§ˆí¬
âœ“ ë„¤íŠ¸ì›Œí¬ ë…¸ì¶œ (ì—´ë¦° í¬íŠ¸)
```

**Finding ì˜ˆì‹œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CVE-2024-1234                           â”‚
â”‚                                         â”‚
â”‚ Severity: High (8.5)                    â”‚
â”‚ Package: openssl-1.1.1k                 â”‚
â”‚ Fixed Version: openssl-1.1.1l           â”‚
â”‚                                         â”‚
â”‚ Description:                            â”‚
â”‚ OpenSSL ì›ê²© ì½”ë“œ ì‹¤í–‰ ì·¨ì•½ì            â”‚
â”‚                                         â”‚
â”‚ Recommendation:                         â”‚
â”‚ yum update openssl                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3ï¸âƒ£ AWS Security Hub - í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ

**ê°œë…:**
- ì—¬ëŸ¬ ë³´ì•ˆ ì„œë¹„ìŠ¤ **ê²°ê³¼ í†µí•©**
- ì—…ê³„ í‘œì¤€ ê¸°ë°˜ í‰ê°€

```mermaid
graph TB
    subgraph "ë³´ì•ˆ ì„œë¹„ìŠ¤"
        A[GuardDuty]
        B[Inspector]
        C[Config]
        D[IAM Access Analyzer]
        E[Firewall Manager]
        F[Macie]
    end

    subgraph "Security Hub"
        G[í†µí•© ëŒ€ì‹œë³´ë“œ]
        H[ë³´ì•ˆ ì ìˆ˜]
        I[ê·œì • ì¤€ìˆ˜ í‰ê°€]
    end

    subgraph "ì¶œë ¥"
        J[EventBridge]
        K[3rd Party Tools]
    end

    A --> G
    B --> G
    C --> G
    D --> G
    E --> G
    F --> G

    G --> H
    G --> I

    G --> J
    G --> K
```

**ì œê³µ ê¸°ëŠ¥:**
```
âœ“ í†µí•© Findings ë³´ê¸°
âœ“ ìë™ ê·œì • ì¤€ìˆ˜ ì²´í¬
  - CIS AWS Foundations Benchmark
  - PCI DSS
  - AWS Foundational Security Best Practices

âœ“ ì‹¬ê°ë„ ê¸°ë°˜ ìš°ì„ ìˆœìœ„
âœ“ ìë™ ì•Œë¦¼ ë° ì›Œí¬í”Œë¡œìš°
```

---

### 4ï¸âƒ£ Network Firewall - ì¤‘ì•™ ì§‘ì¤‘ì‹ ë°©í™”ë²½

**íŠ¹ì§•:**
```
âœ“ ìƒíƒœ ì €ì¥(Stateful) ë°©í™”ë²½
âœ“ ìƒíƒœ ë¹„ì €ì¥(Stateless) ë°©í™”ë²½
âœ“ IPS (ì¹¨ì… ë°©ì§€ ì‹œìŠ¤í…œ) ê¸°ëŠ¥
âœ“ ë„ë©”ì¸ ê¸°ë°˜ í•„í„°ë§
âœ“ Suricata í˜¸í™˜ ê·œì¹™
```

**ì‚¬ìš© ì‚¬ë¡€:**
```
ì¤‘ì•™ ì§‘ì¤‘ì‹ íŠ¸ë˜í”½ í•„í„°ë§:
- ì—¬ëŸ¬ VPCì˜ íŠ¸ë˜í”½ì„ Inspection VPCë¡œ ë¼ìš°íŒ…
- Network Firewallì—ì„œ ê²€ì‚¬
- í—ˆìš©ëœ íŠ¸ë˜í”½ë§Œ í†µê³¼
```

---

### 5ï¸âƒ£ ê¸°íƒ€ ë³´ì•ˆ ì„œë¹„ìŠ¤

**Detective:**
- ë³´ì•ˆ ì´ë²¤íŠ¸ **ìƒì„¸ ì¡°ì‚¬ ë„êµ¬**
- ê·¼ë³¸ ì›ì¸ ë¶„ì„
- ê·¸ë˜í”„ ê¸°ë°˜ ì‹œê°í™”

**Cognito:**
- **ì‚¬ìš©ì ì¸ì¦** ì„œë¹„ìŠ¤
- User Pool (ì‚¬ìš©ì ê´€ë¦¬)
- Identity Pool (AWS ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê¶Œí•œ)
- ì†Œì…œ ë¡œê·¸ì¸ í†µí•©

**Directory Service:**
- **Active Directory** ê´€ë¦¬
- AWS Managed Microsoft AD
- AD Connector
- Simple AD

---

## ğŸ§ª SECTION 6: WAF ì‹¤ìŠµ - ì›¹ ì„œë¹„ìŠ¤ ë³´í˜¸

### ì‹¤ìŠµ ëª©í‘œ

**êµ¬í˜„í•  ì•„í‚¤í…ì²˜:**
```mermaid
graph TB
    A[ì¸í„°ë„· ì‚¬ìš©ì] --> B[ALB<br/>+ WAF]
    B --> C[Private Subnet<br/>ì›¹ ì„œë²„]

    C --> D[NAT Gateway]
    D --> E[Internet Gateway]

    style B fill:#FFD700
    style C fill:#87CEEB
```

**ì‹¤ìŠµ ë‚´ìš©:**
```
1. NAT Gateway ìƒì„± (ì„ íƒ)
2. ì›¹ ì„œë²„ (EC2) ìƒì„±
3. Target Group ìƒì„±
4. Application Load Balancer ìƒì„±
5. WAF Web ACL ìƒì„±
6. IP Set ê¸°ë°˜ ì°¨ë‹¨/í—ˆìš© í…ŒìŠ¤íŠ¸
```

---

### Step 1: NAT Gateway ìƒì„± (ì„ íƒì‚¬í•­)

**í•„ìš”í•œ ê²½ìš°:**
```
âœ“ Session Managerë¡œ ì„œë²„ ì ‘ì† í•„ìš” ì‹œ
âœ“ ì„œë²„ì—ì„œ ì¸í„°ë„· ì ‘ê·¼ í•„ìš” ì‹œ

ë¶ˆí•„ìš”í•œ ê²½ìš°:
âœ— ì›¹ ì„œë¹„ìŠ¤ë§Œ í…ŒìŠ¤íŠ¸ (ì ‘ì† ë¶ˆí•„ìš”)
```

**ìƒì„± ë°©ë²•:**
```
VPC â†’ NAT Gateways â†’ Create NAT gateway

Name: [T12345-nat-gw]
Subnet: [Public Subnet ì„ íƒ]
Elastic IP: [Allocate Elastic IP]

[Create NAT gateway]
```

**Route Table ì—…ë°ì´íŠ¸:**
```
Route Tables â†’ Private Route Table ì„ íƒ

Routes â†’ Edit routes â†’ Add route
  Destination: 0.0.0.0/0
  Target: NAT Gateway

[Save changes]
```

---

### Step 2: ì›¹ ì„œë²„ ìƒì„±

**EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±:**
```
EC2 â†’ Instances â†’ Launch instances

Name: [T12345-web-server]

AMI: Amazon Linux 2023

Instance type: t2.micro (ë˜ëŠ” t3.micro)

Key pair:
  â¦¿ Proceed without a key pair
  (Session Manager ì‚¬ìš© ì‹œ)

Network settings:
  VPC: [ê¸°ì¡´ VPC]
  Subnet: [Private Subnet]
  Auto-assign public IP: Disable

Firewall (Security Group):
  â¦¿ Select existing security group
  Security group: [T12345-vpc-web-sg]

  â†’ HTTP(80) from ALB Security Group í—ˆìš©

Advanced details:
  IAM instance profile: [SSMInstanceProfile]

  User data:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  #!/bin/bash
  yum update -y
  yum install -y httpd
  systemctl start httpd
  systemctl enable httpd

  # ê°„ë‹¨í•œ ì›¹ í˜ì´ì§€
  cat <<EOF > /var/www/html/index.html
  <html>
  <head><title>WAF Test</title></head>
  <body>
    <h1>AWS WAF Test Server</h1>
    <p>Server IP: $(hostname -I)</p>
    <p>Timestamp: $(date)</p>
  </body>
  </html>
  EOF
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[Launch instance]
```

---

### Step 3: Target Group ìƒì„±

```
EC2 â†’ Target Groups â†’ Create target group

Choose a target type:
  â¦¿ Instances

Target group name: [T12345-web-tg]

Protocol: HTTP
Port: 80

VPC: [ê¸°ì¡´ VPC]

Health check:
  Protocol: HTTP
  Path: /
  (ë‚˜ë¨¸ì§€ ê¸°ë³¸ê°’)

[Next]

Register targets:
  [âœ“] T12345-web-server ì„ íƒ
  Ports: 80
  [Include as pending below]

[Create target group]
```

---

### Step 4: Application Load Balancer ìƒì„±

```
EC2 â†’ Load Balancers â†’ Create Load Balancer

Application Load Balancer â†’ [Create]

Basic configuration:
  Name: [T12345-alb]
  Scheme: â¦¿ Internet-facing
  IP address type: IPv4

Network mapping:
  VPC: [ê¸°ì¡´ VPC]
  Mappings:
    [âœ“] AZ 1: Public Subnet 1
    [âœ“] AZ 2: Public Subnet 2

Security groups:
  [T12345-vpc-alb-sg]
  â†’ HTTP(80) from 0.0.0.0/0 í—ˆìš©

Listeners and routing:
  Protocol: HTTP
  Port: 80
  Default action: [T12345-web-tg]

[Create load balancer]
```

**ALB DNS í™•ì¸:**
```
State: Activeê°€ ë  ë•Œê¹Œì§€ ëŒ€ê¸° (2-3ë¶„)

DNS name: T12345-alb-123456789.ap-northeast-2.elb.amazonaws.com

ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸:
http://T12345-alb-123456789.ap-northeast-2.elb.amazonaws.com
â†’ "AWS WAF Test Server" í˜ì´ì§€ í‘œì‹œ í™•ì¸
```

---

### Step 5: WAF Web ACL ìƒì„±

**IP Set ìƒì„± (ì°¨ë‹¨ìš©):**
```
WAF & Shield â†’ IP sets â†’ Create IP set

IP set name: [BlockedIPs]
Region: â¦¿ Asia Pacific (Seoul)
IP version: IPv4

IP addresses:
  [ë‚´ IP ì£¼ì†Œ ì…ë ¥]
  ì˜ˆ: 203.0.113.50/32

[Create IP set]
```

**ë‚´ IP í™•ì¸ ë°©ë²•:**
```
ë°©ë²• 1: ì›¹ì‚¬ì´íŠ¸ ì´ìš©
https://www.whatismyip.com/

ë°©ë²• 2: Security Groupì—ì„œ
EC2 â†’ Security Groups â†’ Inbound rules
â†’ My IP í´ë¦­í•˜ë©´ í‘œì‹œë¨
```

---

**Web ACL ìƒì„±:**
```
WAF & Shield â†’ Web ACLs â†’ Create web ACL

Name: [T12345-web-acl]
Resource type: â¦¿ Regional resources (ALB, API Gateway)
Region: Asia Pacific (Seoul)

Associated AWS resources:
  [Add AWS resources]
  â†’ ALB ì„ íƒ: T12345-alb
  [Add]

[Next]

Add rules and rule groups:
  [Add rules] â†’ [Add my own rules and rule groups]

  Rule type: â¦¿ IP set
  Name: [BlockIPSetRule]
  IP set: [BlockedIPs]
  IP address to use as match condition:
    â¦¿ Source IP address
  Action: â¦¿ Block

  [Add rule]

[Next]

Set rule priority:
  Priority 0: BlockIPSetRule

Default action:
  â¦¿ Allow

[Next]

CloudWatch metrics:
  â¦¿ Enable (ê¸°ë³¸ê°’)

[Next]

Review and create:
[Create web ACL]
```

---

### Step 6: í…ŒìŠ¤íŠ¸

**ì •ìƒ ì ‘ì† (ë‹¤ë¥¸ IP):**
```
ë¸Œë¼ìš°ì € (ë‚´ IP ì•„ë‹˜):
http://T12345-alb-123456789.ap-northeast-2.elb.amazonaws.com

ê²°ê³¼: âœ“ ì›¹ í˜ì´ì§€ ì •ìƒ í‘œì‹œ
```

**ì°¨ë‹¨ëœ ì ‘ì† (ë‚´ IP):**
```
ë¸Œë¼ìš°ì € (ë‚´ IP):
http://T12345-alb-123456789.ap-northeast-2.elb.amazonaws.com

ê²°ê³¼:
HTTP 403 Forbidden
The request could not be satisfied.

â†’ WAFì— ì˜í•´ ì°¨ë‹¨ë¨!
```

---

**WAF ë¡œê·¸ í™•ì¸:**
```
WAF & Shield â†’ Web ACLs â†’ T12345-web-acl
â†’ Logging and metrics íƒ­

Sampled requests:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Time           â”‚ Source  â”‚ URI            â”‚ Action   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 14:30:15       â”‚ 1.2.3.4 â”‚ /              â”‚ Block    â”‚
â”‚ 14:29:45       â”‚ 5.6.7.8 â”‚ /              â”‚ Allow    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Step 7: IP Setì„ Allowë¡œ ë³€ê²½ (ì¶”ê°€ í…ŒìŠ¤íŠ¸)

**White List í…ŒìŠ¤íŠ¸:**

**ìƒˆ IP Set ìƒì„±:**
```
IP sets â†’ Create IP set
Name: [AllowedIPs]
IP addresses: [ë‚´ IPë§Œ ì…ë ¥]
```

**Web ACL ê·œì¹™ ìˆ˜ì •:**
```
Web ACLs â†’ T12345-web-acl â†’ Rules íƒ­

[Add rules] â†’ [Add my own rules and rule groups]

Rule type: â¦¿ IP set
Name: [AllowIPSetRule]
IP set: [AllowedIPs]
Action: â¦¿ Allow

Priority: 0 (ìµœìš°ì„ )
BlockIPSetRule Priority: 1

Default action: â¦¿ Block
```

**ê²°ê³¼:**
```
ë‚´ IP: âœ“ ì ‘ì† ê°€ëŠ¥ (Allow ê·œì¹™)
ë‹¤ë¥¸ IP: âœ— ì ‘ì† ì°¨ë‹¨ (Default Block)
```

---

### Step 8: Rate Limiting í…ŒìŠ¤íŠ¸

**Rate-Based Rule ì¶”ê°€:**
```
Web ACLs â†’ T12345-web-acl â†’ Rules

[Add rules] â†’ [Add my own rules and rule groups]

Rule type: â¦¿ Rate-based rule
Name: [RateLimitRule]

Rate limit: [100] requests per 5 minutes
Criteria to count request towards rate limit:
  â¦¿ Only consider requests that match the criteria below
  â†’ (í•„í„° ì„¤ì • ê°€ëŠ¥, ì§€ê¸ˆì€ ì „ì²´ ìš”ì²­ ëŒ€ìƒ)

Action when rate is exceeded:
  â¦¿ Block

[Add rule]
```

**í…ŒìŠ¤íŠ¸:**
```bash
# ë°˜ë³µ ìš”ì²­ (100íšŒ ì´ˆê³¼)
for i in {1..150}; do
  curl http://T12345-alb-123456789.ap-northeast-2.elb.amazonaws.com
  sleep 0.1
done

# ê²°ê³¼:
# ì²˜ìŒ 100íšŒ: ì •ìƒ ì‘ë‹µ
# 100íšŒ ì´ˆê³¼: 403 Forbidden (5ë¶„ê°„ ì°¨ë‹¨)
```

---

### Step 9: Managed Rules ì ìš©

**AWS Managed Rules ì¶”ê°€:**
```
Web ACLs â†’ T12345-web-acl â†’ Rules

[Add rules] â†’ [Add managed rule groups]

AWS managed rule groups:
  [âœ“] Core rule set
      - OWASP Top 10 ë°©ì–´
      - SQL Injection, XSS ë°©ì–´

  [âœ“] Known bad inputs
      - ì•Œë ¤ì§„ ì•…ì„± íŒ¨í„´ ì°¨ë‹¨

[Add rules]
```

**SQL Injection í…ŒìŠ¤íŠ¸:**
```bash
# ì •ìƒ ìš”ì²­
curl "http://alb-dns/?id=123"
â†’ 200 OK

# SQL Injection ì‹œë„
curl "http://alb-dns/?id=1' OR '1'='1"
â†’ 403 Forbidden (WAF ì°¨ë‹¨)

curl "http://alb-dns/?search=<script>alert('XSS')</script>"
â†’ 403 Forbidden (WAF ì°¨ë‹¨)
```

---

### Step 10: ì •ë¦¬ (Clean Up)

```
1. Web ACL ì‚­ì œ
   WAF â†’ Web ACLs â†’ Delete

2. IP Sets ì‚­ì œ
   WAF â†’ IP sets â†’ Delete

3. ALB ì‚­ì œ
   EC2 â†’ Load Balancers â†’ Delete

4. Target Group ì‚­ì œ
   EC2 â†’ Target Groups â†’ Delete

5. EC2 ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ
   EC2 â†’ Instances â†’ Terminate

6. NAT Gateway ì‚­ì œ (ë§Œë“¤ì—ˆë‹¤ë©´)
   VPC â†’ NAT Gateways â†’ Delete
   â†’ Elastic IP ë¦´ë¦¬ìŠ¤
```

---

## âœ… Sections 4, 5, 6 í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Shield
```
â–¡ DDoS ê³µê²© ìœ í˜• ì´í•´ (Layer 3, 4, 7)
â–¡ Shield Standard vs Advanced ì°¨ì´
â–¡ Shield ì ìš© ëŒ€ìƒ ì„œë¹„ìŠ¤
â–¡ DDoS ë°©ì–´ ì•„í‚¤í…ì²˜ ì„¤ê³„
```

### WAF
```
â–¡ WAF ê°œë… ë° ìš©ë„
â–¡ SQL Injection, XSS ê³µê²© ì´í•´
â–¡ Web ACL, Rules, IP Set êµ¬ì¡°
â–¡ AWS Managed Rules í™œìš©
â–¡ Rate Limiting ì„¤ì •
â–¡ WAF ì‹¤ìŠµ ì™„ë£Œ
```

### Config
```
â–¡ Config vs CloudTrail ì°¨ì´
â–¡ Configuration Item ê°œë…
â–¡ Config Rules ì‘ì„±
â–¡ Remediation ìë™ ìˆ˜ì •
â–¡ ê·œì • ì¤€ìˆ˜ í™•ì¸
```

### GuardDuty
```
â–¡ ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€ ê°œë…
â–¡ ë°ì´í„° ì†ŒìŠ¤ (CloudTrail, VPC Flow Logs)
â–¡ Findings í•´ì„
â–¡ EventBridge ìë™í™” ì—°ë™
```

### Inspector
```
â–¡ ì·¨ì•½ì  ìŠ¤ìº” ê°œë…
â–¡ CVE í™•ì¸ ë°©ë²•
â–¡ ì†Œí”„íŠ¸ì›¨ì–´ ë²„ì „ ê´€ë¦¬
```

### Security Hub
```
â–¡ í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ ê°œë…
â–¡ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê²°ê³¼ í†µí•©
â–¡ ê·œì • ì¤€ìˆ˜ í‰ê°€
```

### ì‹¤ìŠµ
```
â–¡ WAF Web ACL ìƒì„±
â–¡ IP Set ì°¨ë‹¨/í—ˆìš© í…ŒìŠ¤íŠ¸
â–¡ Rate Limiting í…ŒìŠ¤íŠ¸
â–¡ Managed Rules ì ìš©
â–¡ ì „ì²´ ì•„í‚¤í…ì²˜ ì´í•´
```

---

## ğŸ“ Day 6 ì „ì²´ í•™ìŠµ ì™„ë£Œ!

**í•™ìŠµí•œ ë‚´ìš© ìš”ì•½:**
1. âœ… Day 5 ë³µìŠµ (Section 1)
2. âœ… ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ (Section 2)
3. âœ… ë¡œê·¸ ë° ëª¨ë‹ˆí„°ë§ (Section 3)
4. âœ… ê¸°ë³¸ ë³´ì•ˆ ì„œë¹„ìŠ¤ (Section 4)
5. âœ… ê³ ê¸‰ ë³´ì•ˆ ì„œë¹„ìŠ¤ (Section 5)
6. âœ… WAF ì‹¤ìŠµ (Section 6)

**ì´ ì¤„ ìˆ˜:** 2,000+ ì¤„
**ì´ ì„¹ì…˜:** 6ê°œ
**ì‹¤ìŠµ:** 3ê°œ (DynamoDB, VPC Flow Logs, WAF)

---

**ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ‰**
