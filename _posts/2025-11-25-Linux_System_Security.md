--- 
title: "ğŸ“ Linux ì‹œìŠ¤í…œ ë³´ì•ˆ - ì‚¬ìš©ì ê´€ë¦¬ ë° íŒŒì¼ ê¶Œí•œ ê°•ì˜ ë…¸íŠ¸"
date: 2025-11-25
excerpt: "ì˜¤ëŠ˜ ê°•ì˜ì—ì„œëŠ” Linux ì‹œìŠ¤í…œì˜ í•µì‹¬ì ì¸ ë³´ì•ˆ ìš”ì†Œì¸ ì‚¬ìš©ì ê´€ë¦¬ì™€ íŒŒì¼ ê¶Œí•œ ì‹œìŠ¤í…œì— ëŒ€í•´ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. ì´ ë‘ ê°€ì§€ ê°œë…ì€ Linux ì‹œìŠ¤í…œ ë³´ì•ˆì˜ ê¸°ì´ˆì´ì ê°€ì¥ ì¤‘ìš”í•œ ë°©ì–´ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤."
categories:
  - SK_Rookies
  - Linux-Network
tags:
  - Linux-Network
  - SK_Rookies
---

# ğŸ“ Linux ì‹œìŠ¤í…œ ë³´ì•ˆ - ì‚¬ìš©ì ê´€ë¦¬ ë° íŒŒì¼ ê¶Œí•œ ê°•ì˜ ë…¸íŠ¸

## ğŸ“š ê°•ì˜ ê°œìš”

ì˜¤ëŠ˜ ê°•ì˜ì—ì„œëŠ” Linux ì‹œìŠ¤í…œì˜ í•µì‹¬ì ì¸ ë³´ì•ˆ ìš”ì†Œì¸ **ì‚¬ìš©ì ê´€ë¦¬**ì™€ **íŒŒì¼ ê¶Œí•œ ì‹œìŠ¤í…œ**ì— ëŒ€í•´ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. ì´ ë‘ ê°€ì§€ ê°œë…ì€ Linux ì‹œìŠ¤í…œ ë³´ì•ˆì˜ ê¸°ì´ˆì´ì ê°€ì¥ ì¤‘ìš”í•œ ë°©ì–´ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.

### ğŸ¯ í•™ìŠµ ëª©í‘œ

ì´ë²ˆ ê°•ì˜ë¥¼ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì„ í•™ìŠµí•©ë‹ˆë‹¤:

1. **ì‚¬ìš©ì ë° ê·¸ë£¹ ê´€ë¦¬ ì‹œìŠ¤í…œ ì´í•´**
   - Linuxì˜ ì‚¬ìš©ì ê³„ì • êµ¬ì¡°
   - ê·¸ë£¹ ê°œë…ê³¼ ê¶Œí•œ ê´€ë¦¬
   - ì‚¬ìš©ì ì •ë³´ ì €ì¥ íŒŒì¼ë“¤ì˜ êµ¬ì¡°ì™€ ì˜ë¯¸

2. **ì‚¬ìš©ì/ê·¸ë£¹ ê´€ë¦¬ ëª…ë ¹ì–´ ë§ˆìŠ¤í„°**
   - `useradd`, `usermod`, `userdel` ëª…ë ¹ì–´
   - `groupadd`, `groupmod`, `groupdel` ëª…ë ¹ì–´
   - `passwd` ëª…ë ¹ì–´ë¥¼ í†µí•œ ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬
   - `su`, `sudo` ëª…ë ¹ì–´ë¥¼ í†µí•œ ê¶Œí•œ ì „í™˜

3. **íŒŒì¼ ê¶Œí•œ(Permission) ì‹œìŠ¤í…œ**
   - ì½ê¸°(r), ì“°ê¸°(w), ì‹¤í–‰(x) ê¶Œí•œì˜ ì˜ë¯¸
   - ì†Œìœ ì(Owner), ê·¸ë£¹(Group), ê¸°íƒ€(Other) ê¶Œí•œ êµ¬ì¡°
   - `chmod`, `chown`, `chgrp` ëª…ë ¹ì–´

4. **íŠ¹ìˆ˜ ê¶Œí•œ ì´í•´**
   - SETUID, SETGIDì˜ ë™ì‘ ì›ë¦¬ì™€ ë³´ì•ˆ ìœ„í—˜ì„±
   - Sticky Bitì˜ ì—­í• 
   - umaskë¥¼ í†µí•œ ê¸°ë³¸ ê¶Œí•œ ì„¤ì •

### ğŸ’¡ ì™œ ì´ê²ƒì´ ì¤‘ìš”í•œê°€?

Linux ì‹œìŠ¤í…œì—ì„œ **ì‚¬ìš©ì ê´€ë¦¬**ì™€ **íŒŒì¼ ê¶Œí•œ**ì€ ë³´ì•ˆì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ì–´ì„ ì…ë‹ˆë‹¤:

- **ìµœì†Œ ê¶Œí•œ ì›ì¹™(Principle of Least Privilege)**: ê° ì‚¬ìš©ìì™€ í”„ë¡œì„¸ìŠ¤ëŠ” ì‘ì—… ìˆ˜í–‰ì— í•„ìš”í•œ ìµœì†Œí•œì˜ ê¶Œí•œë§Œ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.
- **ê¶Œí•œ ë¶„ë¦¬(Separation of Privileges)**: root ì‚¬ìš©ìì˜ ë§‰ê°•í•œ ê¶Œí•œì„ ì œí•œí•˜ê³ , ì¼ë°˜ ì‚¬ìš©ìê°€ í•„ìš”í•  ë•Œë§Œ íŠ¹ì • ê¶Œí•œì„ íšë“í•˜ë„ë¡ í•©ë‹ˆë‹¤.
- **ë°ì´í„° ë³´í˜¸**: íŒŒì¼ê³¼ ë””ë ‰í„°ë¦¬ì˜ ê¶Œí•œì„ ì ì ˆíˆ ì„¤ì •í•˜ì—¬ ë¬´ë‹¨ ì ‘ê·¼, ìˆ˜ì •, ì‚­ì œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
- **ê°ì‚¬ ì¶”ì (Audit Trail)**: ëˆ„ê°€, ì–¸ì œ, ë¬´ì—‡ì„ í–ˆëŠ”ì§€ ì¶”ì í•  ìˆ˜ ìˆëŠ” ê¸°ë°˜ì„ ë§ˆë ¨í•©ë‹ˆë‹¤.

âš ï¸ **ë³´ì•ˆ ê´€ì ì—ì„œì˜ ì¤‘ìš”ì„±**: ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œ ì¹¨í•´ ì‚¬ê³ ëŠ” ë¶€ì ì ˆí•œ ì‚¬ìš©ì ê¶Œí•œ ì„¤ì •ì´ë‚˜ ì˜ëª»ëœ íŒŒì¼ ê¶Œí•œìœ¼ë¡œ ì¸í•´ ë°œìƒí•©ë‹ˆë‹¤. íŠ¹íˆ **SETUID** ê¶Œí•œì´ ì˜ëª» ì„¤ì •ëœ íŒŒì¼ì€ **ê¶Œí•œ ìƒìŠ¹(Privilege Escalation)** ê³µê²©ì˜ ì£¼ìš” ê²½ë¡œê°€ ë©ë‹ˆë‹¤.

---

## ğŸ“‹ ê°•ì˜ êµ¬ì„±

### ì œ1ë¶€: ì‚¬ìš©ì ë° ê·¸ë£¹ ê´€ë¦¬ì˜ ê¸°ì´ˆ
- Linuxì˜ ì‚¬ìš©ì ê³„ì • ì‹œìŠ¤í…œ
- `/etc/passwd`, `/etc/shadow`, `/etc/group` íŒŒì¼ êµ¬ì¡°
- ì‚¬ìš©ì ìƒì„± ì‹œ ê¸°ë³¸ ì„¤ì • íŒŒì¼ë“¤

### ì œ2ë¶€: ì‚¬ìš©ì ë° ê·¸ë£¹ ê´€ë¦¬ ëª…ë ¹ì–´
- ì‚¬ìš©ì ìƒì„±, ìˆ˜ì •, ì‚­ì œ
- ê·¸ë£¹ ìƒì„±, ìˆ˜ì •, ì‚­ì œ
- ë¹„ë°€ë²ˆí˜¸ ì •ì±… ë° ê´€ë¦¬
- `su`ì™€ `sudo`ì˜ ì°¨ì´ì 

### ì œ3ë¶€: íŒŒì¼ ê¶Œí•œ ì‹œìŠ¤í…œ
- íŒŒì¼ê³¼ ë””ë ‰í„°ë¦¬ì˜ ê¶Œí•œ êµ¬ì¡°
- ì½ê¸°, ì“°ê¸°, ì‹¤í–‰ ê¶Œí•œì˜ ì‹¤ì œ ì˜ë¯¸
- ì†Œìœ ê¶Œ(Ownership) ê´€ë¦¬

### ì œ4ë¶€: íŠ¹ìˆ˜ ê¶Œí•œê³¼ ë³´ì•ˆ
- SETUID/SETGIDì˜ ë™ì‘ ì›ë¦¬
- SETUIDì˜ ë³´ì•ˆ ìœ„í—˜ì„±
- Sticky Bitì˜ í™œìš©
- umaskë¥¼ í†µí•œ ê¸°ë³¸ ê¶Œí•œ ì œì–´

### ì œ5ë¶€: ì¢…í•© ì‹¤ìŠµ
- ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ì„¤ì •
- íŒŒì¼ ê¶Œí•œ ë³€ê²½ ì‹¤ìŠµ
- íŠ¹ìˆ˜ ê¶Œí•œ ì„¤ì • ë° ê²€ì¦

---

## ğŸ” ê°•ì˜ ì¤‘ ê°•ì¡°ëœ ë³´ì•ˆ í¬ì¸íŠ¸

ê°•ì‚¬ë‹˜ê»˜ì„œ íŠ¹ë³„íˆ ê°•ì¡°í•˜ì‹  ë³´ì•ˆ ê´€ë ¨ í•µì‹¬ ì‚¬í•­ë“¤:

1. **SETUIDëŠ” ë§¤ìš° ìœ„í—˜í•œ ê¶Œí•œì…ë‹ˆë‹¤**
   - ì˜ëª» ì„¤ì •í•˜ë©´ ê¶Œí•œ ìƒìŠ¹ ê³µê²©ì˜ ê²½ë¡œê°€ ë©ë‹ˆë‹¤
   - ë°˜ë“œì‹œ í•„ìš”í•œ ì‹œìŠ¤í…œ íŒŒì¼ì—ë§Œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤
   - ì •ê¸°ì ìœ¼ë¡œ SETUIDê°€ ì„¤ì •ëœ íŒŒì¼ì„ ì ê²€í•´ì•¼ í•©ë‹ˆë‹¤

2. **sudo ê¶Œí•œ ë¶€ì—¬ ì‹œ ì£¼ì˜ì‚¬í•­**
   - ëª¨ë“  ì‚¬ìš©ìì—ê²Œ sudo ê¶Œí•œì„ ì£¼ë©´ ì•ˆ ë©ë‹ˆë‹¤
   - ìµœì†Œ ê¶Œí•œ ì›ì¹™ì— ë”°ë¼ í•„ìš”í•œ ëª…ë ¹ì–´ë§Œ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤
   - ê°ì‚¬ ë¡œê·¸ë¥¼ í†µí•´ sudo ì‚¬ìš© ë‚´ì—­ì„ ì¶”ì í•´ì•¼ í•©ë‹ˆë‹¤

3. **umask ê°’ ì„¤ì •ì˜ ì¤‘ìš”ì„±**
   - umask ê°’ì´ ë„ˆë¬´ ë‚®ìœ¼ë©´(ì˜ˆ: 0000) ë³´ì•ˆ ì·¨ì•½ì ì´ ë©ë‹ˆë‹¤
   - ì¼ë°˜ì ìœ¼ë¡œ 022 ë˜ëŠ” 027ì„ ê¶Œì¥í•©ë‹ˆë‹¤
   - ì·¨ì•½ì  ì ê²€ ì‹œ ë¶€ì ì ˆí•œ umask ê°’ì€ ì¦‰ì‹œ ë°œê²¬ë©ë‹ˆë‹¤

4. **ì„€ë„ìš° íŒŒì¼ì˜ ë³´í˜¸**
   - `/etc/shadow` íŒŒì¼ì€ rootë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤
   - ë¹„ë°€ë²ˆí˜¸ í•´ì‹œê°€ ë…¸ì¶œë˜ë©´ brute-force ê³µê²©ì˜ ëŒ€ìƒì´ ë©ë‹ˆë‹¤

---

## ğŸ“Œ ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­

ì´ë²ˆ ê°•ì˜ ì‹¤ìŠµì„ ìœ„í•´ ë‹¤ìŒ í™˜ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤:

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- **ìš´ì˜ì²´ì œ**: Ubuntu Linux (ê°•ì˜ì—ì„œëŠ” Ubuntu ì‚¬ìš©)
- **ê¶Œí•œ**: root ê¶Œí•œ ë˜ëŠ” sudo ê¶Œí•œì´ ìˆëŠ” ê³„ì •
- **í„°ë¯¸ë„**: ìµœì†Œ 2ê°œì˜ í„°ë¯¸ë„ ì°½ (ì¼ë°˜ ì‚¬ìš©ì / root ì‚¬ìš©ì)

### í•„ìš”í•œ ì§€ì‹
- ê¸°ë³¸ì ì¸ Linux ëª…ë ¹ì–´ (`ls`, `cd`, `cat`, `mkdir` ë“±)
- í„°ë¯¸ë„ ì‚¬ìš© ë°©ë²•
- í…ìŠ¤íŠ¸ ì—ë””í„° ì‚¬ìš©ë²• (`vi` ë˜ëŠ” `nano`)

### ì‹¤ìŠµ í™˜ê²½ ì„¤ì •

**Step 1: root ì‚¬ìš©ìë¡œ ì „í™˜í•˜ê¸°**
```bash
# ë°©ë²• 1: su ëª…ë ¹ì–´ ì‚¬ìš©
$ su -
Password: [root ë¹„ë°€ë²ˆí˜¸ ì…ë ¥]

# ë°©ë²• 2: sudoë¥¼ í†µí•œ root shell ì‹¤í–‰
$ sudo -i
[sudo] password for ubuntu: [í˜„ì¬ ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥]
```

**Step 2: í„°ë¯¸ë„ ì°½ 2ê°œ ì—´ê¸°**
- í„°ë¯¸ë„ 1: root ì‚¬ìš©ììš©
- í„°ë¯¸ë„ 2: ì¼ë°˜ ì‚¬ìš©ì(ubuntu)ìš©

**Step 3: ì‹¤ìŠµìš© ë””ë ‰í„°ë¦¬ ìƒì„±**
```bash
# root ì‚¬ìš©ìë¡œ ì‹¤í–‰
# mkdir -p /backup
# cd /backup
```

---

## ğŸ“ ê°•ì˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” í‘œê¸° ê·œì¹™

ê°•ì˜ ë…¸íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” í”„ë¡¬í”„íŠ¸ í‘œì‹œ:

- `#`: root ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ (UID=0ì¸ ìŠˆí¼ìœ ì €)
- `$`: ì¼ë°˜ ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ (ubuntu ë“±)

**ì˜ˆì‹œ:**
```bash
# useradd testuser    # root ê¶Œí•œì´ í•„ìš”í•œ ëª…ë ¹ì–´
$ passwd              # ì¼ë°˜ ì‚¬ìš©ìë„ ì‹¤í–‰ ê°€ëŠ¥í•œ ëª…ë ¹ì–´
```

### íŒŒì¼ ê²½ë¡œ í‘œê¸°

- **ì ˆëŒ€ ê²½ë¡œ**: `/etc/passwd` (ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ë¶€í„° ì‹œì‘)
- **ìƒëŒ€ ê²½ë¡œ**: `./test.txt` (í˜„ì¬ ë””ë ‰í„°ë¦¬ ê¸°ì¤€)
- **í™ˆ ë””ë ‰í„°ë¦¬**: `~/` ë˜ëŠ” `$HOME` (ì‚¬ìš©ì í™ˆ ë””ë ‰í„°ë¦¬)

---

## ğŸ’­ í•™ìŠµ íŒ

### ì´ë¡ ê³¼ ì‹¤ìŠµì˜ ë³‘í–‰
- **ê°œë…ì„ ë¨¼ì € ì´í•´í•˜ê³ **, ë°˜ë“œì‹œ **ì§ì ‘ ì‹¤ìŠµ**í•´ë³´ì„¸ìš”
- ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œ í›„ **ê²°ê³¼ë¥¼ í™•ì¸**í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ì„¸ìš”
- ì˜ë„í•œ ê²°ê³¼ì™€ ë‹¤ë¥´ê²Œ ë‚˜ì™”ë‹¤ë©´ **ì™œ ê·¸ëŸ°ì§€ ë¶„ì„**í•˜ì„¸ìš”

### ë³´ì•ˆ ë§ˆì¸ë“œì…‹
- ëª¨ë“  ì„¤ì •ì„ í•  ë•Œ "**ì´ê²Œ ë³´ì•ˆìƒ ì•ˆì „í•œê°€?**"ë¥¼ ë¨¼ì € ìƒê°í•˜ì„¸ìš”
- "**ìµœì†Œ ê¶Œí•œ ì›ì¹™**"ì„ í•­ìƒ ì—¼ë‘ì— ë‘ì„¸ìš”
- ì‹¤ìŠµ í™˜ê²½ì´ë¼ë„ **í”„ë¡œë•ì…˜ í™˜ê²½**ì²˜ëŸ¼ ì‹ ì¤‘í•˜ê²Œ ì ‘ê·¼í•˜ì„¸ìš”

### ë¬¸ì„œí™” ìŠµê´€
- ì‹¤ìŠµ ì¤‘ ë°œê²¬í•œ **ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•´ê²° ë°©ë²•**ì„ ê¸°ë¡í•˜ì„¸ìš”
- ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ëŠ” **ë³„ë„ë¡œ ì •ë¦¬**í•´ë‘ì„¸ìš”
- **ì™œ ì´ëŸ° ì„¤ì •ì„ í–ˆëŠ”ì§€** ì´ìœ ë¥¼ í•¨ê»˜ ê¸°ë¡í•˜ì„¸ìš”

---

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” Linuxì˜ ì‚¬ìš©ì ê³„ì • ì‹œìŠ¤í…œì— ëŒ€í•´ ìƒì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.
# ğŸ—ï¸ ì„¹ì…˜ 2: Linux ì‚¬ìš©ì ë° ê·¸ë£¹ ê´€ë¦¬ ê¸°ì´ˆ

## ğŸ“‹ ì‚¬ìš©ì ê³„ì • ì‹œìŠ¤í…œ ê°œìš”

LinuxëŠ” **ë‹¤ì¤‘ ì‚¬ìš©ì ì‹œìŠ¤í…œ(Multi-User System)**ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ì‹œìŠ¤í…œì„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ê° ì‚¬ìš©ìëŠ” **ê³ ìœ í•œ ì‹ë³„ì(UID)**ì™€ **ê¶Œí•œ**ì„ ê°€ì§‘ë‹ˆë‹¤.

### ğŸ’¡ ì™œ ì‚¬ìš©ì ê´€ë¦¬ê°€ ì¤‘ìš”í•œê°€?

1. **ë³´ì•ˆ ê²©ë¦¬**: ê° ì‚¬ìš©ìì˜ ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ì—¬ ë³´í˜¸
2. **ì ‘ê·¼ ì œì–´**: ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´
3. **ê°ì‚¬ ì¶”ì **: ëˆ„ê°€ ë¬´ì—‡ì„ í–ˆëŠ”ì§€ ì¶”ì  ê°€ëŠ¥
4. **ë¦¬ì†ŒìŠ¤ í• ë‹¹**: ì‚¬ìš©ìë³„ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ê´€ë¦¬

---

## ğŸ“‚ ì‚¬ìš©ì ì •ë³´ ì €ì¥ íŒŒì¼ë“¤

Linux ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ì ë° ê·¸ë£¹ ì •ë³´ëŠ” ë‹¤ìŒ íŒŒì¼ë“¤ì— ì €ì¥ë©ë‹ˆë‹¤:

### 1ï¸âƒ£ `/etc/passwd` - ì‚¬ìš©ì ê³„ì • ì •ë³´

**íŒŒì¼ ìœ„ì¹˜**: `/etc/passwd`
**ê¶Œí•œ**: `-rw-r--r--` (644) - ëª¨ë“  ì‚¬ìš©ìê°€ ì½ì„ ìˆ˜ ìˆìŒ

ì´ íŒŒì¼ì€ ì‹œìŠ¤í…œì˜ ëª¨ë“  ì‚¬ìš©ì ê³„ì • ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

#### ğŸ“Ÿ `/etc/passwd` íŒŒì¼ êµ¬ì¡°

**ê¸°ë³¸ ë¬¸ë²•:**
```
username:password:UID:GID:comment:home_directory:shell
```

**ê° í•„ë“œ ì„¤ëª…:**

| í•„ë“œ ë²ˆí˜¸ | í•„ë“œëª… | ì„¤ëª… | ì˜ˆì‹œ |
|:-:|:-:|:-:|:-:|
| 1 | username | ë¡œê·¸ì¸ ID (ì‚¬ìš©ì ì´ë¦„) | ubuntu, root |
| 2 | password | ë¹„ë°€ë²ˆí˜¸ (í˜„ì¬ëŠ” 'x'ë¡œ í‘œì‹œ, ì‹¤ì œëŠ” /etc/shadowì— ì €ì¥) | x |
| 3 | UID | ì‚¬ìš©ì ID (User ID) | 1000, 0 (root) |
| 4 | GID | ê¸°ë³¸ ê·¸ë£¹ ID (Group ID) | 1000 |
| 5 | comment | ì‚¬ìš©ì ì„¤ëª… (GECOS í•„ë“œ) | Ubuntu User, í™ê¸¸ë™ |
| 6 | home_directory | ì‚¬ìš©ì í™ˆ ë””ë ‰í„°ë¦¬ ê²½ë¡œ | /home/ubuntu |
| 7 | shell | ë¡œê·¸ì¸ ì‹œ ì‹¤í–‰ë  ì‰˜ | /bin/bash, /bin/sh |

#### ì‹¤ì œ ì˜ˆì œ

**`/etc/passwd` íŒŒì¼ ë‚´ìš© í™•ì¸:**
```bash
$ cat /etc/passwd
```

**ì˜ˆìƒ ì¶œë ¥:**
```
root:x:0:0:root:/root:/bin/bash
ubuntu:x:1000:1000:Ubuntu User:/home/ubuntu:/bin/bash
test0:x:1001:1001::/home/test0:/bin/sh
```

**ì¶œë ¥ í•´ì„:**

**ì²« ë²ˆì§¸ ë¼ì¸ ë¶„ì„** (`root:x:0:0:root:/root:/bin/bash`):
- **username**: `root` - ìŠˆí¼ìœ ì € ê³„ì •
- **password**: `x` - ë¹„ë°€ë²ˆí˜¸ëŠ” `/etc/shadow`ì— ì•”í˜¸í™”ë˜ì–´ ì €ì¥
- **UID**: `0` - UIDê°€ 0ì´ë©´ ìŠˆí¼ìœ ì €(ìµœê³  ê¶Œí•œ)
- **GID**: `0` - root ê·¸ë£¹
- **comment**: `root` - ê³„ì • ì„¤ëª…
- **home_directory**: `/root` - root ì‚¬ìš©ìì˜ í™ˆ ë””ë ‰í„°ë¦¬
- **shell**: `/bin/bash` - bash ì‰˜ ì‚¬ìš©

ğŸ’¡ **ì¤‘ìš”**: UIDê°€ 0ì¸ ì‚¬ìš©ìëŠ” **ìŠˆí¼ìœ ì €(root)**ë¡œ ì¸ì‹ë©ë‹ˆë‹¤. ê³„ì • ì´ë¦„ì´ "root"ê°€ ì•„ë‹ˆì–´ë„ UIDê°€ 0ì´ë©´ ìµœê³  ê¶Œí•œì„ ê°€ì§‘ë‹ˆë‹¤!

**ë‘ ë²ˆì§¸ ë¼ì¸ ë¶„ì„** (`ubuntu:x:1000:1000:Ubuntu User:/home/ubuntu:/bin/bash`):
- **username**: `ubuntu` - ì¼ë°˜ ì‚¬ìš©ì ê³„ì •
- **UID**: `1000` - ì¼ë°˜ ì‚¬ìš©ìì˜ ì‹œì‘ UID (ë³´í†µ 1000ë²ˆë¶€í„°)
- **GID**: `1000` - ubuntu ê·¸ë£¹ (ì‚¬ìš©ìì™€ ë™ì¼í•œ ì´ë¦„ì˜ ê·¸ë£¹)
- **home_directory**: `/home/ubuntu` - ì¼ë°˜ ì‚¬ìš©ì í™ˆ ë””ë ‰í„°ë¦¬

#### ğŸ” UID ë²”ìœ„ ì´í•´í•˜ê¸°

| UID ë²”ìœ„ | ìš©ë„ | ì„¤ëª… |
|:-:|:-:|:-:|
| 0 | root | ìŠˆí¼ìœ ì € (ìµœê³  ê¶Œí•œ) |
| 1~499 | ì‹œìŠ¤í…œ ê³„ì • | ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ìš© ê³„ì • |
| 500~999 | ì‹œìŠ¤í…œ ì˜ˆì•½ | ë°°í¬íŒì— ë”°ë¼ ë‹¤ë¦„ |
| 1000~ | ì¼ë°˜ ì‚¬ìš©ì | ì‹¤ì œ ë¡œê·¸ì¸í•˜ëŠ” ì‚¬ìš©ì ê³„ì • |

**ì‹œìŠ¤í…œ ê³„ì • ì˜ˆì‹œ:**
```bash
$ grep -E "^(daemon|bin|sys)" /etc/passwd
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
```

ì´ëŸ¬í•œ ì‹œìŠ¤í…œ ê³„ì •ë“¤ì€:
- ì‚¬ëŒì´ ì§ì ‘ ë¡œê·¸ì¸í•˜ì§€ ì•ŠìŒ
- íŠ¹ì • ì„œë¹„ìŠ¤ë‚˜ ë°ëª¬ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë¨
- ì‰˜ì´ `/usr/sbin/nologin`ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ë¡œê·¸ì¸ ë¶ˆê°€

---

### 2ï¸âƒ£ `/etc/shadow` - ë¹„ë°€ë²ˆí˜¸ ì •ë³´

**íŒŒì¼ ìœ„ì¹˜**: `/etc/shadow`
**ê¶Œí•œ**: `-rw-r-----` (640) - rootë§Œ ì“°ê¸° ê°€ëŠ¥, shadow ê·¸ë£¹ë§Œ ì½ê¸° ê°€ëŠ¥

ğŸ” **ë³´ì•ˆ**: ì´ íŒŒì¼ì€ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ë¯€ë¡œ ì¼ë°˜ ì‚¬ìš©ìëŠ” ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

#### ğŸ“Ÿ `/etc/shadow` íŒŒì¼ êµ¬ì¡°

**ê¸°ë³¸ ë¬¸ë²•:**
```
username:encrypted_password:lastchg:min:max:warn:inactive:expire:reserved
```

**ê° í•„ë“œ ì„¤ëª…:**

| í•„ë“œ | ì„¤ëª… | ê°’ ì˜ë¯¸ | ì˜ˆì‹œ |
|:-:|:-:|:-:|:-:|
| 1 | username | ì‚¬ìš©ì ì´ë¦„ | ubuntu |
| 2 | encrypted_password | ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ | $6$random... |
| 3 | lastchg | ë§ˆì§€ë§‰ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì¼ (1970/1/1ë¶€í„°ì˜ ì¼ìˆ˜) | 19800 |
| 4 | min | ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ì‚¬ìš©ì¼ | 0 (ì¦‰ì‹œ ë³€ê²½ ê°€ëŠ¥) |
| 5 | max | ë¹„ë°€ë²ˆí˜¸ ìµœëŒ€ ì‚¬ìš©ì¼ (ìœ íš¨ê¸°ê°„) | 99999 (ì‚¬ì‹¤ìƒ ë¬´ì œí•œ) |
| 6 | warn | ë§Œë£Œ ê²½ê³ ì¼ | 7 (ë§Œë£Œ 7ì¼ ì „ë¶€í„° ê²½ê³ ) |
| 7 | inactive | ë¹„í™œì„±í™” ìœ ì˜ˆì¼ | ë¹„ì–´ìˆìŒ |
| 8 | expire | ê³„ì • ë§Œë£Œì¼ | ë¹„ì–´ìˆìŒ |
| 9 | reserved | ì˜ˆì•½ í•„ë“œ | ë¹„ì–´ìˆìŒ |

#### ì‹¤ì œ ì˜ˆì œ

**`/etc/shadow` íŒŒì¼ ë‚´ìš© í™•ì¸:**
```bash
# root ê¶Œí•œ í•„ìš”
$ sudo cat /etc/shadow
```

**ì˜ˆìƒ ì¶œë ¥:**
```
root:$6$xyz123...:19800:0:99999:7:::
ubuntu:$6$abc456...:19800:0:99999:7:::
test0:!:19801:0:99999:7:::
```

**ë¹„ë°€ë²ˆí˜¸ í•„ë“œ (2ë²ˆì§¸ í•„ë“œ) ê°’ì˜ ì˜ë¯¸:**

| ê°’ | ì˜ë¯¸ | ìƒíƒœ |
|:-:|:-:|:-:|
| `$6$salt$hash...` | SHA-512ë¡œ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ | ë¡œê·¸ì¸ ê°€ëŠ¥ |
| `!` | ì ê¸ˆ ìƒíƒœ | ë¡œê·¸ì¸ ë¶ˆê°€ |
| `!!` | ë¹„ë°€ë²ˆí˜¸ ë¯¸ì„¤ì • | ë¡œê·¸ì¸ ë¶ˆê°€ |
| `*` | ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš© ë¶ˆê°€ | ë¡œê·¸ì¸ ë¶ˆê°€ |

ğŸ’¡ **ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ ì‹ë³„:**
- `$1$...`: MD5 (ì˜¤ë˜ë¨, ê¶Œì¥ ì•ˆ í•¨)
- `$5$...`: SHA-256
- `$6$...`: SHA-512 (ê¶Œì¥)
- `$y$...`: yescrypt (ìµœì‹ )

#### ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ ì •ì±… ì˜ˆì œ

**ë¹„ë°€ë²ˆí˜¸ë¥¼ 90ì¼ë§ˆë‹¤ ë³€ê²½í•˜ë„ë¡ ì„¤ì •ëœ ê³„ì •:**
```
testuser:$6$...:19800:7:90:14:30:20000:
```

í•´ì„:
- **lastchg**: 19800ì¼ì— ë§ˆì§€ë§‰ ë³€ê²½
- **min**: 7ì¼ - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í›„ ìµœì†Œ 7ì¼ì€ ë‹¤ì‹œ ë³€ê²½ ë¶ˆê°€
- **max**: 90ì¼ - 90ì¼ë§ˆë‹¤ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í•„ìš”
- **warn**: 14ì¼ - ë§Œë£Œ 14ì¼ ì „ë¶€í„° ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
- **inactive**: 30ì¼ - ë§Œë£Œ í›„ 30ì¼ ë™ì•ˆì€ ë¡œê·¸ì¸ ê°€ëŠ¥ (ë³€ê²½ í•„ìˆ˜)
- **expire**: 20000ì¼ - ê³„ì • ìì²´ê°€ ë§Œë£Œë˜ëŠ” ë‚ ì§œ

---

### 3ï¸âƒ£ `/etc/group` - ê·¸ë£¹ ì •ë³´

**íŒŒì¼ ìœ„ì¹˜**: `/etc/group`
**ê¶Œí•œ**: `-rw-r--r--` (644) - ëª¨ë“  ì‚¬ìš©ìê°€ ì½ì„ ìˆ˜ ìˆìŒ

#### ğŸ“Ÿ `/etc/group` íŒŒì¼ êµ¬ì¡°

**ê¸°ë³¸ ë¬¸ë²•:**
```
groupname:password:GID:members
```

**ê° í•„ë“œ ì„¤ëª…:**

| í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ |
|:-:|:-:|:-:|
| 1 | groupname | ê·¸ë£¹ ì´ë¦„ | sudo, ubuntu |
| 2 | password | ê·¸ë£¹ ë¹„ë°€ë²ˆí˜¸ (ê±°ì˜ ì‚¬ìš© ì•ˆ í•¨) | x |
| 3 | GID | ê·¸ë£¹ ID | 27, 1000 |
| 4 | members | ê·¸ë£¹ ë©¤ë²„ (ì‰¼í‘œë¡œ êµ¬ë¶„) | ubuntu,test1,test2 |

#### ì‹¤ì œ ì˜ˆì œ

**`/etc/group` íŒŒì¼ ë‚´ìš© í™•ì¸:**
```bash
$ cat /etc/group
```

**ì˜ˆìƒ ì¶œë ¥:**
```
root:x:0:
sudo:x:27:ubuntu
ubuntu:x:1000:
test_group:x:1001:test1,test2,test3
```

**ì¶œë ¥ í•´ì„:**

**sudo ê·¸ë£¹ ë¶„ì„** (`sudo:x:27:ubuntu`):
- **groupname**: `sudo` - sudo ê¶Œí•œì„ ê°€ì§„ ê·¸ë£¹
- **GID**: `27` - sudo ê·¸ë£¹ì˜ ID
- **members**: `ubuntu` - ubuntu ì‚¬ìš©ìê°€ sudo ê·¸ë£¹ì˜ ë©¤ë²„

ğŸ’¡ **sudo ê·¸ë£¹**: ì´ ê·¸ë£¹ì˜ ë©¤ë²„ëŠ” `sudo` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**test_group ë¶„ì„** (`test_group:x:1001:test1,test2,test3`):
- ì—¬ëŸ¬ ì‚¬ìš©ìê°€ í•˜ë‚˜ì˜ ê·¸ë£¹ì— ì†í•  ìˆ˜ ìˆìŒ
- ê·¸ë£¹ ë©¤ë²„ëŠ” ì‰¼í‘œ(`,`)ë¡œ êµ¬ë¶„
- ì´ ê·¸ë£¹ì˜ ë©¤ë²„: test1, test2, test3

#### ğŸ” ê¸°ë³¸ ê·¸ë£¹ vs ì¶”ê°€ ê·¸ë£¹

**ê¸°ë³¸ ê·¸ë£¹(Primary Group)**:
- `/etc/passwd`ì˜ 4ë²ˆì§¸ í•„ë“œì— ì •ì˜
- ì‚¬ìš©ìê°€ íŒŒì¼ì„ ìƒì„±í•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ëŠ” ê·¸ë£¹
- ê° ì‚¬ìš©ìëŠ” í•˜ë‚˜ì˜ ê¸°ë³¸ ê·¸ë£¹ë§Œ ê°€ì§

**ì¶”ê°€ ê·¸ë£¹(Secondary/Supplementary Groups)**:
- `/etc/group`ì˜ 4ë²ˆì§¸ í•„ë“œì— ì •ì˜
- ì‚¬ìš©ìê°€ ì—¬ëŸ¬ ì¶”ê°€ ê·¸ë£¹ì— ì†í•  ìˆ˜ ìˆìŒ
- íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬ì— ì‚¬ìš©

**ì˜ˆì œ: ubuntu ì‚¬ìš©ìì˜ ê·¸ë£¹ í™•ì¸**
```bash
# ubuntu ì‚¬ìš©ìì˜ ëª¨ë“  ê·¸ë£¹ í™•ì¸
$ groups ubuntu
ubuntu : ubuntu sudo docker

# id ëª…ë ¹ì–´ë¡œ ë” ìì„¸í•œ ì •ë³´ í™•ì¸
$ id ubuntu
uid=1000(ubuntu) gid=1000(ubuntu) groups=1000(ubuntu),27(sudo),999(docker)
```

í•´ì„:
- **ê¸°ë³¸ ê·¸ë£¹**: ubuntu (GID=1000)
- **ì¶”ê°€ ê·¸ë£¹**: sudo (GID=27), docker (GID=999)

---

## âš™ï¸ ì‚¬ìš©ì ìƒì„± ê´€ë ¨ ì„¤ì • íŒŒì¼

### 4ï¸âƒ£ `/etc/login.defs` - ì‚¬ìš©ì ê³„ì • ê¸°ë³¸ ì„¤ì •

**íŒŒì¼ ìœ„ì¹˜**: `/etc/login.defs`
**ëª©ì **: ì‚¬ìš©ì ê³„ì • ìƒì„± ì‹œ ì ìš©ë˜ëŠ” ê¸°ë³¸ ì •ì±… ì •ì˜

#### ì£¼ìš” ì„¤ì • í•­ëª©

**íŒŒì¼ ë‚´ìš© í™•ì¸ (ì£¼ì„ ì œì™¸):**
```bash
# ì£¼ì„ê³¼ ë¹ˆ ì¤„ì„ ì œì™¸í•˜ê³  ì‹¤ì œ ì„¤ì •ë§Œ ë³´ê¸°
$ grep -v '^#' /etc/login.defs | grep -v '^$'
```

**ì£¼ìš” ì„¤ì • ë³€ìˆ˜:**

| ë³€ìˆ˜ëª… | ì„¤ëª… | ê¸°ë³¸ê°’ ì˜ˆì‹œ |
|:-:|:-:|:-:|
| `PASS_MAX_DAYS` | ë¹„ë°€ë²ˆí˜¸ ìµœëŒ€ ì‚¬ìš©ì¼ | 99999 |
| `PASS_MIN_DAYS` | ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ì‚¬ìš©ì¼ | 0 |
| `PASS_MIN_LEN` | ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ê¸¸ì´ | 8 |
| `PASS_WARN_AGE` | ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ ê²½ê³ ì¼ | 7 |
| `UID_MIN` | ì¼ë°˜ ì‚¬ìš©ì UID ì‹œì‘ ë²ˆí˜¸ | 1000 |
| `UID_MAX` | ì¼ë°˜ ì‚¬ìš©ì UID ìµœëŒ€ ë²ˆí˜¸ | 60000 |
| `GID_MIN` | ì¼ë°˜ ê·¸ë£¹ GID ì‹œì‘ ë²ˆí˜¸ | 1000 |
| `GID_MAX` | ì¼ë°˜ ê·¸ë£¹ GID ìµœëŒ€ ë²ˆí˜¸ | 60000 |
| `CREATE_HOME` | í™ˆ ë””ë ‰í„°ë¦¬ ìë™ ìƒì„± ì—¬ë¶€ | yes |
| `UMASK` | í™ˆ ë””ë ‰í„°ë¦¬ ê¸°ë³¸ í¼ë¯¸ì…˜ umask | 022 |
| `ENCRYPT_METHOD` | ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ë°©ì‹ | SHA512 |

#### ì‹¤ì œ ì„¤ì • ì˜ˆì œ

**`/etc/login.defs` ì£¼ìš” ë‚´ìš©:**
```bash
# ë¹„ë°€ë²ˆí˜¸ ì •ì±…
PASS_MAX_DAYS   99999
PASS_MIN_DAYS   0
PASS_MIN_LEN    8
PASS_WARN_AGE   7

# UID/GID ë²”ìœ„
UID_MIN         1000
UID_MAX        60000
GID_MIN         1000
GID_MAX        60000

# ì‹œìŠ¤í…œ ê³„ì • ë²”ìœ„
SYS_UID_MIN      100
SYS_UID_MAX      999
SYS_GID_MIN      100
SYS_GID_MAX      999

# í™ˆ ë””ë ‰í„°ë¦¬ ì„¤ì •
CREATE_HOME     yes
UMASK           022

# ì•”í˜¸í™” ë°©ì‹
ENCRYPT_METHOD  SHA512
```

**ì„¤ì • ë³€ê²½ ì˜ˆì œ:**

ë¹„ë°€ë²ˆí˜¸ë¥¼ 90ì¼ë§ˆë‹¤ ë³€ê²½í•˜ë„ë¡ ê°•ì œí•˜ë ¤ë©´:
```bash
# /etc/login.defs íŒŒì¼ í¸ì§‘ (root ê¶Œí•œ í•„ìš”)
$ sudo vi /etc/login.defs

# ë‹¤ìŒ ê°’ ìˆ˜ì •
PASS_MAX_DAYS   90      # ê¸°ë³¸ê°’: 99999
PASS_MIN_DAYS   7       # ê¸°ë³¸ê°’: 0 (ë³€ê²½ í›„ 7ì¼ê°„ ì¬ë³€ê²½ ë¶ˆê°€)
PASS_WARN_AGE   14      # ê¸°ë³¸ê°’: 7 (ë§Œë£Œ 14ì¼ ì „ë¶€í„° ê²½ê³ )
```

âš ï¸ **ì£¼ì˜**: ì´ ì„¤ì •ì€ **ìƒˆë¡œ ìƒì„±ë˜ëŠ” ì‚¬ìš©ì**ì—ê²Œë§Œ ì ìš©ë©ë‹ˆë‹¤. ê¸°ì¡´ ì‚¬ìš©ìëŠ” `chage` ëª…ë ¹ì–´ë¡œ ë³„ë„ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.

---

### 5ï¸âƒ£ `/etc/default/useradd` - useradd ëª…ë ¹ì–´ ê¸°ë³¸ê°’

**íŒŒì¼ ìœ„ì¹˜**: `/etc/default/useradd`
**ëª©ì **: `useradd` ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œ ìƒëµëœ ì˜µì…˜ì˜ ê¸°ë³¸ê°’ ì •ì˜

#### íŒŒì¼ ë‚´ìš© í™•ì¸

```bash
$ cat /etc/default/useradd
```

**ì˜ˆìƒ ì¶œë ¥:**
```bash
# Default values for useradd(8)
GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/sh
SKEL=/etc/skel
CREATE_MAIL_SPOOL=yes
```

**ê° ì„¤ì •ì˜ ì˜ë¯¸:**

| ì„¤ì • | ì„¤ëª… | ê°’ |
|:-:|:-:|:-:|
| `GROUP` | ê¸°ë³¸ ê·¸ë£¹ GID | 100 |
| `HOME` | í™ˆ ë””ë ‰í„°ë¦¬ ìƒìœ„ ê²½ë¡œ | /home |
| `INACTIVE` | ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ í›„ ìœ ì˜ˆì¼ | -1 (ë¬´ì œí•œ) |
| `EXPIRE` | ê³„ì • ë§Œë£Œì¼ | ë¹„ì–´ìˆìŒ (ë¬´ì œí•œ) |
| `SHELL` | ê¸°ë³¸ ì‰˜ | /bin/sh |
| `SKEL` | ìŠ¤ì¼ˆë ˆí†¤ ë””ë ‰í„°ë¦¬ | /etc/skel |
| `CREATE_MAIL_SPOOL` | ë©”ì¼ ìŠ¤í’€ ìƒì„± ì—¬ë¶€ | yes |

#### ê¸°ë³¸ê°’ ì¡°íšŒ ë° ë³€ê²½

**í˜„ì¬ ê¸°ë³¸ê°’ ì¡°íšŒ:**
```bash
$ useradd -D
GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/sh
SKEL=/etc/skel
CREATE_MAIL_SPOOL=yes
```

**ê¸°ë³¸ ì‰˜ì„ bashë¡œ ë³€ê²½:**
```bash
# -D ì˜µì…˜ê³¼ -s ì˜µì…˜ì„ í•¨ê»˜ ì‚¬ìš©
$ sudo useradd -D -s /bin/bash

# ë³€ê²½ í™•ì¸
$ useradd -D
SHELL=/bin/bash
```

**í™ˆ ë””ë ‰í„°ë¦¬ ê¸°ë³¸ ê²½ë¡œ ë³€ê²½:**
```bash
# í™ˆ ë””ë ‰í„°ë¦¬ë¥¼ /new_home ì•„ë˜ì— ìƒì„±í•˜ë„ë¡ ë³€ê²½
$ sudo useradd -D -b /new_home

# ë³€ê²½ í™•ì¸
$ useradd -D
HOME=/new_home
```

---

### 6ï¸âƒ£ `/etc/skel` - ìŠ¤ì¼ˆë ˆí†¤ ë””ë ‰í„°ë¦¬

**ë””ë ‰í„°ë¦¬ ìœ„ì¹˜**: `/etc/skel`
**ëª©ì **: ìƒˆ ì‚¬ìš©ì ìƒì„± ì‹œ í™ˆ ë””ë ‰í„°ë¦¬ì— ìë™ìœ¼ë¡œ ë³µì‚¬ë  ê¸°ë³¸ íŒŒì¼ë“¤ ì €ì¥

#### ìŠ¤ì¼ˆë ˆí†¤ ë””ë ‰í„°ë¦¬ ë‚´ìš© í™•ì¸

```bash
# ìˆ¨ê¹€ íŒŒì¼ê¹Œì§€ ëª¨ë‘ ë³´ê¸°
$ ls -la /etc/skel
total 24
drwxr-xr-x  2 root root 4096 Apr 18  2023 .
drwxr-xr-x 98 root root 4096 Nov 25 09:00 ..
-rw-r--r--  1 root root  220 Apr 18  2023 .bash_logout
-rw-r--r--  1 root root 3526 Apr 18  2023 .bashrc
-rw-r--r--  1 root root  807 Apr 18  2023 .profile
```

#### ì£¼ìš” íŒŒì¼ ì„¤ëª…

**1. `.bashrc` - Bash ì‰˜ ì„¤ì • íŒŒì¼**

ì‚¬ìš©ìê°€ **bash ì‰˜ì„ ì‹¤í–‰í•  ë•Œë§ˆë‹¤** ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

**ìš©ë„:**
- ëª…ë ¹ì–´ ë³„ì¹­(alias) ì •ì˜
- ì‰˜ í”„ë¡¬í”„íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- ìì£¼ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ ì •ì˜

**ì˜ˆì œ ë‚´ìš©:**
```bash
# User specific aliases and functions
alias ll='ls -la'
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Custom prompt
PS1='\u@\h:\w\$ '

# History ì„¤ì •
HISTSIZE=1000
HISTFILESIZE=2000
```

**2. `.bash_logout` - ë¡œê·¸ì•„ì›ƒ ì‹œ ì‹¤í–‰**

**bash ì‰˜ì—ì„œ ë¡œê·¸ì•„ì›ƒí•  ë•Œ** ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

**ìš©ë„:**
- ì„ì‹œ íŒŒì¼ ì •ë¦¬
- í™”ë©´ í´ë¦¬ì–´
- ë¡œê·¸ ê¸°ë¡

**ì˜ˆì œ ë‚´ìš©:**
```bash
# ~/.bash_logout: executed by bash(1) when login shell exits

# Clear the screen for security
clear
```

**3. `.profile` - ë¡œê·¸ì¸ ì‹œ ì‹¤í–‰**

**ë¡œê·¸ì¸ ì‰˜**ì´ ì‹œì‘ë  ë•Œ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

**ìš©ë„:**
- PATH í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- ê¸°íƒ€ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- `.bashrc` í˜¸ì¶œ

**ì˜ˆì œ ë‚´ìš©:**
```bash
# ~/.profile: executed by the command interpreter for login shells

# Set PATH
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi

# Include .bashrc if it exists
if [ -f "$HOME/.bashrc" ]; then
    . "$HOME/.bashrc"
fi
```

#### ìŠ¤ì¼ˆë ˆí†¤ ë””ë ‰í„°ë¦¬ í™œìš©

**ìƒˆ ì‚¬ìš©ì ìƒì„± ì‹œ ìë™ ë³µì‚¬:**
```bash
# test0 ì‚¬ìš©ì ìƒì„± (-m ì˜µì…˜: í™ˆ ë””ë ‰í„°ë¦¬ ìƒì„±)
$ sudo useradd -m test0

# test0ì˜ í™ˆ ë””ë ‰í„°ë¦¬ í™•ì¸
$ sudo ls -la /home/test0
-rw-r--r-- 1 test0 test0  220 Nov 25 10:00 .bash_logout
-rw-r--r-- 1 test0 test0 3526 Nov 25 10:00 .bashrc
-rw-r--r-- 1 test0 test0  807 Nov 25 10:00 .profile
```

â†’ `/etc/skel`ì˜ íŒŒì¼ë“¤ì´ `/home/test0`ìœ¼ë¡œ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!

**ì¡°ì§ ì „ì²´ì— ê³µí†µ ì„¤ì • ë°°í¬:**

ëª¨ë“  ì‹ ê·œ ì‚¬ìš©ìì—ê²Œ ë™ì¼í•œ ë³„ì¹­ì„ ì œê³µí•˜ê³  ì‹¶ë‹¤ë©´:

```bash
# /etc/skel/.bashrc í¸ì§‘ (root ê¶Œí•œ)
$ sudo vi /etc/skel/.bashrc

# ë‹¤ìŒ ë‚´ìš© ì¶”ê°€
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
alias update='sudo apt update && sudo apt upgrade'
```

ì´ì œ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ëª¨ë“  ì‚¬ìš©ìëŠ” ì´ ë³„ì¹­ë“¤ì„ ê¸°ë³¸ìœ¼ë¡œ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.

---

## ğŸ”„ ì‰˜ ì‹œì‘ í”„ë¡œì„¸ìŠ¤ì™€ ì„¤ì • íŒŒì¼ ì‹¤í–‰ ìˆœì„œ

ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´ ë‹¤ìŒ ìˆœì„œë¡œ íŒŒì¼ë“¤ì´ ì‹¤í–‰ë©ë‹ˆë‹¤:

```mermaid
graph TD
    A[ì‚¬ìš©ì ë¡œê·¸ì¸] --> B[ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤]
    B --> C{ì¸ì¦ ì„±ê³µ?}
    C -->|Yes| D[/etc/passwdì—ì„œ ì‰˜ í™•ì¸]
    C -->|No| Z[ë¡œê·¸ì¸ ê±°ë¶€]
    D --> E[bash ì‰˜ ì‹¤í–‰]
    E --> F[/etc/profile ì‹¤í–‰]
    F --> G[/etc/bash.bashrc ì‹¤í–‰]
    G --> H[~/.bash_profile ë˜ëŠ” ~/.profile ì‹¤í–‰]
    H --> I[~/.bashrc ì‹¤í–‰]
    I --> J[í”„ë¡¬í”„íŠ¸ í‘œì‹œ]
    J --> K[ì‚¬ìš©ì ëª…ë ¹ ëŒ€ê¸°]
```

**ì‹¤í–‰ ìˆœì„œ:**
1. **ì „ì—­ ì„¤ì •** (ëª¨ë“  ì‚¬ìš©ì ê³µí†µ)
   - `/etc/profile` â†’ ì‹œìŠ¤í…œ ì „ì²´ í™˜ê²½ ë³€ìˆ˜
   - `/etc/bash.bashrc` â†’ ì‹œìŠ¤í…œ ì „ì²´ bash ì„¤ì •

2. **ì‚¬ìš©ì ê°œì¸ ì„¤ì •**
   - `~/.bash_profile` ë˜ëŠ” `~/.profile` â†’ ê°œì¸ í™˜ê²½ ë³€ìˆ˜
   - `~/.bashrc` â†’ ê°œì¸ bash ì„¤ì • (ë³„ì¹­, í•¨ìˆ˜ ë“±)

ğŸ’¡ **ê´€ë¦¬ ê°€ì´ë“œ:**
- **ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì ìš©**: `/etc/profile` ë˜ëŠ” `/etc/bash.bashrc` ìˆ˜ì • (root ê¶Œí•œ)
- **íŠ¹ì • ì‚¬ìš©ìì—ê²Œë§Œ ì ìš©**: `~/.bashrc` ë˜ëŠ” `~/.profile` ìˆ˜ì • (í•´ë‹¹ ì‚¬ìš©ì ê¶Œí•œ)

---

## âœ… í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì´ ì„¹ì…˜ì„ í•™ìŠµí•œ í›„ ë‹¤ìŒ ì‚¬í•­ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

- [ ] `/etc/passwd` íŒŒì¼ì˜ ê° í•„ë“œ ì˜ë¯¸ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] UIDê°€ 0ì¸ ì‚¬ìš©ìê°€ ìŠˆí¼ìœ ì €ì„ì„ ì´í•´í•œë‹¤
- [ ] `/etc/shadow` íŒŒì¼ì˜ ë¹„ë°€ë²ˆí˜¸ í•„ë“œ ê°’(`!`, `!!`, `*`)ì˜ ì°¨ì´ë¥¼ ì•ˆë‹¤
- [ ] ë¹„ë°€ë²ˆí˜¸ ì •ì±… ì„¤ì • (`PASS_MAX_DAYS` ë“±)ì„ ì´í•´í•œë‹¤
- [ ] ê¸°ë³¸ ê·¸ë£¹ê³¼ ì¶”ê°€ ê·¸ë£¹ì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] `/etc/skel` ë””ë ‰í„°ë¦¬ì˜ ì—­í• ì„ ì´í•´í•œë‹¤
- [ ] `.bashrc`, `.profile`, `.bash_logout`ì˜ ì‹¤í–‰ ì‹œì ì„ ì•ˆë‹¤
- [ ] ì‚¬ìš©ìë³„ ì„¤ì •ê³¼ ì‹œìŠ¤í…œ ì „ì²´ ì„¤ì •ì˜ ì°¨ì´ë¥¼ ì•ˆë‹¤

---

## ğŸ“‹ í•µì‹¬ ìš”ì•½

### ì£¼ìš” íŒŒì¼ë“¤

| íŒŒì¼ | ìš©ë„ | ê¶Œí•œ | ê´€ë¦¬ì |
|:-:|:-:|:-:|:-:|
| `/etc/passwd` | ì‚¬ìš©ì ê³„ì • ì •ë³´ | 644 (ëª¨ë‘ ì½ê¸°) | root |
| `/etc/shadow` | ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ | 640 (rootë§Œ ì“°ê¸°) | root |
| `/etc/group` | ê·¸ë£¹ ì •ë³´ | 644 (ëª¨ë‘ ì½ê¸°) | root |
| `/etc/login.defs` | ê³„ì • ê¸°ë³¸ ì •ì±… | 644 | root |
| `/etc/default/useradd` | useradd ê¸°ë³¸ê°’ | 644 | root |
| `/etc/skel/*` | ì‹ ê·œ ì‚¬ìš©ì ê¸°ë³¸ íŒŒì¼ | 644 | root |

### UID/GID ë²”ìœ„

- **0**: root (ìŠˆí¼ìœ ì €)
- **1~499/999**: ì‹œìŠ¤í…œ ê³„ì •
- **1000~**: ì¼ë°˜ ì‚¬ìš©ì

### ì‰˜ ì„¤ì • íŒŒì¼ ì‹¤í–‰ ìˆœì„œ

**ë¡œê·¸ì¸ ì‹œ**:
1. `/etc/profile` (ì „ì—­)
2. `/etc/bash.bashrc` (ì „ì—­)
3. `~/.profile` (ê°œì¸)
4. `~/.bashrc` (ê°œì¸)

**ë¡œê·¸ì•„ì›ƒ ì‹œ**:
- `~/.bash_logout`

---

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ì‚¬ìš©ìì™€ ê·¸ë£¹ì„ ì‹¤ì œë¡œ ìƒì„±, ìˆ˜ì •, ì‚­ì œí•˜ëŠ” ëª…ë ¹ì–´ë“¤ì„ ìƒì„¸íˆ í•™ìŠµí•˜ê² ìŠµë‹ˆë‹¤.
# ğŸ› ï¸ ì„¹ì…˜ 3: ì‚¬ìš©ì ë° ê·¸ë£¹ ê´€ë¦¬ ëª…ë ¹ì–´ ì™„ì „ ì •ë³µ

## ğŸ“ ì‚¬ìš©ì ê´€ë¦¬ ëª…ë ¹ì–´ ê°œìš”

Linuxì—ì„œ ì‚¬ìš©ìë¥¼ ê´€ë¦¬í•˜ëŠ” í•µì‹¬ ëª…ë ¹ì–´ë“¤:
- `useradd`: ìƒˆ ì‚¬ìš©ì ìƒì„±
- `usermod`: ê¸°ì¡´ ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
- `userdel`: ì‚¬ìš©ì ì‚­ì œ
- `passwd`: ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬
- `chage`: ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ ì •ì±… ê´€ë¦¬

---

## ğŸ”§ useradd - ì‚¬ìš©ì ìƒì„±

### ğŸ“Ÿ `useradd` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„

**ëª…ë ¹ì–´ ê°œìš”:**
- **ëª©ì **: ì‹œìŠ¤í…œì— ìƒˆë¡œìš´ ì‚¬ìš©ì ê³„ì • ìƒì„±
- **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ìƒˆ ì§ì› ì…ì‚¬, ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±, í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„±
- **ê¶Œí•œ**: root ê¶Œí•œ í•„ìš”

**ê¸°ë³¸ ë¬¸ë²•:**
```bash
useradd [ì˜µì…˜] USERNAME
```

### ì£¼ìš” ì˜µì…˜ ì„¤ëª…

| **ì˜µì…˜** | **ì˜ë¯¸** | **ì‚¬ìš© ëª©ì ** | **ì˜ˆì‹œ** |
|:-:|:-:|:-:|:-:|
| `-m` | í™ˆ ë””ë ‰í„°ë¦¬ ìƒì„± | ì‚¬ìš©ìì˜ ê°œì¸ ê³µê°„ ì œê³µ | `useradd -m john` |
| `-u UID` | UID ì§€ì • | íŠ¹ì • UID í• ë‹¹ | `useradd -u 2000 john` |
| `-g GID` | ê¸°ë³¸ ê·¸ë£¹ ì§€ì • | Primary ê·¸ë£¹ ì„¤ì • | `useradd -g 1000 john` |
| `-G GROUP` | ì¶”ê°€ ê·¸ë£¹ ì§€ì • | Secondary ê·¸ë£¹ ì¶”ê°€ | `useradd -G sudo,docker john` |
| `-d DIR` | í™ˆ ë””ë ‰í„°ë¦¬ ê²½ë¡œ ì§€ì • | ê¸°ë³¸ ê²½ë¡œ ë³€ê²½ | `useradd -d /data/john john` |
| `-s SHELL` | ë¡œê·¸ì¸ ì‰˜ ì§€ì • | ì‚¬ìš©í•  ì‰˜ ê²°ì • | `useradd -s /bin/bash john` |
| `-c COMMENT` | ì„¤ëª… ì¶”ê°€ | ì‚¬ìš©ì ì •ë³´ ê¸°ë¡ | `useradd -c "John Doe" john` |
| `-r` | ì‹œìŠ¤í…œ ê³„ì • ìƒì„± | ì„œë¹„ìŠ¤ìš© ê³„ì • ìƒì„± | `useradd -r nginx` |
| `-e DATE` | ê³„ì • ë§Œë£Œì¼ ì§€ì • | ì„ì‹œ ê³„ì • ìƒì„± | `useradd -e 2024-12-31 temp` |
| `-D` | ê¸°ë³¸ê°’ í™•ì¸/ì„¤ì • | ê¸°ë³¸ ì„¤ì • ê´€ë¦¬ | `useradd -D` |

### ì‹¤í–‰ ì˜ˆì œ 1: ê¸°ë³¸ ì‚¬ìš©ì ìƒì„±

**ì‹œë‚˜ë¦¬ì˜¤**: í™ˆ ë””ë ‰í„°ë¦¬ë§Œ ìˆëŠ” ê¸°ë³¸ ì‚¬ìš©ì ìƒì„±

```bash
# root ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰
# useradd -m test0
```

**ì˜ˆìƒ ê²°ê³¼:**
```bash
# ì‚¬ìš©ì ì •ë³´ í™•ì¸
# grep test0 /etc/passwd
test0:x:1001:1001::/home/test0:/bin/sh

# í™ˆ ë””ë ‰í„°ë¦¬ í™•ì¸
# ls -ld /home/test0
drwxr-xr-x 2 test0 test0 4096 Nov 25 10:00 /home/test0

# shadow íŒŒì¼ í™•ì¸ (ë¹„ë°€ë²ˆí˜¸ ë¯¸ì„¤ì • ìƒíƒœ)
# grep test0 /etc/shadow
test0:!:19801:0:99999:7:::
```

**ê²°ê³¼ í•´ì„:**
- **UID/GID**: ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ 1001 í• ë‹¹ (1000 ì´í›„ ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆí˜¸)
- **í™ˆ ë””ë ‰í„°ë¦¬**: `/home/test0` ìƒì„±ë¨
- **ì‰˜**: `/bin/sh` (ê¸°ë³¸ê°’, `/etc/default/useradd`ì— ì •ì˜)
- **ë¹„ë°€ë²ˆí˜¸**: `!` â†’ ì ê¸ˆ ìƒíƒœ, ë¡œê·¸ì¸ ë¶ˆê°€

### ì‹¤í–‰ ì˜ˆì œ 2: ëª¨ë“  ì˜µì…˜ ì§€ì •í•˜ì—¬ ìƒì„±

**ì‹œë‚˜ë¦¬ì˜¤**: ê´€ë¦¬ìê°€ ì›í•˜ëŠ” ì„¤ì •ìœ¼ë¡œ ì™„ì „í•˜ê²Œ ì‚¬ìš©ì ìƒì„±

```bash
# ì‚¬ì „ ì¤€ë¹„: ê·¸ë£¹ ìƒì„±
# groupadd -g 500 dev_team

# ì‚¬ìš©ì ìƒì„± (ëª¨ë“  ì˜µì…˜ ì§€ì •)
# useradd \
  -u 2001 \
  -g 500 \
  -G sudo,docker \
  -d /home/developers/john \
  -s /bin/bash \
  -c "John Doe - Senior Developer" \
  -m \
  john
```

**ëª…ë ¹ì–´ í•´ì„:**
- `-u 2001`: UIDë¥¼ 2001ë¡œ ì§€ì •
- `-g 500`: ê¸°ë³¸ ê·¸ë£¹ì„ GID 500(dev_team)ìœ¼ë¡œ ì„¤ì •
- `-G sudo,docker`: sudo, docker ê·¸ë£¹ì— ì¶”ê°€
- `-d /home/developers/john`: í™ˆ ë””ë ‰í„°ë¦¬ ê²½ë¡œ ì§€ì •
- `-s /bin/bash`: bash ì‰˜ ì‚¬ìš©
- `-c "..."`: ì‚¬ìš©ì ì„¤ëª… ì¶”ê°€
- `-m`: í™ˆ ë””ë ‰í„°ë¦¬ ìƒì„±

**ì˜ˆìƒ ì¶œë ¥:**
```bash
# ìƒì„±ëœ ì‚¬ìš©ì í™•ì¸
# id john
uid=2001(john) gid=500(dev_team) groups=500(dev_team),27(sudo),999(docker)

# passwd íŒŒì¼ í™•ì¸
# grep john /etc/passwd
john:x:2001:500:John Doe - Senior Developer:/home/developers/john:/bin/bash

# í™ˆ ë””ë ‰í„°ë¦¬ í™•ì¸
# ls -ld /home/developers/john
drwxr-xr-x 2 john dev_team 4096 Nov 25 10:30 /home/developers/john
```

### ì‹¤í–‰ ì˜ˆì œ 3: ì‹œìŠ¤í…œ ê³„ì • ìƒì„±

**ì‹œë‚˜ë¦¬ì˜¤**: ì›¹ ì„œë¹„ìŠ¤ìš© ì‹œìŠ¤í…œ ê³„ì • ìƒì„± (ë¡œê·¸ì¸ ë¶ˆê°€)

```bash
# nginx ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±
# useradd -r -s /usr/sbin/nologin -c "Nginx Web Server" nginx
```

**ì˜µì…˜ ì„¤ëª…:**
- `-r`: ì‹œìŠ¤í…œ ê³„ì •ìœ¼ë¡œ ìƒì„± (UIDê°€ 1~999 ë²”ìœ„ì—ì„œ í• ë‹¹ë¨)
- `-s /usr/sbin/nologin`: ë¡œê·¸ì¸ ë¶ˆê°€ ì‰˜ ì§€ì •
- `-c`: ê³„ì • ì„¤ëª…

**ì˜ˆìƒ ì¶œë ¥:**
```bash
# ìƒì„±ëœ ì‹œìŠ¤í…œ ê³„ì • í™•ì¸
# grep nginx /etc/passwd
nginx:x:998:998:Nginx Web Server:/home/nginx:/usr/sbin/nologin

# ë¡œê·¸ì¸ ì‹œë„ (ì‹¤íŒ¨)
$ su - nginx
This account is currently not available.
```

**ì‹œìŠ¤í…œ ê³„ì • íŠ¹ì§•:**
- UIDê°€ ì‘ì€ ë²”ìœ„ (ë³´í†µ 100~999)
- ë¡œê·¸ì¸ ë¶ˆê°€ (`/usr/sbin/nologin` ë˜ëŠ” `/bin/false`)
- íŠ¹ì • ì„œë¹„ìŠ¤ë‚˜ ë°ëª¬ ì‹¤í–‰ ìš©ë„
- ë³´ì•ˆ: ì§ì ‘ ë¡œê·¸ì¸ ëª»í•˜ë¯€ë¡œ ì•ˆì „

### ì‹¤í–‰ ì˜ˆì œ 4: ì„ì‹œ ê³„ì • ìƒì„± (ë§Œë£Œì¼ ì§€ì •)

**ì‹œë‚˜ë¦¬ì˜¤**: 3ê°œì›” ê³„ì•½ì§ ì§ì›ìš© ê³„ì • (2024ë…„ 12ì›” 31ì¼ ë§Œë£Œ)

```bash
# ë§Œë£Œì¼ì´ ìˆëŠ” ì„ì‹œ ê³„ì • ìƒì„±
# useradd -m -e 2024-12-31 -c "Temporary Contractor" temp_user
```

**ì˜ˆìƒ ì¶œë ¥:**
```bash
# shadow íŒŒì¼ì—ì„œ ë§Œë£Œì¼ í™•ì¸
# grep temp_user /etc/shadow
temp_user:!:19801:0:99999:7::20087:
                               ^^^^^
                               ë§Œë£Œì¼ (1970-01-01ë¶€í„°ì˜ ì¼ìˆ˜)
```

**ë§Œë£Œì¼ ê³„ì‚°:**
```bash
# ë§Œë£Œì¼ì„ ì½ê¸° ì‰¬ìš´ í˜•ì‹ìœ¼ë¡œ í™•ì¸
# chage -l temp_user
Account expires                       : Dec 31, 2024
```

**ë§Œë£Œ í›„ ë™ì‘:**
- 2024-12-31 ì´í›„ì—ëŠ” ë¡œê·¸ì¸ ë¶ˆê°€
- ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ê³„ì • ì ê¸ˆ
- ìˆ˜ë™ìœ¼ë¡œ ê¸°í•œ ì—°ì¥ í•„ìš”

### ì‹¤í–‰ ì˜ˆì œ 5: ì˜µì…˜ ìƒëµ ì‹œ ê¸°ë³¸ ë™ì‘

**ì‹œë‚˜ë¦¬ì˜¤**: ì˜µì…˜ ì—†ì´ ì‚¬ìš©ì ì´ë¦„ë§Œìœ¼ë¡œ ìƒì„±

```bash
# ìµœì†Œí•œì˜ ëª…ë ¹ì–´
# useradd test1
```

**ê¸°ë³¸ ë™ì‘:**
```bash
# /etc/default/useraddì˜ ê¸°ë³¸ê°’ ì‚¬ìš©
# useradd -D
GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/sh
SKEL=/etc/skel
```

**ê²°ê³¼:**
```bash
# ìƒì„±ëœ ì‚¬ìš©ì í™•ì¸
# grep test1 /etc/passwd
test1:x:1002:100::/home/test1:/bin/sh
       ^^^^  ^^^
       ìë™   ê¸°ë³¸ ê·¸ë£¹ 100
       í• ë‹¹
```

**ì£¼ì˜ì‚¬í•­:**
- `-m` ì˜µì…˜ì„ ìƒëµí•˜ë©´ í™ˆ ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
- `/etc/login.defs`ì˜ `CREATE_HOME` ì„¤ì •ì— ë”°ë¼ ë‹¤ë¦„
- ì‹¤ë¬´ì—ì„œëŠ” ëª…ì‹œì ìœ¼ë¡œ ì˜µì…˜ ì§€ì • ê¶Œì¥

### ì‹¤ë¬´ í™œìš© íŒ

**íŒ 1: ë°°ì¹˜ ì‘ì—…ìœ¼ë¡œ ì—¬ëŸ¬ ì‚¬ìš©ì ìƒì„±**

```bash
#!/bin/bash
# add_users.sh - ì—¬ëŸ¬ ì‚¬ìš©ìë¥¼ í•œ ë²ˆì— ìƒì„±

USERS="alice bob charlie"

for user in $USERS; do
    echo "Creating user: $user"
    useradd -m -s /bin/bash -G developers $user
    echo "$user:Temp1234" | chpasswd
    chage -d 0 $user  # ì²« ë¡œê·¸ì¸ ì‹œ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê°•ì œ
done
```

**íŒ 2: í‘œì¤€ í…œí”Œë¦¿ ì‚¬ìš©**

ì¡°ì§ì˜ í‘œì¤€ ì‚¬ìš©ì ìƒì„± ëª…ë ¹ì–´ë¥¼ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë§Œë“¤ì–´ ì¼ê´€ì„± ìœ ì§€:

```bash
#!/bin/bash
# standard_user.sh <username> <fullname>

USERNAME=$1
FULLNAME=$2

useradd \
  -m \
  -s /bin/bash \
  -G sudo \
  -c "$FULLNAME" \
  $USERNAME

# ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
passwd $USERNAME

# ì²« ë¡œê·¸ì¸ ì‹œ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê°•ì œ
chage -d 0 $USERNAME
```

**íŒ 3: ì•ˆì „í•œ UID í• ë‹¹**

UIDê°€ ê²¹ì¹˜ì§€ ì•Šë„ë¡ í™•ì¸:

```bash
# ë‹¤ìŒ ì‚¬ìš© ê°€ëŠ¥í•œ UID ì°¾ê¸°
NEXT_UID=$(awk -F: '$3 >= 1000 && $3 < 60000 {print $3}' /etc/passwd | sort -n | tail -1)
NEXT_UID=$((NEXT_UID + 1))

echo "Next available UID: $NEXT_UID"

# í•´ë‹¹ UIDë¡œ ì‚¬ìš©ì ìƒì„±
useradd -u $NEXT_UID -m newuser
```

### ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì™€ í•´ê²°

**ì˜¤ë¥˜ 1: ê·¸ë£¹ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ**

```bash
# useradd -g 9999 testuser
useradd: group '9999' does not exist
```

**í•´ê²°:**
```bash
# ê·¸ë£¹ì„ ë¨¼ì € ìƒì„±
# groupadd -g 9999 mygroup
# useradd -g 9999 -m testuser
```

**ì˜¤ë¥˜ 2: UIDê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘**

```bash
# useradd -u 1000 newuser
useradd: UID 1000 is not unique
```

**í•´ê²°:**
```bash
# ì‚¬ìš© ê°€ëŠ¥í•œ UID í™•ì¸
# grep :1000: /etc/passwd

# ë‹¤ë¥¸ UID ì‚¬ìš©
# useradd -u 1005 -m newuser
```

**ì˜¤ë¥˜ 3: í™ˆ ë””ë ‰í„°ë¦¬ê°€ ì´ë¯¸ ì¡´ì¬**

```bash
# useradd -m -d /home/existing existuser
useradd: warning: the home directory already exists
```

**í•´ê²°:**
```bash
# ê¸°ì¡´ ë””ë ‰í„°ë¦¬ ë°±ì—… í›„ ì‚­ì œ
# mv /home/existing /home/existing.bak

# ë˜ëŠ” ê¸°ì¡´ ë””ë ‰í„°ë¦¬ ì‚¬ìš© (-M ì˜µì…˜ìœ¼ë¡œ ìƒì„± ì•ˆ í•¨)
# useradd -M -d /home/existing existuser
```

---

## ğŸ”„ usermod - ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •

### ğŸ“Ÿ `usermod` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„

**ëª…ë ¹ì–´ ê°œìš”:**
- **ëª©ì **: ê¸°ì¡´ ì‚¬ìš©ì ê³„ì •ì˜ ì •ë³´ ìˆ˜ì •
- **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ë¶€ì„œ ì´ë™, ê¶Œí•œ ë³€ê²½, ê³„ì • ì •ë³´ ì—…ë°ì´íŠ¸
- **ê¶Œí•œ**: root ê¶Œí•œ í•„ìš”

**ê¸°ë³¸ ë¬¸ë²•:**
```bash
usermod [ì˜µì…˜] USERNAME
```

### ì£¼ìš” ì˜µì…˜ ì„¤ëª…

| **ì˜µì…˜** | **ì˜ë¯¸** | **ì‚¬ìš© ëª©ì ** | **ì˜ˆì‹œ** |
|:-:|:-:|:-:|:-:|
| `-l NEW_NAME` | ë¡œê·¸ì¸ ì´ë¦„ ë³€ê²½ | ì‚¬ìš©ì ì´ë¦„ ë³€ê²½ | `usermod -l john_new john` |
| `-u UID` | UID ë³€ê²½ | UID ì¬í• ë‹¹ | `usermod -u 2000 john` |
| `-g GID` | ê¸°ë³¸ ê·¸ë£¹ ë³€ê²½ | Primary ê·¸ë£¹ ë³€ê²½ | `usermod -g developers john` |
| `-G GROUPS` | ì¶”ê°€ ê·¸ë£¹ **ì¬ì„¤ì •** | Secondary ê·¸ë£¹ ì™„ì „ êµì²´ | `usermod -G sudo john` |
| `-aG GROUPS` | ì¶”ê°€ ê·¸ë£¹ **ì¶”ê°€** | ê¸°ì¡´ ìœ ì§€í•˜ë©° ì¶”ê°€ | `usermod -aG docker john` |
| `-d DIR` | í™ˆ ë””ë ‰í„°ë¦¬ ê²½ë¡œ ë³€ê²½ | ê²½ë¡œë§Œ ë³€ê²½ | `usermod -d /new/home john` |
| `-md DIR` | í™ˆ ë””ë ‰í„°ë¦¬ **ì´ë™** | ì‹¤ì œ ë””ë ‰í„°ë¦¬ ì´ë™ | `usermod -md /new/home john` |
| `-s SHELL` | ì‰˜ ë³€ê²½ | ë¡œê·¸ì¸ ì‰˜ ë³€ê²½ | `usermod -s /bin/zsh john` |
| `-L` | ê³„ì • ì ê¸ˆ | ë¡œê·¸ì¸ ì°¨ë‹¨ | `usermod -L john` |
| `-U` | ê³„ì • ì ê¸ˆ í•´ì œ | ë¡œê·¸ì¸ í—ˆìš© | `usermod -U john` |
| `-e DATE` | ê³„ì • ë§Œë£Œì¼ ì„¤ì • | ì„ì‹œ ê³„ì • ê´€ë¦¬ | `usermod -e 2024-12-31 john` |
| `-c COMMENT` | ì„¤ëª… ë³€ê²½ | ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸ | `usermod -c "John - Manager" john` |

### ì‹¤í–‰ ì˜ˆì œ 1: UID ë³€ê²½

**ì‹œë‚˜ë¦¬ì˜¤**: test2 ì‚¬ìš©ìì˜ UIDë¥¼ 1005ë¡œ ë³€ê²½

```bash
# í˜„ì¬ UID í™•ì¸
# id test2
uid=1002(test2) gid=1002(test2) groups=1002(test2)

# UID ë³€ê²½
# usermod -u 1005 test2

# ë³€ê²½ í™•ì¸
# id test2
uid=1005(test2) gid=1002(test2) groups=1002(test2)

# passwd íŒŒì¼ í™•ì¸
# grep test2 /etc/passwd
test2:x:1005:1002::/home/test2:/bin/sh
```

**âš ï¸ ì£¼ì˜ì‚¬í•­:**
- UID ë³€ê²½ ì‹œ **ê¸°ì¡´ íŒŒì¼ì˜ ì†Œìœ ê¶Œì€ ìë™ìœ¼ë¡œ ë³€ê²½ë˜ì§€ ì•ŠìŒ**
- í™ˆ ë””ë ‰í„°ë¦¬ì™€ ì†Œìœ  íŒŒì¼ë“¤ì˜ ì†Œìœ ê¶Œì„ ìˆ˜ë™ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•¨

**ì†Œìœ ê¶Œ ì—…ë°ì´íŠ¸:**
```bash
# í™ˆ ë””ë ‰í„°ë¦¬ ì†Œìœ ê¶Œ ë³€ê²½
# chown -R test2:test2 /home/test2

# ì‹œìŠ¤í…œ ì „ì²´ì—ì„œ ì´ì „ UIDë¡œ ì†Œìœ ëœ íŒŒì¼ ì°¾ê¸° ë° ë³€ê²½
# find / -user 1002 -exec chown test2 {} \; 2>/dev/null
```

### ì‹¤í–‰ ì˜ˆì œ 2: sudo ê·¸ë£¹ì— ì‚¬ìš©ì ì¶”ê°€

**ì‹œë‚˜ë¦¬ì˜¤**: ubuntu ì‚¬ìš©ìì—ê²Œ sudo ê¶Œí•œ ë¶€ì—¬

```bash
# í˜„ì¬ ê·¸ë£¹ í™•ì¸
# groups ubuntu
ubuntu : ubuntu

# sudo ê·¸ë£¹ì— ì¶”ê°€ (-a ì˜µì…˜ í•„ìˆ˜!)
# usermod -aG sudo ubuntu

# ë³€ê²½ í™•ì¸
# groups ubuntu
ubuntu : ubuntu sudo

# id ëª…ë ¹ì–´ë¡œ ìƒì„¸ í™•ì¸
# id ubuntu
uid=1000(ubuntu) gid=1000(ubuntu) groups=1000(ubuntu),27(sudo)
```

**âš ï¸ ì¤‘ìš”: `-a` ì˜µì…˜ ë°˜ë“œì‹œ ì‚¬ìš©!**

**ì˜ëª»ëœ ë°©ë²•** (ê¸°ì¡´ ê·¸ë£¹ì´ ì‚¬ë¼ì§):
```bash
# -a ì—†ì´ ì‹¤í–‰í•˜ë©´ ê¸°ì¡´ ê·¸ë£¹ì´ ëª¨ë‘ ì œê±°ë¨!
# usermod -G sudo ubuntu
# groups ubuntu
ubuntu : sudo    # ubuntu ê·¸ë£¹ì—ì„œ ì œì™¸ë¨!
```

**ì˜¬ë°”ë¥¸ ë°©ë²•** (ê¸°ì¡´ ê·¸ë£¹ ìœ ì§€):
```bash
# -a ì˜µì…˜ìœ¼ë¡œ ê¸°ì¡´ ê·¸ë£¹ ìœ ì§€í•˜ë©° ì¶”ê°€
# usermod -aG sudo ubuntu
# groups ubuntu
ubuntu : ubuntu sudo    # ëª¨ë‘ ìœ ì§€ë¨
```

### ì‹¤í–‰ ì˜ˆì œ 3: í™ˆ ë””ë ‰í„°ë¦¬ ë³€ê²½ (-m ì˜µì…˜ì˜ ì¤‘ìš”ì„±)

**ì‹œë‚˜ë¦¬ì˜¤ A**: `-m` ì˜µì…˜ **ì—†ì´** í™ˆ ë””ë ‰í„°ë¦¬ ë³€ê²½

```bash
# ë¨¼ì € ìƒˆ ê²½ë¡œì— ë””ë ‰í„°ë¦¬ ìƒì„±
# mkdir -p /new_home

# -m ì—†ì´ ê²½ë¡œë§Œ ë³€ê²½
# usermod -d /new_home/test1 test1

# passwd íŒŒì¼ í™•ì¸ (ê²½ë¡œë§Œ ë³€ê²½ë¨)
# grep test1 /etc/passwd
test1:x:1001:1001::/new_home/test1:/bin/sh

# ì‹¤ì œ ë””ë ‰í„°ë¦¬ í™•ì¸
# ls /new_home/test1
ls: cannot access '/new_home/test1': No such file exists

# ì´ì „ í™ˆ ë””ë ‰í„°ë¦¬ëŠ” ê·¸ëŒ€ë¡œ ìˆìŒ
# ls /home/test1
total 16
-rw-r--r-- 1 test1 test1  220 Nov 25 .bash_logout
```

**ë¬¸ì œì :**
- `/etc/passwd`ì˜ ê²½ë¡œë§Œ ë³€ê²½ë¨
- ì‹¤ì œ íŒŒì¼ë“¤ì€ ì´ì „ ìœ„ì¹˜ì— ê·¸ëŒ€ë¡œ ì¡´ì¬
- ì‚¬ìš©ì ë¡œê·¸ì¸ ì‹œ í™ˆ ë””ë ‰í„°ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**ì‹œë‚˜ë¦¬ì˜¤ B**: `-m` ì˜µì…˜ **ì‚¬ìš©**í•˜ì—¬ í™ˆ ë””ë ‰í„°ë¦¬ ì´ë™

```bash
# -m ì˜µì…˜ê³¼ í•¨ê»˜ ë³€ê²½ (íŒŒì¼ê¹Œì§€ ì´ë™)
# usermod -md /new_home/test1 test1

# ë³€ê²½ í™•ì¸
# grep test1 /etc/passwd
test1:x:1001:1001::/new_home/test1:/bin/sh

# ì‹¤ì œ ë””ë ‰í„°ë¦¬ í™•ì¸ (íŒŒì¼ë“¤ì´ ì´ë™ë¨)
# ls -la /new_home/test1
total 16
-rw-r--r-- 1 test1 test1  220 Nov 25 .bash_logout
-rw-r--r-- 1 test1 test1 3526 Nov 25 .bashrc

# ì´ì „ ê²½ë¡œëŠ” ë¹„ì–´ìˆìŒ
# ls /home/test1
ls: cannot access '/home/test1': No such file exists
```

**ê¶Œì¥ ë°©ë²•:**
```bash
# í•­ìƒ -m ì˜µì…˜ì„ í•¨ê»˜ ì‚¬ìš©
usermod -md <ìƒˆê²½ë¡œ> <ì‚¬ìš©ìëª…>
```

### ì‹¤í–‰ ì˜ˆì œ 4: ê¸°ë³¸ ê·¸ë£¹ ë³€ê²½

**ì‹œë‚˜ë¦¬ì˜¤**: test3 ì‚¬ìš©ìë¥¼ dev_team ê·¸ë£¹ìœ¼ë¡œ ë³€ê²½

```bash
# ê·¸ë£¹ ìƒì„±
# groupadd -g 600 dev_team

# ê¸°ë³¸ ê·¸ë£¹ ë³€ê²½
# usermod -g 600 test3

# í™•ì¸
# id test3
uid=1003(test3) gid=600(dev_team) groups=600(dev_team)

# passwd íŒŒì¼ í™•ì¸
# grep test3 /etc/passwd
test3:x:1003:600::/home/test3:/bin/sh
```

**ê²°ê³¼:**
- ê¸°ë³¸ ê·¸ë£¹ì´ dev_team(600)ìœ¼ë¡œ ë³€ê²½
- ì´ì œ test3ê°€ ë§Œë“œëŠ” íŒŒì¼ì˜ ê·¸ë£¹ ì†Œìœ ê¶Œì€ dev_teamì´ ë¨

### ì‹¤í–‰ ì˜ˆì œ 5: ê³„ì • ì ê¸ˆ ë° í•´ì œ

**ì‹œë‚˜ë¦¬ì˜¤**: í‡´ì‚¬ ì˜ˆì • ì§ì›ì˜ ê³„ì •ì„ ì„ì‹œë¡œ ì ê¸ˆ

```bash
# í˜„ì¬ ìƒíƒœ í™•ì¸
# grep test0 /etc/shadow
test0:$6$randomhash...:19801:0:99999:7:::
      ^^^^^^^^^^^^^^ ì •ìƒ ë¹„ë°€ë²ˆí˜¸

# ê³„ì • ì ê¸ˆ
# usermod -L test0

# ì ê¸ˆ í™•ì¸ (ë¹„ë°€ë²ˆí˜¸ ì•ì— ! ì¶”ê°€ë¨)
# grep test0 /etc/shadow
test0:!$6$randomhash...:19801:0:99999:7:::
      ^ ì ê¸ˆ í‘œì‹œ

# ë¡œê·¸ì¸ ì‹œë„ (ì‹¤íŒ¨)
$ su - test0
su: Authentication failure
```

**ì ê¸ˆ í•´ì œ:**
```bash
# ê³„ì • ì ê¸ˆ í•´ì œ
# usermod -U test0

# í™•ì¸
# grep test0 /etc/shadow
test0:$6$randomhash...:19801:0:99999:7:::
      ^^^^^^^^^^^^^^ ! ì œê±°ë¨
```

**ì‹¤ë¬´ í™œìš©:**
- í‡´ì‚¬ ì§ì› ê³„ì • ì¼ì‹œ ì •ì§€
- ë³´ì•ˆ ì‚¬ê³  ë°œìƒ ì‹œ ì¦‰ì‹œ ê³„ì • ì°¨ë‹¨
- íœ´ì§ ì¤‘ì¸ ì§ì› ê³„ì • ê´€ë¦¬

### ì‹¤í–‰ ì˜ˆì œ 6: ì—¬ëŸ¬ ì˜µì…˜ ë™ì‹œ ì‚¬ìš©

**ì‹œë‚˜ë¦¬ì˜¤**: ë¶€ì„œ ì´ë™ìœ¼ë¡œ ì¸í•œ ì¢…í•©ì ì¸ ê³„ì • ì •ë³´ ë³€ê²½

```bash
# ìƒí™©: johnì´ ê°œë°œíŒ€ì—ì„œ ê´€ë¦¬íŒ€ìœ¼ë¡œ ì´ë™
# - ê·¸ë£¹ì„ admin_teamìœ¼ë¡œ ë³€ê²½
# - í™ˆ ë””ë ‰í„°ë¦¬ë¥¼ /home/admin/johnìœ¼ë¡œ ì´ë™
# - ì„¤ëª… ì—…ë°ì´íŠ¸

# í•œ ë²ˆì— ë³€ê²½
# usermod \
  -g admin_team \
  -md /home/admin/john \
  -c "John Doe - Admin Team Manager" \
  john

# í™•ì¸
# grep john /etc/passwd
john:x:2001:800:John Doe - Admin Team Manager:/home/admin/john:/bin/bash

# ê·¸ë£¹ í™•ì¸
# id john
uid=2001(john) gid=800(admin_team) groups=800(admin_team),27(sudo)
```

### ì‹¤ë¬´ í™œìš© íŒ

**íŒ 1: ì•ˆì „í•œ ê·¸ë£¹ ì¶”ê°€ ìŠ¤í¬ë¦½íŠ¸**

```bash
#!/bin/bash
# safe_group_add.sh <username> <groupname>

USERNAME=$1
GROUPNAME=$2

# ì‚¬ìš©ì ì¡´ì¬ í™•ì¸
if ! id "$USERNAME" &>/dev/null; then
    echo "Error: User $USERNAME does not exist"
    exit 1
fi

# ê·¸ë£¹ ì¡´ì¬ í™•ì¸
if ! getent group "$GROUPNAME" &>/dev/null; then
    echo "Error: Group $GROUPNAME does not exist"
    exit 1
fi

# ì´ë¯¸ ê·¸ë£¹ ë©¤ë²„ì¸ì§€ í™•ì¸
if groups "$USERNAME" | grep -q "\b$GROUPNAME\b"; then
    echo "User $USERNAME is already a member of $GROUPNAME"
    exit 0
fi

# ê·¸ë£¹ ì¶”ê°€
usermod -aG "$GROUPNAME" "$USERNAME"
echo "Successfully added $USERNAME to $GROUPNAME"
```

**íŒ 2: í™ˆ ë””ë ‰í„°ë¦¬ ì•ˆì „ ì´ë™**

```bash
#!/bin/bash
# safe_home_move.sh <username> <new_home_path>

USERNAME=$1
NEW_HOME=$2

# í˜„ì¬ í™ˆ ë””ë ‰í„°ë¦¬ í™•ì¸
CURRENT_HOME=$(getent passwd "$USERNAME" | cut -d: -f6)

# ë°±ì—… ìƒì„±
echo "Creating backup..."
tar -czf "/tmp/${USERNAME}_home_backup_$(date +%Y%m%d).tar.gz" "$CURRENT_HOME"

# í™ˆ ë””ë ‰í„°ë¦¬ ì´ë™
echo "Moving home directory..."
usermod -md "$NEW_HOME" "$USERNAME"

echo "Home directory moved from $CURRENT_HOME to $NEW_HOME"
echo "Backup saved at /tmp/${USERNAME}_home_backup_$(date +%Y%m%d).tar.gz"
```

**íŒ 3: ëŒ€ëŸ‰ ê³„ì • ì •ë³´ ì—…ë°ì´íŠ¸**

```bash
#!/bin/bash
# update_team_shell.sh - íŠ¹ì • íŒ€ ì „ì²´ ì‰˜ ë³€ê²½

TEAM_MEMBERS="alice bob charlie"
NEW_SHELL="/bin/zsh"

for user in $TEAM_MEMBERS; do
    echo "Updating shell for $user..."
    usermod -s "$NEW_SHELL" "$user"
done

echo "All team members now use $NEW_SHELL"
```

### ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì™€ í•´ê²°

**ì˜¤ë¥˜ 1: ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì¼ ë•Œ ë³€ê²½ ì‹œë„**

```bash
# usermod -l john_new john
usermod: user john is currently used by process 1234
```

**í•´ê²°:**
```bash
# ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
# pkill -u john

# ë˜ëŠ” ë¡œê·¸ì•„ì›ƒ ìš”ì²­ í›„ ë³€ê²½
```

**ì˜¤ë¥˜ 2: í™ˆ ë””ë ‰í„°ë¦¬ ì´ë™ ì‹¤íŒ¨**

```bash
# usermod -md /new/home/john john
usermod: directory /new/home does not exist
```

**í•´ê²°:**
```bash
# ìƒìœ„ ë””ë ‰í„°ë¦¬ ë¨¼ì € ìƒì„±
# mkdir -p /new/home
# usermod -md /new/home/john john
```

---

## ğŸ—‘ï¸ userdel - ì‚¬ìš©ì ì‚­ì œ

### ğŸ“Ÿ `userdel` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„

**ëª…ë ¹ì–´ ê°œìš”:**
- **ëª©ì **: ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ì ê³„ì • ì‚­ì œ
- **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: í‡´ì‚¬ì ê³„ì • ì œê±°, í…ŒìŠ¤íŠ¸ ê³„ì • ì •ë¦¬
- **ê¶Œí•œ**: root ê¶Œí•œ í•„ìš”

**ê¸°ë³¸ ë¬¸ë²•:**
```bash
userdel [ì˜µì…˜] USERNAME
```

### ì£¼ìš” ì˜µì…˜ ì„¤ëª…

| **ì˜µì…˜** | **ì˜ë¯¸** | **ì‚­ì œ ë²”ìœ„** | **ì£¼ì˜ì‚¬í•­** |
|:-:|:-:|:-:|:-:|
| (ì˜µì…˜ ì—†ìŒ) | ê³„ì •ë§Œ ì‚­ì œ | passwd, shadow, group | í™ˆ ë””ë ‰í„°ë¦¬ ìœ ì§€ |
| `-r` | ì™„ì „ ì‚­ì œ | ê³„ì • + í™ˆ ë””ë ‰í„°ë¦¬ + ë©”ì¼ ìŠ¤í’€ | ë³µêµ¬ ë¶ˆê°€ |
| `-f` | ê°•ì œ ì‚­ì œ | ë¡œê·¸ì¸ ì¤‘ì´ì–´ë„ ì‚­ì œ | ìœ„í—˜! ë°ì´í„° ì†ì‹¤ ê°€ëŠ¥ |

### ì‹¤í–‰ ì˜ˆì œ 1: ê³„ì •ë§Œ ì‚­ì œ (í™ˆ ë””ë ‰í„°ë¦¬ ìœ ì§€)

**ì‹œë‚˜ë¦¬ì˜¤**: í…ŒìŠ¤íŠ¸ ê³„ì • ì œê±°í•˜ë˜ ë°ì´í„°ëŠ” ë³´ì¡´

```bash
# ì‚­ì œ ì „ í™•ì¸
# id test0
uid=1001(test0) gid=1001(test0) groups=1001(test0)

# ls -ld /home/test0
drwxr-xr-x 2 test0 test0 4096 Nov 25 /home/test0

# ê³„ì •ë§Œ ì‚­ì œ (ì˜µì…˜ ì—†ìŒ)
# userdel test0

# ê³„ì • ì‚­ì œ í™•ì¸
# id test0
id: 'test0': no such user

# í™ˆ ë””ë ‰í„°ë¦¬ëŠ” ì—¬ì „íˆ ì¡´ì¬
# ls -ld /home/test0
drwxr-xr-x 2 1001 1001 4096 Nov 25 /home/test0
                ^^^^ ^^^^ UID/GIDê°€ ìˆ«ìë¡œ í‘œì‹œë¨
```

**ê²°ê³¼:**
- `/etc/passwd`, `/etc/shadow`, `/etc/group`ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì œê±°
- í™ˆ ë””ë ‰í„°ë¦¬ `/home/test0`ì€ ê·¸ëŒ€ë¡œ ìœ ì§€
- ì†Œìœ ê¶Œì´ UID/GID ìˆ«ìë¡œ í‘œì‹œ (ê³„ì •ëª…ì´ ì‚¬ë¼ì¡Œìœ¼ë¯€ë¡œ)

**ì–¸ì œ ì‚¬ìš©:**
- ë°ì´í„°ë¥¼ ë°±ì—…í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ì´ì „í•´ì•¼ í•  ë•Œ
- ì‹¤ìˆ˜ë¡œ ì‚­ì œí–ˆì„ ê²½ìš° ë³µêµ¬ ê°€ëŠ¥í•˜ë„ë¡

### ì‹¤í–‰ ì˜ˆì œ 2: ì™„ì „ ì‚­ì œ (-r ì˜µì…˜)

**ì‹œë‚˜ë¦¬ì˜¤**: ë” ì´ìƒ í•„ìš”ì—†ëŠ” ê³„ì •ê³¼ ë°ì´í„° ì™„ì „ ì œê±°

```bash
# ì‚­ì œ ì „ í™•ì¸
# du -sh /home/test1
150M    /home/test1

# ì™„ì „ ì‚­ì œ
# userdel -r test1

# í™ˆ ë””ë ‰í„°ë¦¬ í™•ì¸ (ì‚­ì œë¨)
# ls /home/test1
ls: cannot access '/home/test1': No such file or directory

# ë©”ì¼ ìŠ¤í’€ë„ ì‚­ì œë¨
# ls /var/mail/test1
ls: cannot access '/var/mail/test1': No such file or directory
```

**âš ï¸ ê²½ê³ :**
- `-r` ì˜µì…˜ì€ **ë³µêµ¬ ë¶ˆê°€ëŠ¥**í•œ ì‚­ì œ
- ì¤‘ìš”í•œ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ë°˜ë“œì‹œ ë°±ì—… ë¨¼ì €!

**ì•ˆì „í•œ ì‚­ì œ ì ˆì°¨:**
```bash
# 1. ë°±ì—… ìƒì„±
# tar -czf /backup/test1_home_$(date +%Y%m%d).tar.gz /home/test1

# 2. ë°±ì—… í™•ì¸
# tar -tzf /backup/test1_home_$(date +%Y%m%d).tar.gz | head

# 3. ì‚­ì œ ì‹¤í–‰
# userdel -r test1
```

### ì‹¤í–‰ ì˜ˆì œ 3: ê°•ì œ ì‚­ì œ (-f ì˜µì…˜)

**ì‹œë‚˜ë¦¬ì˜¤**: ë¡œê·¸ì¸ ì¤‘ì¸ ì‚¬ìš©ìë¥¼ ì¦‰ì‹œ ì‚­ì œ (ê¸´ê¸‰ ìƒí™©)

```bash
# ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì¸ ìƒíƒœ í™•ì¸
# who
test2    pts/0        2024-11-25 10:00

# ì¼ë°˜ ì‚­ì œ ì‹œë„ (ì‹¤íŒ¨)
# userdel test2
userdel: user test2 is currently used by process 5678

# ê°•ì œ ì‚­ì œ
# userdel -f test2
userdel: user test2 is currently used by process 5678
userdel: test2 mail spool (/var/mail/test2) not found

# ì‚­ì œ í™•ì¸
# id test2
id: 'test2': no such user
```

**âš ï¸ ìœ„í—˜:**
- ë¡œê·¸ì¸ ì¤‘ì¸ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ê°€ ê°•ì œ ì¢…ë£Œë  ìˆ˜ ìˆìŒ
- ì‘ì—… ì¤‘ì¸ ë°ì´í„° ì†ì‹¤ ìœ„í—˜
- ì‹œìŠ¤í…œ ë¶ˆì•ˆì • ê°€ëŠ¥

**ì•ˆì „í•œ ëŒ€ì•ˆ:**
```bash
# 1. ì‚¬ìš©ìì—ê²Œ ë¡œê·¸ì•„ì›ƒ ìš”ì²­
# wall "Please log out. Account maintenance in progress."

# 2. ê³„ì • ì ê¸ˆ (ì„ì‹œ ì¡°ì¹˜)
# usermod -L test2

# 3. ì‚¬ìš©ìê°€ ë¡œê·¸ì•„ì›ƒí•œ í›„ ì‚­ì œ
# userdel -r test2
```

### ì‹¤í–‰ ì˜ˆì œ 4: ê·¸ë£¹ ì†Œìœ  íŒŒì¼ì´ ìˆëŠ” ê²½ìš°

**ì‹œë‚˜ë¦¬ì˜¤**: ë‹¤ë¥¸ ì‚¬ìš©ìê°€ í•´ë‹¹ ê·¸ë£¹ì„ ì‚¬ìš© ì¤‘

```bash
# test_group ê·¸ë£¹ì˜ ë©¤ë²„ í™•ì¸
# grep test_group /etc/group
test_group:x:1001:test3,alice,bob

# test3 ì‚­ì œ ì‹œë„
# userdel test3
userdel: group test3 is the primary group of another user

# í•´ê²°: ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì˜ ê¸°ë³¸ ê·¸ë£¹ ë³€ê²½ í›„ ì‚­ì œ
# usermod -g alice alice
# usermod -g bob bob
# userdel -r test3
```

### ì‚­ì œ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ë³´ì•ˆ ì ê²€:**
```bash
#!/bin/bash
# user_delete_check.sh <username>

USERNAME=$1

echo "=== User Deletion Pre-Check ==="
echo ""

# 1. í˜„ì¬ ë¡œê·¸ì¸ ì—¬ë¶€
echo "1. Login Status:"
who | grep "^$USERNAME " || echo "Not logged in"
echo ""

# 2. ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤
echo "2. Running Processes:"
ps -u "$USERNAME" | head -5
echo ""

# 3. cron ì‘ì—…
echo "3. Cron Jobs:"
crontab -u "$USERNAME" -l 2>/dev/null || echo "No cron jobs"
echo ""

# 4. ì†Œìœ  íŒŒì¼ ìˆ˜
echo "4. Owned Files:"
FILECOUNT=$(find / -user "$USERNAME" 2>/dev/null | wc -l)
echo "Total files owned: $FILECOUNT"
echo ""

# 5. í™ˆ ë””ë ‰í„°ë¦¬ í¬ê¸°
echo "5. Home Directory Size:"
du -sh "/home/$USERNAME" 2>/dev/null || echo "Home directory not found"
echo ""

# 6. ê·¸ë£¹ ë©¤ë²„ì‹­
echo "6. Group Memberships:"
groups "$USERNAME"
echo ""

echo "=== End of Check ==="
```

### ì‹¤ë¬´ í™œìš© íŒ

**íŒ 1: ì•ˆì „í•œ ì‚­ì œ ìŠ¤í¬ë¦½íŠ¸**

```bash
#!/bin/bash
# safe_user_delete.sh <username>

USERNAME=$1

# ì‚¬ìš©ì ì¡´ì¬ í™•ì¸
if ! id "$USERNAME" &>/dev/null; then
    echo "Error: User $USERNAME does not exist"
    exit 1
fi

# ë°±ì—… ë””ë ‰í„°ë¦¬ ìƒì„±
BACKUP_DIR="/backup/deleted_users/$(date +%Y%m%d)"
mkdir -p "$BACKUP_DIR"

# í™ˆ ë””ë ‰í„°ë¦¬ ë°±ì—…
if [ -d "/home/$USERNAME" ]; then
    echo "Backing up home directory..."
    tar -czf "$BACKUP_DIR/${USERNAME}_home.tar.gz" "/home/$USERNAME"
fi

# cron ì‘ì—… ë°±ì—…
if crontab -u "$USERNAME" -l &>/dev/null; then
    echo "Backing up cron jobs..."
    crontab -u "$USERNAME" -l > "$BACKUP_DIR/${USERNAME}_crontab"
fi

# ì‚¬ìš©ì ì •ë³´ ì €ì¥
echo "Saving user information..."
getent passwd "$USERNAME" > "$BACKUP_DIR/${USERNAME}_passwd"
getent shadow "$USERNAME" > "$BACKUP_DIR/${USERNAME}_shadow"

# ê³„ì • ì‚­ì œ
echo "Deleting user..."
userdel -r "$USERNAME"

echo "User deleted. Backup saved at $BACKUP_DIR"
```

**íŒ 2: í‡´ì‚¬ì ê³„ì • ì•„ì¹´ì´ë¸Œ**

```bash
#!/bin/bash
# archive_departed.sh <username>

USERNAME=$1
ARCHIVE_DIR="/archive/departed_employees"

# ì•„ì¹´ì´ë¸Œ ì¤€ë¹„
mkdir -p "$ARCHIVE_DIR/$USERNAME"

# 1. í™ˆ ë””ë ‰í„°ë¦¬ ì••ì¶•
tar -czf "$ARCHIVE_DIR/$USERNAME/home.tar.gz" "/home/$USERNAME"

# 2. ë©”ì¼ ë°±ì—…
if [ -f "/var/mail/$USERNAME" ]; then
    cp "/var/mail/$USERNAME" "$ARCHIVE_DIR/$USERNAME/mail"
fi

# 3. ê³„ì • ì •ë³´ ì €ì¥
getent passwd "$USERNAME" > "$ARCHIVE_DIR/$USERNAME/account_info.txt"

# 4. ì†Œìœ  íŒŒì¼ ëª©ë¡ ìƒì„±
find / -user "$USERNAME" 2>/dev/null > "$ARCHIVE_DIR/$USERNAME/owned_files.txt"

# 5. ê³„ì • ì ê¸ˆ (ì¦‰ì‹œ ì‚­ì œí•˜ì§€ ì•ŠìŒ)
usermod -L "$USERNAME"
usermod -e 1 "$USERNAME"  # ì¦‰ì‹œ ë§Œë£Œ

echo "Account archived and locked. Manual deletion required."
```

---

## ğŸ”‘ passwd - ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬

### ğŸ“Ÿ `passwd` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„

**ëª…ë ¹ì–´ ê°œìš”:**
- **ëª©ì **: ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì„¤ì • ë° ê´€ë¦¬
- **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, ê³„ì • ì ê¸ˆ/í•´ì œ, ë§Œë£Œ ì •ì±… ê´€ë¦¬
- **ê¶Œí•œ**:
  - ì¼ë°˜ ì‚¬ìš©ì: ìì‹ ì˜ ë¹„ë°€ë²ˆí˜¸ë§Œ ë³€ê²½
  - root: ëª¨ë“  ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê°€ëŠ¥

**ê¸°ë³¸ ë¬¸ë²•:**
```bash
passwd [ì˜µì…˜] [USERNAME]
```

### ì£¼ìš” ì˜µì…˜ ì„¤ëª…

| **ì˜µì…˜** | **ì˜ë¯¸** | **ì‚¬ìš© ëª©ì ** | **ê¶Œí•œ** |
|:-:|:-:|:-:|:-:|
| (ì˜µì…˜ ì—†ìŒ) | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | ìì‹  ë˜ëŠ” íƒ€ì¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | ë³¸ì¸/root |
| `-l` | ê³„ì • ì ê¸ˆ | ë¡œê·¸ì¸ ì°¨ë‹¨ | root |
| `-u` | ê³„ì • ì ê¸ˆ í•´ì œ | ë¡œê·¸ì¸ í—ˆìš© | root |
| `-d` | ë¹„ë°€ë²ˆí˜¸ ì‚­ì œ | ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ë¡œê·¸ì¸ | root |
| `-e` | ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ | ë‹¤ìŒ ë¡œê·¸ì¸ ì‹œ ë³€ê²½ ê°•ì œ | root |
| `-n DAYS` | ìµœì†Œ ì‚¬ìš©ì¼ | ë³€ê²½ í›„ ìµœì†Œ ëŒ€ê¸°ì¼ | root |
| `-x DAYS` | ìµœëŒ€ ì‚¬ìš©ì¼ | ìœ íš¨ ê¸°ê°„ ì„¤ì • | root |
| `-w DAYS` | ê²½ê³ ì¼ | ë§Œë£Œ ì „ ê²½ê³  ê¸°ê°„ | root |
| `-i DAYS` | ë¹„í™œì„± ìœ ì˜ˆì¼ | ë§Œë£Œ í›„ ë¡œê·¸ì¸ ê°€ëŠ¥ ì¼ìˆ˜ | root |
| `-S` | ìƒíƒœ í™•ì¸ | ë¹„ë°€ë²ˆí˜¸ ìƒíƒœ ì¡°íšŒ | ë³¸ì¸/root |

### ì‹¤í–‰ ì˜ˆì œ 1: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ (ì¼ë°˜ ì‚¬ìš©ì)

**ì‹œë‚˜ë¦¬ì˜¤**: ì‚¬ìš©ìê°€ ìì‹ ì˜ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

```bash
# ì¼ë°˜ ì‚¬ìš©ìë¡œ ì‹¤í–‰
$ passwd
Changing password for ubuntu.
Current password: ********
New password: ************
Retype new password: ************
passwd: password updated successfully
```

**í”„ë¡œì„¸ìŠ¤:**
1. í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (ë³´ì•ˆ)
2. ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì¬í™•ì¸
4. ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ê²€ì‚¬
5. `/etc/shadow` íŒŒì¼ ì—…ë°ì´íŠ¸

**ë¹„ë°€ë²ˆí˜¸ ê·œì¹™:**
```bash
# PAM ì„¤ì •ì— ì˜í•´ ê²°ì • (/etc/pam.d/common-password)
- ìµœì†Œ 8ì ì´ìƒ
- ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì ì¡°í•© ê¶Œì¥
- ì´ì „ ë¹„ë°€ë²ˆí˜¸ì™€ ìœ ì‚¬í•˜ë©´ ê±°ë¶€
- ì‚¬ì „ ë‹¨ì–´ ì‚¬ìš© ë¶ˆê°€
```

### ì‹¤í–‰ ì˜ˆì œ 2: rootê°€ íƒ€ ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

**ì‹œë‚˜ë¦¬ì˜¤**: ê´€ë¦¬ìê°€ test0 ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •

```bash
# root ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰
# passwd test0
New password: ************
Retype new password: ************
passwd: password updated successfully
```

**íŠ¹ì§•:**
- í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ **ë¶ˆí•„ìš”** (root ê¶Œí•œ)
- ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ê·œì¹™ **ìš°íšŒ ê°€ëŠ¥** (ê²½ê³ ë§Œ í‘œì‹œ)
- ì¦‰ì‹œ ì ìš©

**ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì„¤ì • (íŒŒì´í”„ ì‚¬ìš©):**
```bash
# ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‚¬ìš© (ë³´ì•ˆ ì£¼ì˜!)
# echo "NewPassword123" | passwd --stdin test0

# ë˜ëŠ” chpasswd ì‚¬ìš© (ë” ì•ˆì „)
# echo "test0:NewPassword123" | chpasswd
```

### ì‹¤í–‰ ì˜ˆì œ 3: ê³„ì • ì ê¸ˆ ë° í•´ì œ

**ì‹œë‚˜ë¦¬ì˜¤ A**: ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™œë™ìœ¼ë¡œ ê³„ì • ê¸´ê¸‰ ì ê¸ˆ

```bash
# ê³„ì • ì ê¸ˆ
# passwd -l test0
passwd: password expiry information changed.

# shadow íŒŒì¼ í™•ì¸
# grep test0 /etc/shadow
test0:!$6$xyz...:19801:0:99999:7:::
      ^ ì ê¸ˆ í‘œì‹œ

# ì ê¸ˆ ìƒíƒœ í™•ì¸
# passwd -S test0
test0 L 11/25/2024 0 99999 7 -1
      ^ L = Locked
```

**ì‹œë‚˜ë¦¬ì˜¤ B**: ì¡°ì‚¬ ì™„ë£Œ í›„ ê³„ì • í•´ì œ

```bash
# ê³„ì • ì ê¸ˆ í•´ì œ
# passwd -u test0
passwd: password expiry information changed.

# ìƒíƒœ í™•ì¸
# passwd -S test0
test0 P 11/25/2024 0 99999 7 -1
      ^ P = Password set (usable)
```

**ìƒíƒœ ì½”ë“œ:**
- `L`: Locked (ì ê¸ˆ)
- `NP`: No Password (ë¹„ë°€ë²ˆí˜¸ ì—†ìŒ)
- `P`: Password (ì •ìƒ)

### ì‹¤í–‰ ì˜ˆì œ 4: ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ ê°•ì œ

**ì‹œë‚˜ë¦¬ì˜¤**: ë³´ì•ˆ ì •ì±… ë³€ê²½ìœ¼ë¡œ ëª¨ë“  ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • í•„ìš”

```bash
# ë¹„ë°€ë²ˆí˜¸ ì¦‰ì‹œ ë§Œë£Œ
# passwd -e test0
passwd: password expiry information changed.

# ë§Œë£Œ í™•ì¸
# chage -l test0
Last password change                                    : password must be changed
Password expires                                        : password must be changed

# ì‚¬ìš©ìê°€ ë‹¤ìŒ ë¡œê·¸ì¸ ì‹œ ë³´ê²Œ ë  í™”ë©´
$ ssh test0@localhost
Warning: your password has expired.
Password:
You are required to change your password immediately (administrator enforced)
New password:
```

**ëŒ€ëŸ‰ ì ìš©:**
```bash
#!/bin/bash
# force_password_change.sh - ëª¨ë“  ì¼ë°˜ ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ

awk -F: '$3 >= 1000 && $3 < 60000 {print $1}' /etc/passwd | while read user; do
    echo "Expiring password for $user..."
    passwd -e "$user"
done
```

### ì‹¤í–‰ ì˜ˆì œ 5: ë¹„ë°€ë²ˆí˜¸ ì •ì±… ì„¤ì •

**ì‹œë‚˜ë¦¬ì˜¤**: 90ì¼ë§ˆë‹¤ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì •ì±… ì ìš©

```bash
# ìµœëŒ€ ì‚¬ìš©ì¼ ì„¤ì • (90ì¼)
# passwd -x 90 test0

# ë³€ê²½ í›„ ìµœì†Œ ì‚¬ìš©ì¼ ì„¤ì • (7ì¼, ì¬ë³€ê²½ ë°©ì§€)
# passwd -n 7 test0

# ë§Œë£Œ 14ì¼ ì „ë¶€í„° ê²½ê³ 
# passwd -w 14 test0

# ë§Œë£Œ í›„ 30ì¼ ìœ ì˜ˆ (ì´ ê¸°ê°„ ë‚´ ë¡œê·¸ì¸ ì‹œ ë³€ê²½ ê°€ëŠ¥)
# passwd -i 30 test0

# ì„¤ì • í™•ì¸
# passwd -S test0
test0 P 11/25/2024 7 90 14 30
```

**shadow íŒŒì¼ì— ë°˜ì˜:**
```bash
# grep test0 /etc/shadow
test0:$6$...:19801:7:90:14:30::
                  ^  ^  ^  ^
                  |  |  |  â””â”€ inactive
                  |  |  â””â”€â”€â”€â”€ warn
                  |  â””â”€â”€â”€â”€â”€â”€â”€â”€ max
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ min
```

### ì‹¤í–‰ ì˜ˆì œ 6: ë¹„ë°€ë²ˆí˜¸ ì‚­ì œ (ìœ„í—˜!)

**ì‹œë‚˜ë¦¬ì˜¤**: í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ë¡œê·¸ì¸

```bash
# ë¹„ë°€ë²ˆí˜¸ ì‚­ì œ
# passwd -d test0
passwd: password expiry information changed.

# shadow íŒŒì¼ í™•ì¸ (ë¹„ë°€ë²ˆí˜¸ í•„ë“œ ë¹„ì–´ìˆìŒ)
# grep test0 /etc/shadow
test0::19801:0:99999:7:::
     ^^ ë¹„ë°€ë²ˆí˜¸ ì—†ìŒ

# ì´ì œ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ë¡œê·¸ì¸ ê°€ëŠ¥ (ë§¤ìš° ìœ„í—˜!)
$ su - test0
$ (ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì—†ì´ ë°”ë¡œ ë¡œê·¸ì¸ë¨)
```

**âš ï¸ ê²½ê³ :**
- ì ˆëŒ€ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‚¬ìš© ê¸ˆì§€
- ë³´ì•ˆ ì·¨ì•½ì  ì‹¬ê°
- í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œë§Œ ì œí•œì ìœ¼ë¡œ ì‚¬ìš©

### ë¹„ë°€ë²ˆí˜¸ ìƒíƒœ í™•ì¸

**`passwd -S` ìƒì„¸ í•´ì„:**

```bash
# passwd -S ubuntu
ubuntu P 11/20/2024 0 99999 7 -1
â”‚      â”‚ â”‚          â”‚ â”‚     â”‚ â”‚
â”‚      â”‚ â”‚          â”‚ â”‚     â”‚ â””â”€ ë¹„í™œì„± ìœ ì˜ˆì¼ (-1 = ì—†ìŒ)
â”‚      â”‚ â”‚          â”‚ â”‚     â””â”€â”€â”€ ê²½ê³ ì¼ (7ì¼)
â”‚      â”‚ â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìµœëŒ€ ì‚¬ìš©ì¼ (99999 = ë¬´ì œí•œ)
â”‚      â”‚ â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìµœì†Œ ì‚¬ìš©ì¼ (0 = ì¦‰ì‹œ ë³€ê²½ ê°€ëŠ¥)
â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë§ˆì§€ë§‰ ë³€ê²½ì¼
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìƒíƒœ (P/L/NP)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì‚¬ìš©ìëª…
```

### ì‹¤ë¬´ í™œìš© íŒ

**íŒ 1: ì‹ ê·œ ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸° ì„¤ì •**

```bash
#!/bin/bash
# new_user_password.sh <username>

USERNAME=$1

# ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±
TEMP_PASS=$(openssl rand -base64 12)

# ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
echo "$USERNAME:$TEMP_PASS" | chpasswd

# ì²« ë¡œê·¸ì¸ ì‹œ ë³€ê²½ ê°•ì œ
passwd -e "$USERNAME"

# ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ì¶œë ¥ (ì•ˆì „í•˜ê²Œ ì „ë‹¬)
echo "Temporary password for $USERNAME: $TEMP_PASS"
echo "User must change password on first login"
```

**íŒ 2: ë¹„ë°€ë²ˆí˜¸ ì •ì±… ì¼ê´„ ì ìš©**

```bash
#!/bin/bash
# apply_password_policy.sh

POLICY_MAX_DAYS=90
POLICY_MIN_DAYS=7
POLICY_WARN_DAYS=14
POLICY_INACTIVE_DAYS=30

# ëª¨ë“  ì¼ë°˜ ì‚¬ìš©ì ëŒ€ìƒ
awk -F: '$3 >= 1000 && $3 < 60000 {print $1}' /etc/passwd | while read user; do
    echo "Applying policy to $user..."
    passwd -x $POLICY_MAX_DAYS "$user"
    passwd -n $POLICY_MIN_DAYS "$user"
    passwd -w $POLICY_WARN_DAYS "$user"
    passwd -i $POLICY_INACTIVE_DAYS "$user"
done

echo "Password policy applied to all users"
```

**íŒ 3: ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œ ëª¨ë‹ˆí„°ë§**

```bash
#!/bin/bash
# check_password_expiry.sh

echo "Users with password expiring soon:"
echo "=================================="

awk -F: '$3 >= 1000 && $3 < 60000 {print $1}' /etc/passwd | while read user; do
    # ë§Œë£Œê¹Œì§€ ë‚¨ì€ ì¼ìˆ˜ ê³„ì‚°
    STATUS=$(passwd -S "$user")
    MAX_DAYS=$(echo "$STATUS" | awk '{print $5}')
    LAST_CHANGE=$(echo "$STATUS" | awk '{print $3}')

    # ë§Œë£Œì¼ì´ ì„¤ì •ëœ ê²½ìš°ì—ë§Œ ê³„ì‚°
    if [ "$MAX_DAYS" != "99999" ]; then
        # ê°„ë‹¨í•œ ê³„ì‚° (ì‹¤ì œë¡œëŠ” ë” ì •êµí•œ ë‚ ì§œ ê³„ì‚° í•„ìš”)
        EXPIRE_DATE=$(date -d "$LAST_CHANGE + $MAX_DAYS days" +%Y-%m-%d)
        DAYS_LEFT=$(( ($(date -d "$EXPIRE_DATE" +%s) - $(date +%s)) / 86400 ))

        if [ $DAYS_LEFT -le 14 ]; then
            echo "$user: $DAYS_LEFT days left (expires $EXPIRE_DATE)"
        fi
    fi
done
```

### ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

**ë¹„ë°€ë²ˆí˜¸ ì •ì±… ê¶Œì¥ì‚¬í•­:**

```bash
# /etc/login.defsì— ê¸°ë³¸ ì •ì±… ì„¤ì •
PASS_MAX_DAYS   90      # 90ì¼ë§ˆë‹¤ ë³€ê²½
PASS_MIN_DAYS   7       # ë³€ê²½ í›„ 7ì¼ê°„ ì¬ë³€ê²½ ë¶ˆê°€
PASS_MIN_LEN    14      # ìµœì†Œ 14ì
PASS_WARN_AGE   14      # ë§Œë£Œ 14ì¼ ì „ ê²½ê³ 

# PAM ì„¤ì •ìœ¼ë¡œ ë³µì¡ë„ ê°•í™” (/etc/pam.d/common-password)
password requisite pam_pwquality.so retry=3 minlen=14 difok=3 ucredit=-1 lcredit=-1 dcredit=-1 ocredit=-1
```

**í•´ì„¤:**
- `retry=3`: 3ë²ˆê¹Œì§€ ì¬ì‹œë„ í—ˆìš©
- `minlen=14`: ìµœì†Œ 14ì
- `difok=3`: ì´ì „ ë¹„ë°€ë²ˆí˜¸ì™€ ìµœì†Œ 3ì ë‹¤ë¦„
- `ucredit=-1`: ëŒ€ë¬¸ì ìµœì†Œ 1ê°œ
- `lcredit=-1`: ì†Œë¬¸ì ìµœì†Œ 1ê°œ
- `dcredit=-1`: ìˆ«ì ìµœì†Œ 1ê°œ
- `ocredit=-1`: íŠ¹ìˆ˜ë¬¸ì ìµœì†Œ 1ê°œ

---

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ê·¸ë£¹ ê´€ë¦¬ ëª…ë ¹ì–´ì™€ su/sudo ëª…ë ¹ì–´ë¥¼ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.
# ğŸ”’ ì„¹ì…˜ 4: Linux íŒŒì¼ ê¶Œí•œ(Permission) ì‹œìŠ¤í…œ

## ğŸ“‹ íŒŒì¼ ê¶Œí•œì˜ ê°œë…

Linuxì—ì„œ ëª¨ë“  íŒŒì¼ê³¼ ë””ë ‰í„°ë¦¬ëŠ” **ì†Œìœ ê¶Œ(Ownership)**ê³¼ **ê¶Œí•œ(Permission)**ì„ ê°€ì§‘ë‹ˆë‹¤.

### ğŸ’¡ ì™œ ê¶Œí•œ ì‹œìŠ¤í…œì´ ì¤‘ìš”í•œê°€?

1. **ì ‘ê·¼ ì œì–´**: ëˆ„ê°€ íŒŒì¼ì„ ì½ê³ , ìˆ˜ì •í•˜ê³ , ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”ì§€ ì œì–´
2. **ë°ì´í„° ë³´í˜¸**: ì¤‘ìš”í•œ íŒŒì¼ì„ ë¬´ë‹¨ ì—´ëŒ/ìˆ˜ì •/ì‚­ì œë¡œë¶€í„° ë³´í˜¸
3. **ì‹œìŠ¤í…œ ë³´ì•ˆ**: ì‹œìŠ¤í…œ íŒŒì¼ì„ ì‹¤ìˆ˜ë‚˜ ì•…ì˜ì  í–‰ìœ„ë¡œë¶€í„° ë³´í˜¸
4. **ë©€í‹°ìœ ì € í™˜ê²½**: ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ì•ˆì „í•˜ê²Œ ì‹œìŠ¤í…œì„ ê³µìœ 

---

## ğŸ” íŒŒì¼ ê¶Œí•œ êµ¬ì¡° ì´í•´í•˜ê¸°

### ls -l ì¶œë ¥ í•´ì„

```bash
$ ls -l
-rw-r--r--  1 ubuntu ubuntu 1234 Nov 25 10:00 example.txt
drwxr-xr-x  2 ubuntu ubuntu 4096 Nov 25 10:00 mydir
```

**ì¶œë ¥ êµ¬ì¡°:**
```
-rw-r--r--  1 ubuntu ubuntu 1234 Nov 25 10:00 example.txt
â”‚â”œâ”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¤  â”‚ â”‚      â”‚      â”‚    â”‚           â”‚
â”‚â”‚â””â”´â”´â”´â”´â”´â”´â”´â”˜  â”‚ â”‚      â”‚      â”‚    â”‚           â””â”€ íŒŒì¼ëª…
â”‚â”‚  Other    â”‚ â”‚      â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìˆ˜ì •ì¼ì‹œ
â”‚â”‚           â”‚ â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í¬ê¸°(bytes)
â”‚â””â”€ Group    â”‚ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ê·¸ë£¹ ì†Œìœ ì
â””â”€â”€ Owner    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì‚¬ìš©ì ì†Œìœ ì
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë§í¬ ìˆ˜
```

### ê¶Œí•œ ë¹„íŠ¸ êµ¬ì¡°

```
- rw- r-- r--
â”‚ â”‚â””â”¼â”€â”˜â””â”¼â”€â”˜â””â”¼â”€â”˜
â”‚ â”‚ â”‚   â”‚   â””â”€ Other (ê¸°íƒ€ ì‚¬ìš©ì) ê¶Œí•œ
â”‚ â”‚ â”‚   â””â”€â”€â”€â”€â”€ Group (ê·¸ë£¹) ê¶Œí•œ
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ Owner (ì†Œìœ ì) ê¶Œí•œ
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ê¶Œí•œ ë¹„íŠ¸ (9ìë¦¬)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ íŒŒì¼ ìœ í˜•
```

### íŒŒì¼ ìœ í˜• ê¸°í˜¸

| ê¸°í˜¸ | ìœ í˜• | ì„¤ëª… |
|:-:|:-:|:-:|
| `-` | ì¼ë°˜ íŒŒì¼ | í…ìŠ¤íŠ¸, ë°”ì´ë„ˆë¦¬ ë“± |
| `d` | ë””ë ‰í„°ë¦¬ | Directory |
| `l` | ì‹¬ë³¼ë¦­ ë§í¬ | Symbolic Link |
| `c` | ë¬¸ì ì¥ì¹˜ | Character Device (í‚¤ë³´ë“œ, í„°ë¯¸ë„ ë“±) |
| `b` | ë¸”ë¡ ì¥ì¹˜ | Block Device (í•˜ë“œë””ìŠ¤í¬ ë“±) |
| `s` | ì†Œì¼“ | Socket |
| `p` | íŒŒì´í”„ | Named Pipe |

---

## ğŸ“ ê¶Œí•œì˜ ì˜ë¯¸

### íŒŒì¼ ê¶Œí•œ

| ê¶Œí•œ | ê¸°í˜¸ | 8ì§„ìˆ˜ | ì˜ë¯¸ | í•  ìˆ˜ ìˆëŠ” ì‘ì—… |
|:-:|:-:|:-:|:-:|:-:|
| ì½ê¸° | `r` | 4 | Read | íŒŒì¼ ë‚´ìš© ë³´ê¸° (`cat`, `less`, `vi` ì½ê¸° ëª¨ë“œ) |
| ì“°ê¸° | `w` | 2 | Write | íŒŒì¼ ë‚´ìš© ìˆ˜ì • (`vi` ì“°ê¸°, `echo >`, ì‚­ì œëŠ” ì•„ë‹˜!) |
| ì‹¤í–‰ | `x` | 1 | Execute | í”„ë¡œê·¸ë¨ ì‹¤í–‰ (ë°”ì´ë„ˆë¦¬, ìŠ¤í¬ë¦½íŠ¸) |
| ì—†ìŒ | `-` | 0 | No Permission | í•´ë‹¹ ê¶Œí•œ ì—†ìŒ |

#### ğŸ“Ÿ íŒŒì¼ ê¶Œí•œ ìƒì„¸ ì„¤ëª…

**ì½ê¸° ê¶Œí•œ (r):**
```bash
# ì½ê¸° ê¶Œí•œì´ ìˆì„ ë•Œ ê°€ëŠ¥í•œ ëª…ë ¹ì–´
$ cat file.txt          # ë‚´ìš© ì¶œë ¥
$ less file.txt         # í˜ì´ì§€ ë‹¨ìœ„ë¡œ ë³´ê¸°
$ grep "text" file.txt  # ê²€ìƒ‰
$ cp file.txt copy.txt  # ë³µì‚¬ (ë‚´ìš©ì„ ì½ì–´ì•¼ í•˜ë¯€ë¡œ)
$ vi file.txt           # ì½ê¸° ì „ìš© ëª¨ë“œë¡œ ì—´ê¸°
```

**ì“°ê¸° ê¶Œí•œ (w):**
```bash
# ì“°ê¸° ê¶Œí•œì´ ìˆì„ ë•Œ ê°€ëŠ¥í•œ ëª…ë ¹ì–´
$ echo "text" > file.txt         # ë‚´ìš© ë®ì–´ì“°ê¸°
$ echo "more" >> file.txt        # ë‚´ìš© ì¶”ê°€
$ vi file.txt                    # í¸ì§‘í•˜ê³  ì €ì¥
$ sed -i 's/old/new/' file.txt   # ë‚´ìš© ìˆ˜ì •

# âš ï¸ ì£¼ì˜: íŒŒì¼ ì‚­ì œëŠ” ë””ë ‰í„°ë¦¬ì˜ ì“°ê¸° ê¶Œí•œ í•„ìš”!
```

**ì‹¤í–‰ ê¶Œí•œ (x):**
```bash
# ì‹¤í–‰ ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸
$ chmod +x script.sh
$ ./script.sh           # ì§ì ‘ ì‹¤í–‰
$ bash script.sh        # ì‰˜ë¡œ ì‹¤í–‰ (x ê¶Œí•œ ë¶ˆí•„ìš”)

# ë°”ì´ë„ˆë¦¬ í”„ë¡œê·¸ë¨
$ chmod +x /usr/bin/program
$ program               # PATHì— ìˆìœ¼ë©´ ì§ì ‘ ì‹¤í–‰
```

### ë””ë ‰í„°ë¦¬ ê¶Œí•œ

| ê¶Œí•œ | ê¸°í˜¸ | ì˜ë¯¸ | í•  ìˆ˜ ìˆëŠ” ì‘ì—… |
|:-:|:-:|:-:|:-:|
| ì½ê¸° | `r` | Read | ë””ë ‰í„°ë¦¬ ë‚´ìš© ëª©ë¡ ë³´ê¸° (`ls`) |
| ì“°ê¸° | `w` | Write | íŒŒì¼/ë””ë ‰í„°ë¦¬ ìƒì„±, ì‚­ì œ, ì´ë¦„ ë³€ê²½ |
| ì‹¤í–‰ | `x` | Execute | ë””ë ‰í„°ë¦¬ë¡œ ì´ë™ (`cd`), íŒŒì¼ ì ‘ê·¼ |

#### ğŸ“Ÿ ë””ë ‰í„°ë¦¬ ê¶Œí•œ ìƒì„¸ ì„¤ëª…

**ì½ê¸° ê¶Œí•œ (r):**
```bash
# ë””ë ‰í„°ë¦¬ ì½ê¸° ê¶Œí•œ â†’ ëª©ë¡ ë³¼ ìˆ˜ ìˆìŒ
$ ls mydir
file1.txt  file2.txt  subdir

# í•˜ì§€ë§Œ x ê¶Œí•œ ì—†ìœ¼ë©´ ìƒì„¸ ì •ë³´ëŠ” ëª» ë´„
$ ls -l mydir
ls: cannot access 'mydir/file1.txt': Permission denied
total 0
-????????? ? ? ? ?            ? file1.txt
```

**ì“°ê¸° ê¶Œí•œ (w):**
```bash
# ë””ë ‰í„°ë¦¬ ì“°ê¸° ê¶Œí•œ â†’ íŒŒì¼ ìƒì„±/ì‚­ì œ ê°€ëŠ¥
$ touch mydir/newfile.txt       # íŒŒì¼ ìƒì„±
$ rm mydir/oldfile.txt          # íŒŒì¼ ì‚­ì œ
$ mv mydir/a.txt mydir/b.txt    # ì´ë¦„ ë³€ê²½
$ mkdir mydir/subdir            # ì„œë¸Œë””ë ‰í„°ë¦¬ ìƒì„±

# âš ï¸ ì£¼ì˜: íŒŒì¼ ì‚­ì œëŠ” íŒŒì¼ ê¶Œí•œì´ ì•„ë‹Œ ë””ë ‰í„°ë¦¬ ê¶Œí•œ!
```

**ì‹¤í–‰ ê¶Œí•œ (x):**
```bash
# ë””ë ‰í„°ë¦¬ ì‹¤í–‰ ê¶Œí•œ â†’ ì ‘ê·¼ ê°€ëŠ¥
$ cd mydir              # ë””ë ‰í„°ë¦¬ë¡œ ì´ë™
$ cat mydir/file.txt    # íŒŒì¼ ë‚´ìš© ì½ê¸°
$ ls -l mydir          # ìƒì„¸ ì •ë³´ ë³´ê¸°

# x ê¶Œí•œ ì—†ìœ¼ë©´ ì ‘ê·¼ ë¶ˆê°€
$ cd no_x_dir
bash: cd: no_x_dir: Permission denied
```

ğŸ’¡ **ì¤‘ìš”**: ë””ë ‰í„°ë¦¬ëŠ” **rê³¼ xê°€ ê±°ì˜ í•­ìƒ ê°™ì´** ì„¤ì •ë©ë‹ˆë‹¤!
- `r-x`: ëª©ë¡ ë³´ê¸° + ì ‘ê·¼ (ì¼ë°˜ì )
- `r--`: ëª©ë¡ë§Œ ë³´ì´ì§€ë§Œ íŒŒì¼ ì ‘ê·¼ ë¶ˆê°€ (ê±°ì˜ ë¬´ì˜ë¯¸)
- `--x`: íŒŒì¼ ì´ë¦„ì„ ì•Œë©´ ì ‘ê·¼ ê°€ëŠ¥ (ìˆ¨ê¹€ ë””ë ‰í„°ë¦¬)

---

## ğŸ­ ê¶Œí•œ ëŒ€ìƒ (Owner, Group, Other)

### 3ê°€ì§€ ê¶Œí•œ ëŒ€ìƒ

```
rwx  r-x  r--
â””â”¬â”˜  â””â”¬â”˜  â””â”¬â”˜
 â”‚    â”‚    â””â”€ Others (ê¸°íƒ€ ì‚¬ìš©ì): ì†Œìœ ìë„ ê·¸ë£¹ë„ ì•„ë‹Œ ëª¨ë“  ì‚¬ìš©ì
 â”‚    â””â”€â”€â”€â”€â”€â”€ Group (ê·¸ë£¹): íŒŒì¼ì˜ ê·¸ë£¹ì— ì†í•œ ì‚¬ìš©ì
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Owner (ì†Œìœ ì): íŒŒì¼ì„ ë§Œë“  ì‚¬ìš©ì
```

### ê¶Œí•œ ì ìš© ìš°ì„ ìˆœìœ„

```mermaid
graph TD
    A[ì‚¬ìš©ìê°€ íŒŒì¼ ì ‘ê·¼ ì‹œë„] --> B{ì†Œìœ ìì¸ê°€?}
    B -->|Yes| C[Owner ê¶Œí•œ ì ìš©]
    B -->|No| D{ê·¸ë£¹ ë©¤ë²„ì¸ê°€?}
    D -->|Yes| E[Group ê¶Œí•œ ì ìš©]
    D -->|No| F[Other ê¶Œí•œ ì ìš©]
    C --> G[ê¶Œí•œ í™•ì¸]
    E --> G
    F --> G
    G --> H{ê¶Œí•œ ìˆìŒ?}
    H -->|Yes| I[ì‘ì—… í—ˆìš©]
    H -->|No| J[Permission Denied]
```

**ì¤‘ìš”**: ì†Œìœ ìë¼ë©´ **ê·¸ë£¹ ê¶Œí•œê³¼ Other ê¶Œí•œì€ ë¬´ì‹œ**ë©ë‹ˆë‹¤!

### ì˜ˆì œ: ê¶Œí•œ ì ìš© ì‹œë‚˜ë¦¬ì˜¤

**íŒŒì¼ ìƒíƒœ:**
```bash
$ ls -l secret.txt
-rw-------  1 alice developers  100 Nov 25 10:00 secret.txt
```

**ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„:**

| ì‚¬ìš©ì | ì†Œìœ ì? | ê·¸ë£¹ ë©¤ë²„? | ì ìš© ê¶Œí•œ | ì½ê¸° | ì“°ê¸° | ì‹¤í–‰ |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| alice | âœ… | - | `rw-` | âœ… | âœ… | âŒ |
| bob (developers) | âŒ | âœ… | `---` | âŒ | âŒ | âŒ |
| charlie | âŒ | âŒ | `---` | âŒ | âŒ | âŒ |

**ì‹¤ì œ í…ŒìŠ¤íŠ¸:**
```bash
# alice (ì†Œìœ ì)
$ cat secret.txt        # âœ… ì„±ê³µ
$ echo "new" >> secret.txt  # âœ… ì„±ê³µ

# bob (developers ê·¸ë£¹)
$ cat secret.txt        # âŒ Permission denied
$ echo "test" >> secret.txt  # âŒ Permission denied

# charlie (ê¸°íƒ€ ì‚¬ìš©ì)
$ cat secret.txt        # âŒ Permission denied
```

---

## ğŸ”¢ ê¶Œí•œì˜ ìˆ«ì í‘œí˜„ (8ì§„ìˆ˜)

### ê¶Œí•œ ë¹„íŠ¸ ê°’

| ê¶Œí•œ | 2ì§„ìˆ˜ | 8ì§„ìˆ˜ | ì˜ë¯¸ |
|:-:|:-:|:-:|:-:|
| `---` | 000 | 0 | ê¶Œí•œ ì—†ìŒ |
| `--x` | 001 | 1 | ì‹¤í–‰ë§Œ |
| `-w-` | 010 | 2 | ì“°ê¸°ë§Œ |
| `-wx` | 011 | 3 | ì“°ê¸° + ì‹¤í–‰ |
| `r--` | 100 | 4 | ì½ê¸°ë§Œ |
| `r-x` | 101 | 5 | ì½ê¸° + ì‹¤í–‰ |
| `rw-` | 110 | 6 | ì½ê¸° + ì“°ê¸° |
| `rwx` | 111 | 7 | ëª¨ë“  ê¶Œí•œ |

### ê¶Œí•œ ê³„ì‚° ë°©ë²•

**ë°©ë²• 1: ë”í•˜ê¸°**
```
r (ì½ê¸°)  = 4
w (ì“°ê¸°)  = 2
x (ì‹¤í–‰)  = 1

rwx = 4 + 2 + 1 = 7
r-x = 4 + 0 + 1 = 5
r-- = 4 + 0 + 0 = 4
```

**ì˜ˆì œ:**
```bash
-rw-r--r--

Owner  = rw- = 4 + 2 + 0 = 6
Group  = r-- = 4 + 0 + 0 = 4
Others = r-- = 4 + 0 + 0 = 4

â†’ 644
```

### ì¼ë°˜ì ì¸ ê¶Œí•œ ì¡°í•©

| 8ì§„ìˆ˜ | ì‹¬ë³¼ | ìš©ë„ | ì˜ˆì‹œ |
|:-:|:-:|:-:|:-:|
| `644` | `rw-r--r--` | ì¼ë°˜ íŒŒì¼ | í…ìŠ¤íŠ¸ íŒŒì¼, ë¬¸ì„œ |
| `755` | `rwxr-xr-x` | ì‹¤í–‰ íŒŒì¼ | ìŠ¤í¬ë¦½íŠ¸, í”„ë¡œê·¸ë¨ |
| `600` | `rw-------` | ë¹„ë°€ íŒŒì¼ | ê°œì¸ í‚¤, ë¹„ë°€ë²ˆí˜¸ íŒŒì¼ |
| `700` | `rwx------` | ê°œì¸ ë””ë ‰í„°ë¦¬ | ì‚¬ìš©ì ì „ìš© í´ë” |
| `750` | `rwxr-x---` | ê·¸ë£¹ ê³µìœ  | íŒ€ í”„ë¡œì íŠ¸ í´ë” |
| `775` | `rwxrwxr-x` | í˜‘ì—… ë””ë ‰í„°ë¦¬ | ê³µë™ ì‘ì—… ê³µê°„ |
| `777` | `rwxrwxrwx` | ëª¨ë‘ ì ‘ê·¼ | âš ï¸ ìœ„í—˜! ì‚¬ìš© ìì œ |

---

## ğŸ› ï¸ chmod - ê¶Œí•œ ë³€ê²½ ëª…ë ¹ì–´

### ğŸ“Ÿ `chmod` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„

**ëª…ë ¹ì–´ ê°œìš”:**
- **ëª©ì **: íŒŒì¼ ë° ë””ë ‰í„°ë¦¬ì˜ ê¶Œí•œ ë³€ê²½
- **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ê¶Œí•œ ì„¤ì •, ë³´ì•ˆ ê°•í™”, í˜‘ì—… í™˜ê²½ êµ¬ì„±
- **ê¶Œí•œ**: ì†Œìœ ì ë˜ëŠ” root

**ê¸°ë³¸ ë¬¸ë²•:**
```bash
chmod [ì˜µì…˜] MODE FILE...
```

### ë°©ë²• 1: ìˆ«ì ëª¨ë“œ (Octal Mode)

**ë¬¸ë²•:**
```bash
chmod [ì˜µì…˜] NNN FILE
```

**ì˜ˆì œ 1: ì¼ë°˜ íŒŒì¼ ê¶Œí•œ ì„¤ì •**
```bash
# 644 ê¶Œí•œ ë¶€ì—¬ (rw-r--r--)
$ chmod 644 document.txt

# í™•ì¸
$ ls -l document.txt
-rw-r--r-- 1 user group 1234 Nov 25 document.txt
```

**ì˜ˆì œ 2: ì‹¤í–‰ íŒŒì¼ ê¶Œí•œ ì„¤ì •**
```bash
# 755 ê¶Œí•œ ë¶€ì—¬ (rwxr-xr-x)
$ chmod 755 script.sh

# í™•ì¸
$ ls -l script.sh
-rwxr-xr-x 1 user group 567 Nov 25 script.sh

# ì‹¤í–‰ ê°€ëŠ¥
$ ./script.sh
```

**ì˜ˆì œ 3: ë¹„ë°€ íŒŒì¼ ê¶Œí•œ ì„¤ì •**
```bash
# 600 ê¶Œí•œ ë¶€ì—¬ (rw-------)
$ chmod 600 ~/.ssh/id_rsa

# í™•ì¸
$ ls -l ~/.ssh/id_rsa
-rw------- 1 user group 1679 Nov 25 /home/user/.ssh/id_rsa
```

ğŸ’¡ **SSH í‚¤ëŠ” ë°˜ë“œì‹œ 600 ë˜ëŠ” 400**ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ SSHê°€ í‚¤ ì‚¬ìš©ì„ ê±°ë¶€í•©ë‹ˆë‹¤!

### ë°©ë²• 2: ì‹¬ë³¼ë¦­ ëª¨ë“œ (Symbolic Mode)

**ë¬¸ë²•:**
```bash
chmod [who][operator][permission] FILE
```

**êµ¬ì„± ìš”ì†Œ:**

| ìš”ì†Œ | ê¸°í˜¸ | ì˜ë¯¸ |
|:-:|:-:|:-:|
| **who** | `u` | User (ì†Œìœ ì) |
|  | `g` | Group (ê·¸ë£¹) |
|  | `o` | Others (ê¸°íƒ€) |
|  | `a` | All (ëª¨ë‘) |
| **operator** | `+` | ê¶Œí•œ ì¶”ê°€ |
|  | `-` | ê¶Œí•œ ì œê±° |
|  | `=` | ê¶Œí•œ ì„¤ì • (ê¸°ì¡´ ë¬´ì‹œ) |
| **permission** | `r` | Read (ì½ê¸°) |
|  | `w` | Write (ì“°ê¸°) |
|  | `x` | Execute (ì‹¤í–‰) |

**ì˜ˆì œ 1: ê¶Œí•œ ì¶”ê°€ (+)**
```bash
# ì†Œìœ ìì—ê²Œ ì‹¤í–‰ ê¶Œí•œ ì¶”ê°€
$ chmod u+x script.sh
$ ls -l script.sh
-rwxr--r-- 1 user group 567 Nov 25 script.sh

# ê·¸ë£¹ì— ì“°ê¸° ê¶Œí•œ ì¶”ê°€
$ chmod g+w file.txt
$ ls -l file.txt
-rw-rw-r-- 1 user group 123 Nov 25 file.txt

# ëª¨ë‘ì—ê²Œ ì‹¤í–‰ ê¶Œí•œ ì¶”ê°€
$ chmod a+x program
$ ls -l program
-rwxr-xr-x 1 user group 890 Nov 25 program
```

**ì˜ˆì œ 2: ê¶Œí•œ ì œê±° (-)**
```bash
# ê·¸ë£¹ê³¼ ê¸°íƒ€ì—ì„œ ì“°ê¸° ê¶Œí•œ ì œê±°
$ chmod go-w file.txt
$ ls -l file.txt
-rw-r--r-- 1 user group 123 Nov 25 file.txt

# ê¸°íƒ€ì—ì„œ ëª¨ë“  ê¶Œí•œ ì œê±°
$ chmod o-rwx secret.txt
$ ls -l secret.txt
-rw-r----- 1 user group 456 Nov 25 secret.txt
```

**ì˜ˆì œ 3: ê¶Œí•œ ì„¤ì • (=)**
```bash
# ì†Œìœ ìëŠ” ëª¨ë“  ê¶Œí•œ, ë‚˜ë¨¸ì§€ëŠ” ì½ê¸°ë§Œ
$ chmod u=rwx,go=r file.txt
$ ls -l file.txt
-rwxr--r-- 1 user group 123 Nov 25 file.txt

# ê·¸ë£¹ì— ì½ê¸°+ì‹¤í–‰ë§Œ ì„¤ì •
$ chmod g=rx file.txt
$ ls -l file.txt
-rwxr-xr-- 1 user group 123 Nov 25 file.txt
```

**ì˜ˆì œ 4: ë³µí•© ì‚¬ìš©**
```bash
# ì†Œìœ ì ì‹¤í–‰ ì¶”ê°€, ê¸°íƒ€ ëª¨ë“  ê¶Œí•œ ì œê±°
$ chmod u+x,o-rwx script.sh
$ ls -l script.sh
-rwxr-x--- 1 user group 567 Nov 25 script.sh
```

### ì¬ê·€ ì˜µì…˜ (-R)

**ë””ë ‰í„°ë¦¬ì™€ í•˜ìœ„ íŒŒì¼ ëª¨ë‘ ë³€ê²½:**
```bash
# ë””ë ‰í„°ë¦¬ êµ¬ì¡° ì˜ˆì‹œ
$ tree myproject/
myproject/
â”œâ”€â”€ file1.txt
â”œâ”€â”€ file2.txt
â””â”€â”€ subdir/
    â””â”€â”€ file3.txt

# ëª¨ë“  íŒŒì¼ê³¼ ë””ë ‰í„°ë¦¬ì— 755 ê¶Œí•œ ë¶€ì—¬
$ chmod -R 755 myproject/

# í™•ì¸
$ ls -lR myproject/
drwxr-xr-x 3 user group 4096 Nov 25 myproject
-rwxr-xr-x 1 user group  100 Nov 25 file1.txt
-rwxr-xr-x 1 user group  200 Nov 25 file2.txt
drwxr-xr-x 2 user group 4096 Nov 25 subdir
-rwxr-xr-x 1 user group  300 Nov 25 file3.txt
```

âš ï¸ **ì£¼ì˜**: `-R` ì˜µì…˜ì€ ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ëª¨ë“  í•˜ìœ„ íŒŒì¼ì— ë™ì¼í•œ ê¶Œí•œì´ ì ìš©ë©ë‹ˆë‹¤!

**ë” ì•ˆì „í•œ ë°©ë²•:**
```bash
# ë””ë ‰í„°ë¦¬ë§Œ 755
$ find myproject -type d -exec chmod 755 {} \;

# íŒŒì¼ë§Œ 644
$ find myproject -type f -exec chmod 644 {} \;
```

### ì‹¤í–‰ ì˜ˆì œ: ìŠ¤í¬ë¦½íŠ¸ ê¶Œí•œ ë¬¸ì œ í•´ê²°

**ì‹œë‚˜ë¦¬ì˜¤**: ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ

```bash
# ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
$ cat > hello.sh << 'EOF'
#!/bin/bash
echo "Hello, World!"
EOF

# ì‹¤í–‰ ì‹œë„
$ ./hello.sh
bash: ./hello.sh: Permission denied

# ê¶Œí•œ í™•ì¸
$ ls -l hello.sh
-rw-r--r-- 1 user group 33 Nov 25 hello.sh
      ^ ì‹¤í–‰ ê¶Œí•œ ì—†ìŒ

# ì‹¤í–‰ ê¶Œí•œ ì¶”ê°€
$ chmod +x hello.sh
# ë˜ëŠ”
$ chmod 755 hello.sh

# ë‹¤ì‹œ ì‹¤í–‰
$ ./hello.sh
Hello, World!

# ê¶Œí•œ í™•ì¸
$ ls -l hello.sh
-rwxr-xr-x 1 user group 33 Nov 25 hello.sh
    ^^^ ì‹¤í–‰ ê¶Œí•œ ì¶”ê°€ë¨
```

### ì‹¤ë¬´ í™œìš© íŒ

**íŒ 1: ì›¹ ì„œë²„ íŒŒì¼ ê¶Œí•œ í‘œì¤€**
```bash
#!/bin/bash
# web_permissions.sh - ì›¹ ì„œë²„ íŒŒì¼ ê¶Œí•œ ì„¤ì •

WEB_ROOT="/var/www/html"

# ë””ë ‰í„°ë¦¬: 755 (rwxr-xr-x)
find "$WEB_ROOT" -type d -exec chmod 755 {} \;

# PHP/HTML íŒŒì¼: 644 (rw-r--r--)
find "$WEB_ROOT" -type f -name "*.php" -exec chmod 644 {} \;
find "$WEB_ROOT" -type f -name "*.html" -exec chmod 644 {} \;

# ì—…ë¡œë“œ ë””ë ‰í„°ë¦¬: 775 (rwxrwxr-x)
chmod 775 "$WEB_ROOT/uploads"

# ì„¤ì • íŒŒì¼: 600 (rw-------)
chmod 600 "$WEB_ROOT/config.php"

echo "Web server permissions set"
```

**íŒ 2: í”„ë¡œì íŠ¸ ì´ˆê¸° ê¶Œí•œ ì„¤ì •**
```bash
#!/bin/bash
# project_setup.sh <project_dir>

PROJECT_DIR=$1

# ê¸°ë³¸ ë””ë ‰í„°ë¦¬ êµ¬ì¡° ìƒì„±
mkdir -p "$PROJECT_DIR"/{src,bin,config,logs,data}

# ê¸°ë³¸ ê¶Œí•œ ì„¤ì •
chmod 755 "$PROJECT_DIR"
chmod 755 "$PROJECT_DIR"/{src,bin}
chmod 750 "$PROJECT_DIR"/config   # ì„¤ì • íŒŒì¼ì€ ë” ì—„ê²©í•˜ê²Œ
chmod 775 "$PROJECT_DIR"/logs     # ë¡œê·¸ ë””ë ‰í„°ë¦¬ëŠ” ê·¸ë£¹ ì“°ê¸° í—ˆìš©
chmod 770 "$PROJECT_DIR"/data     # ë°ì´í„°ëŠ” ê·¸ë£¹ë§Œ ì ‘ê·¼

echo "Project $PROJECT_DIR initialized with secure permissions"
```

**íŒ 3: ë³´ì•ˆ íŒŒì¼ ê¶Œí•œ ê°ì‚¬**
```bash
#!/bin/bash
# security_audit.sh - ìœ„í—˜í•œ ê¶Œí•œ ì„¤ì • ì°¾ê¸°

echo "=== Security Audit ==="

# 777 ê¶Œí•œ íŒŒì¼ ì°¾ê¸° (ë§¤ìš° ìœ„í—˜!)
echo "Files with 777 permissions (CRITICAL):"
find / -type f -perm 0777 2>/dev/null | head -20

# World-writable íŒŒì¼ ì°¾ê¸°
echo ""
echo "World-writable files:"
find / -type f -perm -002 2>/dev/null | head -20

# SUID/SGID íŒŒì¼ ì°¾ê¸°
echo ""
echo "SUID/SGID files:"
find / -type f \( -perm -4000 -o -perm -2000 \) 2>/dev/null | head -20
```

---

## ğŸ‘¤ chown - ì†Œìœ ê¶Œ ë³€ê²½

### ğŸ“Ÿ `chown` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„

**ëª…ë ¹ì–´ ê°œìš”:**
- **ëª©ì **: íŒŒì¼/ë””ë ‰í„°ë¦¬ì˜ ì†Œìœ ì ë° ê·¸ë£¹ ë³€ê²½
- **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: íŒŒì¼ ì´ì „, ê¶Œí•œ ìœ„ì„, ì‹œìŠ¤í…œ ë³µêµ¬
- **ê¶Œí•œ**: root ê¶Œí•œ í•„ìš” (ì¼ë°˜ ì‚¬ìš©ìëŠ” ìì‹ ì˜ íŒŒì¼ë„ ë³€ê²½ ë¶ˆê°€!)

**ê¸°ë³¸ ë¬¸ë²•:**
```bash
chown [ì˜µì…˜] [ì†Œìœ ì][:ê·¸ë£¹] FILE...
```

### ì‚¬ìš© íŒ¨í„´

| íŒ¨í„´ | ë³€ê²½ ëŒ€ìƒ | ì˜ˆì‹œ |
|:-:|:-:|:-:|
| `chown user file` | ì†Œìœ ìë§Œ | `chown john file.txt` |
| `chown user:group file` | ì†Œìœ ìì™€ ê·¸ë£¹ | `chown john:developers file.txt` |
| `chown :group file` | ê·¸ë£¹ë§Œ | `chown :developers file.txt` |
| `chown user: file` | ì†Œìœ ì + ì‚¬ìš©ìì˜ ê¸°ë³¸ ê·¸ë£¹ | `chown john: file.txt` |

### ì‹¤í–‰ ì˜ˆì œ 1: ì†Œìœ ì ë³€ê²½

**ì‹œë‚˜ë¦¬ì˜¤**: rootê°€ ìƒì„±í•œ íŒŒì¼ì„ ì¼ë°˜ ì‚¬ìš©ìì—ê²Œ ì´ì „

```bash
# rootë¡œ íŒŒì¼ ìƒì„±
# touch /tmp/test.txt
# ls -l /tmp/test.txt
-rw-r--r-- 1 root root 0 Nov 25 /tmp/test.txt

# ì†Œìœ ìë¥¼ ubuntuë¡œ ë³€ê²½
# chown ubuntu /tmp/test.txt

# í™•ì¸
# ls -l /tmp/test.txt
-rw-r--r-- 1 ubuntu root 0 Nov 25 /tmp/test.txt
               ^^^^^^ ë³€ê²½ë¨
```

### ì‹¤í–‰ ì˜ˆì œ 2: ì†Œìœ ìì™€ ê·¸ë£¹ ë™ì‹œ ë³€ê²½

**ì‹œë‚˜ë¦¬ì˜¤**: í”„ë¡œì íŠ¸ íŒŒì¼ì„ ìƒˆ ë‹´ë‹¹ìì—ê²Œ ì™„ì „ ì´ì „

```bash
# í˜„ì¬ ìƒíƒœ
$ ls -l project.zip
-rw-r--r-- 1 alice developers 1024 Nov 25 project.zip

# ì†Œìœ ìë¥¼ bobìœ¼ë¡œ, ê·¸ë£¹ì„ managersë¡œ ë³€ê²½
# chown bob:managers project.zip

# í™•ì¸
# ls -l project.zip
-rw-r--r-- 1 bob managers 1024 Nov 25 project.zip
```

### ì‹¤í–‰ ì˜ˆì œ 3: ì¬ê·€ì  ì†Œìœ ê¶Œ ë³€ê²½

**ì‹œë‚˜ë¦¬ì˜¤**: ë””ë ‰í„°ë¦¬ ì „ì²´ë¥¼ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ì´ì „

```bash
# ë””ë ‰í„°ë¦¬ êµ¬ì¡°
$ tree userdata/
userdata/
â”œâ”€â”€ file1.txt
â”œâ”€â”€ file2.txt
â””â”€â”€ subdir/
    â””â”€â”€ file3.txt

# í˜„ì¬ ì†Œìœ ê¶Œ
$ ls -lR userdata/
drwxr-xr-x 3 root root 4096 userdata
-rw-r--r-- 1 root root  100 file1.txt
-rw-r--r-- 1 root root  200 file2.txt
drwxr-xr-x 2 root root 4096 subdir
-rw-r--r-- 1 root root  300 file3.txt

# ì¬ê·€ì ìœ¼ë¡œ johnì—ê²Œ ì´ì „
# chown -R john:john userdata/

# í™•ì¸
$ ls -lR userdata/
drwxr-xr-x 3 john john 4096 userdata
-rw-r--r-- 1 john john  100 file1.txt
-rw-r--r-- 1 john john  200 file2.txt
drwxr-xr-x 2 john john 4096 subdir
-rw-r--r-- 1 john john  300 file3.txt
```

### ì‹¤í–‰ ì˜ˆì œ 4: ì°¸ì¡° íŒŒì¼ ì‚¬ìš©

**ì‹œë‚˜ë¦¬ì˜¤**: ë‹¤ë¥¸ íŒŒì¼ê³¼ ë™ì¼í•œ ì†Œìœ ê¶Œ ì ìš©

```bash
# reference.txtì™€ ë™ì¼í•œ ì†Œìœ ê¶Œì„ target.txtì— ì ìš©
# chown --reference=reference.txt target.txt

# ì˜ˆì‹œ
$ ls -l
-rw-r--r-- 1 alice developers 100 reference.txt
-rw-r--r-- 1 bob   managers   200 target.txt

# ì ìš©
# chown --reference=reference.txt target.txt

# í™•ì¸
$ ls -l
-rw-r--r-- 1 alice developers 100 reference.txt
-rw-r--r-- 1 alice developers 200 target.txt
```

---

## ğŸ‘¥ chgrp - ê·¸ë£¹ ì†Œìœ ê¶Œ ë³€ê²½

### ğŸ“Ÿ `chgrp` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„

**ëª…ë ¹ì–´ ê°œìš”:**
- **ëª©ì **: íŒŒì¼/ë””ë ‰í„°ë¦¬ì˜ ê·¸ë£¹ ì†Œìœ ê¶Œë§Œ ë³€ê²½
- **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ê·¸ë£¹ ê³µìœ  ì„¤ì •, í˜‘ì—… í™˜ê²½ êµ¬ì„±
- **ê¶Œí•œ**: root ê¶Œí•œ ë˜ëŠ” ì†Œìœ ìì´ë©´ì„œ í•´ë‹¹ ê·¸ë£¹ ë©¤ë²„

**ê¸°ë³¸ ë¬¸ë²•:**
```bash
chgrp [ì˜µì…˜] GROUP FILE...
```

### ì‹¤í–‰ ì˜ˆì œ

**ê·¸ë£¹ ë³€ê²½:**
```bash
# í˜„ì¬ ìƒíƒœ
$ ls -l project.txt
-rw-r--r-- 1 john developers 1024 Nov 25 project.txt

# ê·¸ë£¹ì„ managersë¡œ ë³€ê²½
$ chgrp managers project.txt

# í™•ì¸
$ ls -l project.txt
-rw-r--r-- 1 john managers 1024 Nov 25 project.txt
```

**ì¬ê·€ì  ê·¸ë£¹ ë³€ê²½:**
```bash
# í”„ë¡œì íŠ¸ ë””ë ‰í„°ë¦¬ ì „ì²´ë¥¼ developers ê·¸ë£¹ìœ¼ë¡œ
$ chgrp -R developers /opt/project/
```

ğŸ’¡ **íŒ**: `chgrp`ì€ `chown :group` ê³¼ ë™ì¼í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

---

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” íŠ¹ìˆ˜ ê¶Œí•œ(SETUID, SETGID, Sticky Bit)ê³¼ umaskë¥¼ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.
# ğŸŒŸ ì„¹ì…˜ 5: íŠ¹ìˆ˜ ê¶Œí•œ (SETUID, SETGID, Sticky Bit) ë° umask

## âš¡ íŠ¹ìˆ˜ ê¶Œí•œì´ë€?

ì¼ë°˜ ê¶Œí•œ (rwx) ì™¸ì— LinuxëŠ” **3ê°€ì§€ íŠ¹ìˆ˜ ê¶Œí•œ**ì„ ì œê³µí•©ë‹ˆë‹¤:
- **SETUID**: íŒŒì¼ ì‹¤í–‰ ì‹œ ì†Œìœ ì ê¶Œí•œ íšë“
- **SETGID**: íŒŒì¼ ì‹¤í–‰ ì‹œ ê·¸ë£¹ ê¶Œí•œ íšë“ / ë””ë ‰í„°ë¦¬ ê·¸ë£¹ ìƒì†
- **Sticky Bit**: ë””ë ‰í„°ë¦¬ì—ì„œ ìì‹ ì˜ íŒŒì¼ë§Œ ì‚­ì œ ê°€ëŠ¥

ğŸ” **ë³´ì•ˆ ê²½ê³ **: íŠ¹ìˆ˜ ê¶Œí•œì€ ê°•ë ¥í•˜ì§€ë§Œ ìœ„í—˜í•©ë‹ˆë‹¤! ì˜ëª» ì‚¬ìš©í•˜ë©´ ì‹œìŠ¤í…œ ë³´ì•ˆ ìœ„í˜‘ì´ ë©ë‹ˆë‹¤.

---

## ğŸ”´ SETUID (Set User ID)

### ê°œë…

**SETUIDê°€ ì„¤ì •ëœ ì‹¤í–‰ íŒŒì¼**ì„ ì‹¤í–‰í•˜ë©´, í”„ë¡œì„¸ìŠ¤ëŠ” **ì‹¤í–‰í•œ ì‚¬ìš©ìê°€ ì•„ë‹Œ íŒŒì¼ ì†Œìœ ìì˜ ê¶Œí•œ**ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

### í‘œì‹œ ë°©ë²•

```bash
$ ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root 68208 Nov 25 /usr/bin/passwd
   ^
   â””â”€ s = SETUID ì„¤ì •ë¨ (ì†Œìœ ì ì‹¤í–‰ ê¶Œí•œ ìœ„ì¹˜)
```

- `s` (ì†Œë¬¸ì): ì‹¤í–‰ ê¶Œí•œ ìˆìŒ + SETUID
- `S` (ëŒ€ë¬¸ì): ì‹¤í–‰ ê¶Œí•œ ì—†ìŒ + SETUID (ë¬´ì˜ë¯¸)

### ì™œ í•„ìš”í•œê°€? - passwd ëª…ë ¹ì–´ ì˜ˆì œ

**ë¬¸ì œ ìƒí™©:**
- ì‚¬ìš©ìê°€ ìì‹ ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ë ¤ë©´ `/etc/shadow` íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•¨
- `/etc/shadow`ëŠ” rootë§Œ ì“°ê¸° ê°€ëŠ¥ (`-rw-r-----`)
- ì¼ë°˜ ì‚¬ìš©ìëŠ” ì ‘ê·¼ ë¶ˆê°€

**í•´ê²°ì±…: SETUID**

```bash
# /usr/bin/passwd íŒŒì¼ í™•ì¸
$ ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root 68208 /usr/bin/passwd
    ^
    â””â”€ SETUID ì„¤ì •

# shadow íŒŒì¼ ê¶Œí•œ í™•ì¸
$ ls -l /etc/shadow
-rw-r----- 1 root shadow 1234 /etc/shadow
```

**ë™ì‘ ê³¼ì •:**

```mermaid
sequenceDiagram
    participant U as ubuntu (UID=1000)
    participant P as passwd í”„ë¡œì„¸ìŠ¤
    participant S as /etc/shadow

    U->>P: passwd ëª…ë ¹ ì‹¤í–‰
    Note over P: SETUID ë•Œë¬¸ì—<br/>UID=0(root)ë¡œ ì‹¤í–‰
    P->>S: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ìš”ì²­
    Note over P: root ê¶Œí•œì´ë¯€ë¡œ<br/>ì“°ê¸° ê°€ëŠ¥
    S->>P: ë³€ê²½ ì™„ë£Œ
    P->>U: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ
```

**1. ì¼ë°˜ ì‚¬ìš©ìê°€ passwd ì‹¤í–‰:**
```bash
$ whoami
ubuntu

$ passwd
Current password: ****
New password: ********
```

**2. passwd í”„ë¡œì„¸ìŠ¤ëŠ” SETUID ë•Œë¬¸ì— root ê¶Œí•œ íšë“:**
```bash
# í”„ë¡œì„¸ìŠ¤ í™•ì¸ (ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ)
$ ps aux | grep passwd
root     1234  ... /usr/bin/passwd
         ^^^^
         rootë¡œ ì‹¤í–‰ ì¤‘!
```

**3. root ê¶Œí•œìœ¼ë¡œ /etc/shadow ìˆ˜ì • ì„±ê³µ**

### SETUID ì„¤ì • ë°©ë²•

**ìˆ«ì ëª¨ë“œ:**
```bash
# 4000ì„ ë”í•¨
$ chmod 4755 program
$ ls -l program
-rwsr-xr-x 1 owner group 1234 program
```

**ì‹¬ë³¼ë¦­ ëª¨ë“œ:**
```bash
$ chmod u+s program
$ ls -l program
-rwsr-xr-x 1 owner group 1234 program
```

### ì‹¤ìŠµ ì˜ˆì œ: SETUID ê¶Œí•œ ìƒìŠ¹ í…ŒìŠ¤íŠ¸

**âš ï¸ ê²½ê³ **: ì´ ì˜ˆì œëŠ” **êµìœ¡ ëª©ì **ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì„¸ìš”!

**1. í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ ì‘ì„±:**
```bash
$ cat > test_setuid.c << 'EOF'
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

int main(int argc, char *argv[]) {
    printf("Real UID: %d\n", getuid());
    printf("Effective UID: %d\n", geteuid());

    // SETUIDë¡œ root ê¶Œí•œ íšë“
    setuid(0);
    setgid(0);

    if (argc > 1 && strcmp(argv[1], "hacker") == 0) {
        printf("Launching root shell...\n");
        system("/bin/bash");
    } else {
        printf("Normal execution\n");
    }

    return 0;
}
EOF
```

**2. ì»´íŒŒì¼:**
```bash
$ gcc test_setuid.c -o test_setuid
```

**3. rootê°€ ì†Œìœ ê¶Œ ë³€ê²½ ë° SETUID ì„¤ì •:**
```bash
# root ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰
# chown root:root test_setuid
# chmod 4755 test_setuid

# í™•ì¸
$ ls -l test_setuid
-rwsr-xr-x 1 root root 16856 Nov 25 test_setuid
    ^
```

**4. ì¼ë°˜ ì‚¬ìš©ìê°€ ì‹¤í–‰:**
```bash
# ì¼ë°˜ ì‹¤í–‰
$ ./test_setuid
Real UID: 1000
Effective UID: 0      â† root ê¶Œí•œ íšë“!
Normal execution

# "hacker" ì¸ìë¡œ ì‹¤í–‰
$ ./test_setuid hacker
Real UID: 1000
Effective UID: 0
Launching root shell...
# whoami
root                  â† root ì‰˜ íšë“!
```

### ğŸ” SETUID ë³´ì•ˆ ìœ„í—˜ì„±

**ìœ„í—˜ 1: ê¶Œí•œ ìƒìŠ¹ ê³µê²©**

ì˜ëª» ì‘ì„±ëœ SETUID í”„ë¡œê·¸ë¨ì€ ê³µê²©ìì—ê²Œ root ê¶Œí•œì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```c
// ì·¨ì•½í•œ ì½”ë“œ ì˜ˆì‹œ
system(user_input);  // ì‚¬ìš©ì ì…ë ¥ì„ ì§ì ‘ ì‹¤í–‰ - ë§¤ìš° ìœ„í—˜!
```

**ê³µê²© ì‹œë‚˜ë¦¬ì˜¤:**
```bash
$ ./vulnerable_program "; bash"
# root ì‰˜ íšë“!
```

**ìœ„í—˜ 2: ë²„í¼ ì˜¤ë²„í”Œë¡œìš°**
```c
char buffer[100];
gets(buffer);  // ë²„í¼ ì˜¤ë²„í”Œë¡œìš° ì·¨ì•½ì 
```

**ìœ„í—˜ 3: ê²½ë¡œ ì¡°ì‘**
```c
system("ls");  // PATH ì¡°ì‘ìœ¼ë¡œ ì•…ì„± "ls" ì‹¤í–‰ ê°€ëŠ¥
```

### SETUID íŒŒì¼ ì ê²€

**ì‹œìŠ¤í…œì˜ ëª¨ë“  SETUID íŒŒì¼ ì°¾ê¸°:**
```bash
$ find / -type f -perm -4000 2>/dev/null
/usr/bin/passwd
/usr/bin/sudo
/usr/bin/su
/usr/bin/newgrp
/usr/bin/gpasswd
/usr/bin/chsh
/usr/bin/chfn
/usr/lib/openssh/ssh-keysign
```

**SETUID íŒŒì¼ ëª©ë¡ ì €ì¥ (ì •ê¸° ê°ì‚¬):**
```bash
#!/bin/bash
# setuid_audit.sh

REPORT="/var/log/setuid_files_$(date +%Y%m%d).txt"

echo "SETUID Files Audit - $(date)" > "$REPORT"
echo "================================" >> "$REPORT"

find / -type f -perm -4000 2>/dev/null | while read file; do
    ls -l "$file" >> "$REPORT"
done

echo ""  >> "$REPORT"
echo "Total SETUID files: $(find / -type f -perm -4000 2>/dev/null | wc -l)" >> "$REPORT"
```

**ì£¼ê°„ ë¹„êµ:**
```bash
# ì´ë²ˆ ì£¼ ìŠ¤ìº”
$ find / -type f -perm -4000 2>/dev/null | sort > setuid_current.txt

# ì§€ë‚œ ì£¼ì™€ ë¹„êµ
$ diff setuid_last_week.txt setuid_current.txt
> /usr/local/bin/suspicious_program   â† ìƒˆë¡œ ì¶”ê°€ëœ SETUID íŒŒì¼ (ì ê²€ í•„ìš”!)
```

### SETUID ë³´ì•ˆ ê¶Œì¥ì‚¬í•­

âœ… **ê¶Œì¥ ì‚¬í•­:**
1. **ìµœì†Œ ì‚¬ìš©**: ê¼­ í•„ìš”í•œ ì‹œìŠ¤í…œ íŒŒì¼ì—ë§Œ ì„¤ì •
2. **ì •ê¸° ê°ì‚¬**: ì£¼ê¸°ì ìœ¼ë¡œ SETUID íŒŒì¼ ëª©ë¡ ì ê²€
3. **ë³€ê²½ ëª¨ë‹ˆí„°ë§**: ìƒˆë¡œìš´ SETUID íŒŒì¼ ìƒì„± ê°ì‹œ
4. **ì½”ë“œ ê²€í† **: SETUID í”„ë¡œê·¸ë¨ ì†ŒìŠ¤ ì½”ë“œ ë³´ì•ˆ ê°ì‚¬
5. **ì œê±° ìš°ì„ **: ëŒ€ì•ˆì´ ìˆë‹¤ë©´ SETUID ì œê±°

âŒ **ê¸ˆì§€ ì‚¬í•­:**
1. ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì— SETUID ì„¤ì • (ë™ì‘í•˜ì§€ ì•ŠìŒ)
2. ì‚¬ìš©ì ì…ë ¥ì„ ì§ì ‘ system() ì‹¤í–‰
3. í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì— SETUID ìœ ì§€
4. ë¶ˆí•„ìš”í•œ í”„ë¡œê·¸ë¨ì— SETUID ì„¤ì •

---

## ğŸŸ¡ SETGID (Set Group ID)

### ê°œë…

SETGIDëŠ” **ë‘ ê°€ì§€ ìš©ë„**ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤:

1. **ì‹¤í–‰ íŒŒì¼**: íŒŒì¼ ì‹¤í–‰ ì‹œ ê·¸ë£¹ ê¶Œí•œ íšë“
2. **ë””ë ‰í„°ë¦¬**: ìƒì„±ë˜ëŠ” íŒŒì¼ì´ ë¶€ëª¨ ë””ë ‰í„°ë¦¬ ê·¸ë£¹ ìƒì†

### 1. ì‹¤í–‰ íŒŒì¼ì˜ SETGID

**í‘œì‹œ:**
```bash
$ ls -l /usr/bin/wall
-rwxr-sr-x 1 root tty 35432 /usr/bin/wall
      ^
      â””â”€ s = SETGID ì„¤ì • (ê·¸ë£¹ ì‹¤í–‰ ê¶Œí•œ ìœ„ì¹˜)
```

**ë™ì‘:**
- íŒŒì¼ ì‹¤í–‰ ì‹œ ì‹¤í–‰ ì‚¬ìš©ìì˜ ê·¸ë£¹ì´ ì•„ë‹Œ **íŒŒì¼ ê·¸ë£¹ì˜ ê¶Œí•œ** íšë“

### 2. ë””ë ‰í„°ë¦¬ì˜ SETGID (ë” ì¤‘ìš”!)

**í‘œì‹œ:**
```bash
$ ls -ld /shared/project
drwxrwsr-x 2 root developers 4096 /shared/project
      ^
      â””â”€ s = SETGID ì„¤ì •
```

**ë™ì‘:**
- ì´ ë””ë ‰í„°ë¦¬ì— ìƒì„±ë˜ëŠ” ëª¨ë“  íŒŒì¼ê³¼ ë””ë ‰í„°ë¦¬ëŠ” **ë¶€ëª¨ ë””ë ‰í„°ë¦¬ì˜ ê·¸ë£¹ì„ ìƒì†**

### ì‹¤ìŠµ ì˜ˆì œ: íŒ€ í˜‘ì—… ë””ë ‰í„°ë¦¬

**ì‹œë‚˜ë¦¬ì˜¤**: developers íŒ€ì´ ê³µë™ìœ¼ë¡œ ì‘ì—…í•˜ëŠ” ë””ë ‰í„°ë¦¬ ì„¤ì •

**ë¬¸ì œ ìƒí™© (SETGID ì—†ì„ ë•Œ):**
```bash
# ê³µìœ  ë””ë ‰í„°ë¦¬ ìƒì„±
$ mkdir /shared/project
$ chgrp developers /shared/project
$ chmod 775 /shared/project

# aliceê°€ íŒŒì¼ ìƒì„±
$ su - alice
$ touch /shared/project/alice_file.txt
$ ls -l /shared/project/
-rw-r--r-- 1 alice alice 0 alice_file.txt
                     ^^^^^
                     aliceì˜ ê¸°ë³¸ ê·¸ë£¹ (developers ì•„ë‹˜!)

# bobì´ ìˆ˜ì • ì‹œë„ (ì‹¤íŒ¨!)
$ su - bob
$ echo "edit" >> /shared/project/alice_file.txt
bash: /shared/project/alice_file.txt: Permission denied
```

**í•´ê²° (SETGID ì„¤ì •):**
```bash
# SETGID ì„¤ì •
$ chmod g+s /shared/project
$ ls -ld /shared/project
drwxrwsr-x 2 root developers 4096 /shared/project
      ^

# aliceê°€ íŒŒì¼ ìƒì„±
$ su - alice
$ touch /shared/project/team_file.txt
$ ls -l /shared/project/
-rw-r--r-- 1 alice developers 0 team_file.txt
                    ^^^^^^^^^^
                    ë¶€ëª¨ ë””ë ‰í„°ë¦¬ ê·¸ë£¹ ìƒì†!

# bobì´ ìˆ˜ì • (ì„±ê³µ!)
$ su - bob
$ echo "Bob's edit" >> /shared/project/team_file.txt
$ cat /shared/project/team_file.txt
Bob's edit
```

### SETGID ì„¤ì • ë°©ë²•

**ìˆ«ì ëª¨ë“œ:**
```bash
# 2000ì„ ë”í•¨
$ chmod 2775 /shared/project
$ ls -ld /shared/project
drwxrwsr-x 2 root developers 4096 /shared/project
```

**ì‹¬ë³¼ë¦­ ëª¨ë“œ:**
```bash
$ chmod g+s /shared/project
```

### ì™„ë²½í•œ í˜‘ì—… ë””ë ‰í„°ë¦¬ ì„¤ì •

```bash
#!/bin/bash
# setup_team_directory.sh <dir> <group>

DIR=$1
GROUP=$2

# ë””ë ‰í„°ë¦¬ ìƒì„±
mkdir -p "$DIR"

# ê·¸ë£¹ ì„¤ì •
chgrp "$GROUP" "$DIR"

# ê¶Œí•œ ì„¤ì •: rwxrwxr-x + SETGID
chmod 2775 "$DIR"

# umask ì„¤ì • (í˜‘ì—…ì„ ìœ„í•´)
# ì‚¬ìš©ìë“¤ì˜ ~/.bashrcì— ì¶”ê°€
echo "umask 002" >> ~/.bashrc

echo "Team directory setup complete:"
ls -ld "$DIR"
```

**ì‹¤í–‰:**
```bash
$ setup_team_directory.sh /opt/dev_project developers
Team directory setup complete:
drwxrwsr-x 2 root developers 4096 /opt/dev_project
```

---

## ğŸŸ¢ Sticky Bit

### ê°œë…

**Sticky Bitê°€ ì„¤ì •ëœ ë””ë ‰í„°ë¦¬**ì—ì„œëŠ”:
- ëª¨ë“  ì‚¬ìš©ìê°€ íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ ìˆì§€ë§Œ
- **ìì‹ ì˜ íŒŒì¼ë§Œ ì‚­ì œ/ì´ë¦„ ë³€ê²½** ê°€ëŠ¥
- ë‹¤ë¥¸ ì‚¬ëŒì˜ íŒŒì¼ì€ ìˆ˜ì •ì€ ê°€ëŠ¥í•˜ì§€ë§Œ ì‚­ì œ/ì´ë¦„ ë³€ê²½ ë¶ˆê°€

### í‘œì‹œ ë°©ë²•

```bash
$ ls -ld /tmp
drwxrwxrwt 20 root root 4096 Nov 25 /tmp
        ^
        â””â”€ t = Sticky Bit ì„¤ì • (Other ì‹¤í–‰ ê¶Œí•œ ìœ„ì¹˜)
```

- `t` (ì†Œë¬¸ì): ì‹¤í–‰ ê¶Œí•œ ìˆìŒ + Sticky Bit
- `T` (ëŒ€ë¬¸ì): ì‹¤í–‰ ê¶Œí•œ ì—†ìŒ + Sticky Bit

### ì™œ í•„ìš”í•œê°€? - /tmp ë””ë ‰í„°ë¦¬

**/tmp ë””ë ‰í„°ë¦¬:**
- ëª¨ë“  ì‚¬ìš©ìê°€ ì„ì‹œ íŒŒì¼ ìƒì„± í•„ìš” â†’ `rwx` ê¶Œí•œ í•„ìš”
- í•˜ì§€ë§Œ ë‹¤ë¥¸ ì‚¬ëŒ íŒŒì¼ì„ ì‚­ì œí•˜ë©´ ì•ˆ ë¨

**Sticky Bit ì—†ì„ ë•Œì˜ ë¬¸ì œ:**
```bash
# /tmp ë””ë ‰í„°ë¦¬ (Sticky Bit ì œê±°í•œ ê²½ìš°)
$ ls -ld /tmp
drwxrwxrwx 20 root root 4096 /tmp
        ^^^
        ëª¨ë“  ê¶Œí•œ ìˆìŒ

# aliceê°€ íŒŒì¼ ìƒì„±
$ su - alice
$ echo "alice data" > /tmp/alice_file
$ ls -l /tmp/alice_file
-rw-r--r-- 1 alice alice 11 /tmp/alice_file

# bobì´ ì‚­ì œ ì‹œë„ (ì„±ê³µ! - ë¬¸ì œ!)
$ su - bob
$ rm /tmp/alice_file      # ì„±ê³µ! (ë³¸ì¸ íŒŒì¼ ì•„ë‹Œë°!)
$ ls /tmp/alice_file
ls: cannot access '/tmp/alice_file': No such file or directory
```

**Sticky Bit ìˆì„ ë•Œ:**
```bash
# /tmp ë””ë ‰í„°ë¦¬ (Sticky Bit ì„¤ì •)
$ ls -ld /tmp
drwxrwxrwt 20 root root 4096 /tmp
        ^

# aliceê°€ íŒŒì¼ ìƒì„±
$ su - alice
$ echo "alice data" > /tmp/alice_file

# bobì´ ì‚­ì œ ì‹œë„ (ì‹¤íŒ¨! - ì •ìƒ)
$ su - bob
$ rm /tmp/alice_file
rm: cannot remove '/tmp/alice_file': Operation not permitted

# bobì´ ìˆ˜ì •ì€ ê°€ëŠ¥ (íŒŒì¼ ê¶Œí•œì— ë”°ë¼)
$ echo "bob edit" >> /tmp/alice_file  # íŒŒì¼ ê¶Œí•œì´ í—ˆìš©í•˜ë©´ ê°€ëŠ¥
```

### Sticky Bit ì„¤ì • ë°©ë²•

**ìˆ«ì ëª¨ë“œ:**
```bash
# 1000ì„ ë”í•¨
$ chmod 1777 /shared/temp
$ ls -ld /shared/temp
drwxrwxrwt 2 root root 4096 /shared/temp
```

**ì‹¬ë³¼ë¦­ ëª¨ë“œ:**
```bash
$ chmod +t /shared/temp
# ë˜ëŠ”
$ chmod o+t /shared/temp
```

### ì‹¤ìŠµ ì˜ˆì œ: ê³µìœ  ì„ì‹œ ë””ë ‰í„°ë¦¬

**ì‹œë‚˜ë¦¬ì˜¤**: íŒ€ì› ëª¨ë‘ê°€ ì‚¬ìš©í•˜ëŠ” ì„ì‹œ íŒŒì¼ ê³µê°„

```bash
# ê³µìœ  ì„ì‹œ ë””ë ‰í„°ë¦¬ ìƒì„±
$ mkdir /shared/team_temp
$ chmod 1777 /shared/team_temp
$ ls -ld /shared/team_temp
drwxrwxrwt 2 root root 4096 /shared/team_temp

# aliceê°€ íŒŒì¼ ìƒì„±
$ su - alice
$ echo "Alice's temp data" > /shared/team_temp/alice.tmp
$ ls -l /shared/team_temp/
-rw-r--r-- 1 alice alice 18 alice.tmp

# bobì´ ìì‹ ì˜ íŒŒì¼ ìƒì„±
$ su - bob
$ echo "Bob's temp data" > /shared/team_temp/bob.tmp

# bobì´ alice íŒŒì¼ ì‚­ì œ ì‹œë„ (ì‹¤íŒ¨)
$ rm /shared/team_temp/alice.tmp
rm: cannot remove '/shared/team_temp/alice.tmp': Operation not permitted

# bobì´ ìì‹ ì˜ íŒŒì¼ ì‚­ì œ (ì„±ê³µ)
$ rm /shared/team_temp/bob.tmp
$ ls /shared/team_temp/
alice.tmp     # bobì˜ íŒŒì¼ë§Œ ì‚­ì œë¨
```

### Sticky Bit ê¶Œì¥ ì‚¬ìš©ì²˜

âœ… **ê¶Œì¥:**
- `/tmp` - ì‹œìŠ¤í…œ ì„ì‹œ ë””ë ‰í„°ë¦¬
- `/var/tmp` - ì¬ë¶€íŒ… í›„ì—ë„ ìœ ì§€ë˜ëŠ” ì„ì‹œ ë””ë ‰í„°ë¦¬
- ê³µìœ  ì—…ë¡œë“œ ë””ë ‰í„°ë¦¬
- ê³µìœ  ì„ì‹œ ì‘ì—… ê³µê°„

---

## ğŸ”¢ íŠ¹ìˆ˜ ê¶Œí•œ ìˆ«ì í‘œí˜„

### 4ìë¦¬ 8ì§„ìˆ˜ ëª¨ë“œ

```
[íŠ¹ìˆ˜ê¶Œí•œ][Owner][Group][Other]
    â”‚       â”‚      â”‚      â”‚
    â”‚       â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€ ì¼ë°˜ ê¶Œí•œ (rwx)
    â””â”€ SETUID(4) + SETGID(2) + Sticky(1)
```

### íŠ¹ìˆ˜ ê¶Œí•œ ê°’

| ê°’ | ì˜ë¯¸ | ì¡°í•© |
|:-:|:-:|:-:|
| 4 | SETUID | 4000 |
| 2 | SETGID | 2000 |
| 1 | Sticky Bit | 1000 |
| 6 | SETUID + SETGID | 6000 |
| 7 | SETUID + SETGID + Sticky | 7000 |

### ì˜ˆì œ

```bash
# SETUID + 755
$ chmod 4755 program
-rwsr-xr-x

# SETGID + 775
$ chmod 2775 directory
drwxrwsr-x

# Sticky Bit + 777
$ chmod 1777 /tmp
drwxrwxrwt

# SETUID + SETGID + 755
$ chmod 6755 program
-rwsr-sr-x
```

---

## ğŸ“Š umask - ê¸°ë³¸ ê¶Œí•œ ì„¤ì •

### umask ê°œë…

**umask**ëŠ” **íŒŒì¼/ë””ë ‰í„°ë¦¬ ìƒì„± ì‹œ ì ìš©ë˜ëŠ” ê¸°ë³¸ ê¶Œí•œ**ì„ ê²°ì •í•©ë‹ˆë‹¤.

**ê³„ì‚° ë°©ì‹:**
```
íŒŒì¼ ê¶Œí•œ     = 666 - umask
ë””ë ‰í„°ë¦¬ ê¶Œí•œ = 777 - umask
```

### umask ê°’ í™•ì¸

```bash
$ umask
0022

# ì‹¬ë³¼ë¦­ í˜•ì‹ìœ¼ë¡œ ë³´ê¸°
$ umask -S
u=rwx,g=rx,o=rx
```

### umask ê³„ì‚° ì˜ˆì œ

**umask 022ì¸ ê²½ìš°:**

```
íŒŒì¼:
  666 (ìµœëŒ€)
- 022 (umask)
------
  644 (rw-r--r--)

ë””ë ‰í„°ë¦¬:
  777 (ìµœëŒ€)
- 022 (umask)
------
  755 (rwxr-xr-x)
```

**ì‹¤ì œ í…ŒìŠ¤íŠ¸:**
```bash
$ umask
0022

# íŒŒì¼ ìƒì„±
$ touch newfile.txt
$ ls -l newfile.txt
-rw-r--r-- 1 user group 0 newfile.txt
  ^^^^^^^^
  644 = 666 - 022

# ë””ë ‰í„°ë¦¬ ìƒì„±
$ mkdir newdir
$ ls -ld newdir
drwxr-xr-x 2 user group 4096 newdir
  ^^^^^^^^^
  755 = 777 - 022
```

### ì¼ë°˜ì ì¸ umask ê°’

| umask | íŒŒì¼ | ë””ë ‰í„°ë¦¬ | ìš©ë„ | ë³´ì•ˆ ìˆ˜ì¤€ |
|:-:|:-:|:-:|:-:|:-:|
| 0022 | 644 | 755 | ì¼ë°˜ ì‚¬ìš©ì | í‘œì¤€ |
| 0027 | 640 | 750 | ë³´ì•ˆ ê°•í™” | ë†’ìŒ |
| 0077 | 600 | 700 | ìµœê³  ë³´ì•ˆ | ë§¤ìš° ë†’ìŒ |
| 0002 | 664 | 775 | í˜‘ì—… í™˜ê²½ | ë‚®ìŒ |
| 0000 | 666 | 777 | ìœ„í—˜! | ë§¤ìš° ë‚®ìŒ âŒ |

### umask ë³€ê²½

**ì„ì‹œ ë³€ê²½ (í˜„ì¬ ì„¸ì…˜ë§Œ):**
```bash
$ umask 027

# í™•ì¸
$ umask
0027

# íŒŒì¼ ìƒì„± í…ŒìŠ¤íŠ¸
$ touch test.txt
$ ls -l test.txt
-rw-r----- 1 user group 0 test.txt
  ^^^^^^^^
  640 = 666 - 027
```

**ì˜êµ¬ ë³€ê²½:**
```bash
# ì‚¬ìš©ìë³„: ~/.bashrc
$ echo "umask 027" >> ~/.bashrc

# ì‹œìŠ¤í…œ ì „ì²´: /etc/profile
# echo "umask 027" >> /etc/profile
```

### ë³´ì•ˆ ê¶Œì¥ umask

**ì¼ë°˜ ì‚¬ìš©ì:**
```bash
umask 022    # ê¸°ë³¸ê°’, ì ì ˆ
# ë˜ëŠ”
umask 027    # ë” ì•ˆì „ (Other ê¶Œí•œ ì œê±°)
```

**ì‹œìŠ¤í…œ ê´€ë¦¬ì:**
```bash
umask 077    # ìµœê³  ë³´ì•ˆ (ë³¸ì¸ë§Œ ì ‘ê·¼)
```

**í˜‘ì—… í™˜ê²½:**
```bash
umask 002    # ê·¸ë£¹ ì“°ê¸° í—ˆìš©
# + SETGID ë””ë ‰í„°ë¦¬ ì‚¬ìš©
```

### ì‹¤ë¬´ ì˜ˆì œ: ë³´ì•ˆ ê°•í™”

**ì‹œë‚˜ë¦¬ì˜¤**: ê¸ˆìœµ ì‹œìŠ¤í…œì˜ ë³´ì•ˆ ì„¤ì •

```bash
#!/bin/bash
# secure_umask.sh

# /etc/profile.d/secure.sh ìƒì„±
cat > /etc/profile.d/secure.sh << 'EOF'
# Secure default umask for financial system

# ì¼ë°˜ ì‚¬ìš©ì: 027
if [ $UID -ge 1000 ]; then
    umask 027
fi

# root: 077
if [ $UID -eq 0 ]; then
    umask 077
fi

# íŠ¹ì • ê·¸ë£¹ (developers): 002
if groups | grep -q developers; then
    umask 002
fi
EOF

chmod 755 /etc/profile.d/secure.sh
```

### umask ê²€ì¦

```bash
#!/bin/bash
# check_umask.sh - ì‹œìŠ¤í…œ umask ê°ì‚¬

echo "=== umask Audit ==="

# í˜„ì¬ umask
echo "Current umask: $(umask)"

# íŒŒì¼ ìƒì„± í…ŒìŠ¤íŠ¸
TEST_FILE="/tmp/umask_test_$$"
touch "$TEST_FILE"
FILE_PERM=$(stat -c %a "$TEST_FILE")
rm "$TEST_FILE"

# ë””ë ‰í„°ë¦¬ ìƒì„± í…ŒìŠ¤íŠ¸
TEST_DIR="/tmp/umask_dir_$$"
mkdir "$TEST_DIR"
DIR_PERM=$(stat -c %a "$TEST_DIR")
rmdir "$TEST_DIR"

echo "File permissions: $FILE_PERM"
echo "Directory permissions: $DIR_PERM"

# ê¶Œì¥ ì‚¬í•­
if [ "$FILE_PERM" = "666" ] || [ "$DIR_PERM" = "777" ]; then
    echo "âš ï¸  WARNING: Insecure umask detected!"
    echo "Current umask allows world-writable files."
    echo "Recommended: umask 022 or 027"
fi
```

---

## âœ… íŠ¹ìˆ˜ ê¶Œí•œ ì¢…í•© ì •ë¦¬

### ë¹„êµí‘œ

| íŠ¹ìˆ˜ ê¶Œí•œ | ëŒ€ìƒ | í‘œì‹œ | ìˆ«ì | ì£¼ìš” ìš©ë„ |
|:-:|:-:|:-:|:-:|:-:|
| SETUID | ì‹¤í–‰ íŒŒì¼ | `rws` | 4000 | ì†Œìœ ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ |
| SETGID | ì‹¤í–‰ íŒŒì¼ | `rws` | 2000 | ê·¸ë£¹ ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ |
| SETGID | ë””ë ‰í„°ë¦¬ | `rws` | 2000 | ê·¸ë£¹ ìƒì† |
| Sticky Bit | ë””ë ‰í„°ë¦¬ | `rwt` | 1000 | ìê¸° íŒŒì¼ë§Œ ì‚­ì œ |

### ì‹¤ì „ ì„¤ì • ì˜ˆì œ

**1. ì‹œìŠ¤í…œ ëª…ë ¹ì–´ (SETUID):**
```bash
-rwsr-xr-x 1 root root /usr/bin/passwd
```

**2. íŒ€ í”„ë¡œì íŠ¸ ë””ë ‰í„°ë¦¬ (SETGID):**
```bash
drwxrwsr-x 2 root developers /opt/project
```

**3. ê³µìœ  ì„ì‹œ ë””ë ‰í„°ë¦¬ (Sticky Bit):**
```bash
drwxrwxrwt 2 root root /tmp
```

**4. í˜‘ì—… + ë³´í˜¸ (SETGID + Sticky Bit):**
```bash
$ chmod 3775 /shared/uploads
drwxrwsr-t 2 root team /shared/uploads
      ^^^
      SETGID + Sticky Bit
```

---

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ì‹¤ìŠµ ê°€ì´ë“œì™€ ì¢…í•© ì •ë¦¬ë¥¼ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.
